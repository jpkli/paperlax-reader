{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?a4b6","webpack:///./src/assets/google.svg","webpack:///./src/components/KeywordList.vue?603d","webpack:///./src/assets sync ^\\.\\/.*$","webpack:///./src/pages/User.vue?c410","webpack:///./src/components/AppBar.vue?f673","webpack:///./src/components/UserAuth.vue?a2db","webpack:///./src/pages/CollectionView.vue?d245","webpack:///./src/App.vue?8312","webpack:///src/App.vue","webpack:///./src/App.vue?28fb","webpack:///./src/App.vue?f7c3","webpack:///./src/components/UserAuth.vue?4695","webpack:///./src/Firebase/auth.js","webpack:///src/components/UserAuth.vue","webpack:///./src/components/UserAuth.vue?9a5f","webpack:///./src/components/UserAuth.vue?3665","webpack:///./src/pages/CollectionView.vue?4274","webpack:///./src/components/AppBar.vue?0f10","webpack:///./src/components/UserMenu.vue?e09b","webpack:///src/components/UserMenu.vue","webpack:///./src/components/UserMenu.vue?c941","webpack:///./src/components/UserMenu.vue","webpack:///src/components/AppBar.vue","webpack:///./src/components/AppBar.vue?be50","webpack:///./src/components/AppBar.vue?8ef6","webpack:///./src/components/NavigationDrawer.vue?ca12","webpack:///./src/components/CollectionFilter.vue?32cf","webpack:///src/components/CollectionFilter.vue","webpack:///./src/components/CollectionFilter.vue?bbcb","webpack:///./src/components/CollectionFilter.vue?b4b6","webpack:///src/components/NavigationDrawer.vue","webpack:///./src/components/NavigationDrawer.vue?b9d6","webpack:///./src/components/NavigationDrawer.vue","webpack:///./src/components/PaperList.vue?3db9","webpack:///src/components/PaperList.vue","webpack:///./src/components/PaperList.vue?9403","webpack:///./src/components/PaperList.vue?3c7f","webpack:///./src/components/RefList.vue?dbf8","webpack:///src/components/RefList.vue","webpack:///./src/components/RefList.vue?7006","webpack:///./src/components/RefList.vue","webpack:///./src/Firebase/database.js","webpack:///./src/components/PdfImporter.vue?6e1e","webpack:///./src/utils/RefParser.js","webpack:///./src/utils/PdfParser.js","webpack:///./src/Firebase/storage.js","webpack:///./src/utils/genArtHash.js","webpack:///src/components/PdfImporter.vue","webpack:///./src/components/PdfImporter.vue?88b4","webpack:///./src/components/PdfImporter.vue","webpack:///src/pages/CollectionView.vue","webpack:///./src/pages/CollectionView.vue?05df","webpack:///./src/pages/CollectionView.vue?2834","webpack:///./src/pages/User.vue?2abd","webpack:///./src/components/CollectionList.vue?0ae3","webpack:///src/components/CollectionList.vue","webpack:///./src/components/CollectionList.vue?2e3e","webpack:///./src/components/CollectionList.vue?d458","webpack:///src/pages/User.vue","webpack:///./src/pages/User.vue?b9f5","webpack:///./src/pages/User.vue?a171","webpack:///./src/pages/PaperReader.vue?3b70","webpack:///./src/components/PaperOutline.vue?ede7","webpack:///src/components/PaperOutline.vue","webpack:///./src/components/PaperOutline.vue?f635","webpack:///./src/components/PaperOutline.vue","webpack:///./src/utils/HighlightTextLayerBuilder.js","webpack:///src/pages/PaperReader.vue","webpack:///./src/pages/PaperReader.vue?9bb0","webpack:///./src/pages/PaperReader.vue?dbb6","webpack:///./src/pages/Reader.vue?9439","webpack:///./src/components/KeywordList.vue?dd91","webpack:///src/components/KeywordList.vue","webpack:///./src/components/KeywordList.vue?eea1","webpack:///./src/components/KeywordList.vue?472e","webpack:///./src/utils/Sentences.js","webpack:///./src/components/PdfViewer.vue?b808","webpack:///src/components/PdfViewer.vue","webpack:///./src/components/PdfViewer.vue?3e5c","webpack:///./src/components/PdfViewer.vue?0a60","webpack:///src/pages/Reader.vue","webpack:///./src/pages/Reader.vue?be7e","webpack:///./src/pages/Reader.vue?a72f","webpack:///./src/router.js","webpack:///./src/store.js","webpack:///./src/plugins/vuetify.js","webpack:///./config/firebase.conf.js","webpack:///./src/main.js","webpack:///./src/assets/logo.svg","webpack:///./src/pages/PaperReader.vue?6b7b","webpack:///./src/components/PdfViewer.vue?1334","webpack:///./src/components/PaperList.vue?2297","webpack:///./src/pages/Reader.vue?5c47","webpack:///./src/components/PdfViewer.vue?6427","webpack:///./src/components/CollectionList.vue?3cca","webpack:///./src/assets/google.png","webpack:///./src/components/CollectionFilter.vue?e988"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","code","keys","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","component","staticClass","_v","showUI","_e","staticStyle","isSignedIn","class","hidden","_l","auth","index","style","backgroundColor","color","textColor","on","$event","signIn","provider","image","icon","iconColor","_s","directives","rawName","expression","domProps","composing","email","password","EmailAuthProvider","GoogleAuthProvider","fetchUserInfo","firebaseUser","uid","displayName","photo","photoURL","isNew","metadata","lastSignInTime","creationTime","signOut","getUser","currentUser","requestUserInfo","callback","onAuthStateChanged","user","authUser","onUserSignIn","OauthProviders","FacebookAuthProvider","$route","params","action","log","redirectURL","query","redirect","getRedirectResult","then","$router","path","catch","methods","signInWithEmailAndPassword","querySelectorAll","forEach","elm","border","signInWithRedirect","VApp","VBtn","VCard","VCol","VContainer","VContent","VProgressCircular","VRow","$emit","collection","description","keyword","word","model","$$v","selectedKeywords","selectPdfFiles","ref","viewPaper","activeTab","reference","origin","nCitedBys","toggleDrawer","currUser","scopedSlots","_u","fn","_g","VAvatar","VIcon","VList","VListItem","VListItemTitle","VMenu","VSubheader","components","UserMenu","$store","commit","VAppBar","VAppBarNavIcon","VLayout","VSpacer","VToolbarTitle","VToolbar","isTemporary","drawer","selected","filter","filterCollection","text","dialog","filters","$log","info","VListItemAction","VListItemContent","VListItemGroup","CollectionFilter","props","temporary","Boolean","drawerOpen","computed","subscribe","mutation","state","navigationDrawer","VNavigationDrawer","paper","title","year","showAuthorNames","authors","uploadProgress","ai","paperAction","papers","paperLoadingStatus","actions","shown","uploadTask","snapshot","progress","bytesTransferred","totalBytes","toPrecision","newPaperInfo","find","Array","isArray","author","given","family","join","editPaperInfo","VDivider","VListItemSubtitle","exportAsJson","search","headers","references","hoverId","item","venue","editReference","authorNames","citedByCount","slot","selectedReference","editedRefInfo","saveRefInfo","sortable","paperReferences","refPaper","paperIds","indexOf","paperId","showRefInfo","providedRef","includeOrigin","refInfo","publisher","pages","volume","issue","JSON","stringify","edited","parse","split","a","trim","assign","element","encodeURIComponent","display","body","click","removeChild","VAlert","VCardActions","VCardText","VCardTitle","VDataTable","VDialog","VFlex","VTextField","VTextarea","Account","doc","set","Collections","list","querySnapshot","docs","collSnapshot","add","owner","collectionId","exists","where","Articles","articles","collectionRef","article","artDoc","artSnapshot","diff","entries","update","res","loadFiles","method","classifyByRnn","useAnystyle","simplyParse","refStrings","refItems","refLabelPatterns","RegExp","labelPattern","currentRefItem","refText","pattern","match","Number","replace","lastChar","parseRefStrings","refQuery","rt","raw","parsed","pdfUrl","pdf","refParser","getDocument","url","load","getMetadata","md","CreationDate","Author","Title","parseInfo","pageNumber","getPage","page","getTextContent","content","items","paperInfo","abstract","keywords","abstractStart","keywordStart","str","MIN_TITLE_LENGTH","MIN_NAME_LENGTH","MAX_ROWS_PARSE","topRows","largestText","Math","max","height","titleRowIndex","authorRowIndex","includes","texts","toLowerCase","urlString","refStart","numPages","getReferenceTexts","moreRefText","concat","refs","getPdfFilePath","uploadPdfFile","file","child","put","getPdfFileUrl","getDownloadURL","firstAuthorSurname","artTitle","seed","radix","hash","h64","toString","onFileLoaded","onUploadStateChanged","storageRef","elem","$refs","InputFiles","files","newPaper","URL","createObjectURL","getInfo","authorName","pop","genArtHash","getReferences","paperRefs","refId","date","AppBar","NavigationDrawer","PaperList","RefList","PdfImporter","localStore","addPaper","k","count","referenceHistogram","sort","b","selectFiles","VCheckbox","VTab","VTabs","collectionURL","nArticle","collections","newCollection","$set","createCollection","setDefaultsForNewCollection","coll","lastUpdated","FieldValue","serverTimestamp","public","VListItemActionText","CollectionList","register","getCollections","UserCollections","go","zoomOut","zoomIn","pageTotal","selectLocalFile","loadFile","outline","navRight","select","VTreeview","EXPAND_DIVS_TIMEOUT","textLayerDiv","eventBus","pageIndex","viewport","findController","enhanceTextSelection","highlights","highlightTexts","textContent","textContentItemsStr","textContentStream","renderingDone","pageIdx","matches","textDivs","textLayerRenderTask","_bindMouse","endOfContent","className","dispatch","source","numTextDivs","cancel","textLayerFrag","createDocumentFragment","container","_finishRendering","updateMatches","updateHighlights","reason","readableStream","matchesLength","iIndex","end","queryLen","ret","len","matchIdx","begin","divIdx","offset","prevEnd","isSelectedPage","selectedMatchIdx","highlightAll","infinity","beginText","appendTextToDiv","fromOffset","toOffset","div","substring","node","createTextNode","span","i0","i1","isSelected","highlightSuffix","updateMatchPosition","n0","n1","pageMatches","pageMatchesLength","clearedUntilDivIdx","active","convertMatches","renderMatches","highlight","bgColor","pageContent","_pageContents","matchPageOffsets","matchLengths","matchColors","renderHighlights","expandDivsTimer","addEventListener","evt","expandTextDivs","PDFJSDev","test","querySelector","adjustTop","getComputedStyle","getPropertyValue","divBounds","getBoundingClientRect","pageY","top","toFixed","classList","remove","GlobalWorkerOptions","workerSrc","MAX_IMAGE_SIZE","CMAP_URL","CMAP_PACKED","DEFAULT_SCALE_DELTA","MIN_SCALE","MAX_SCALE","PaperOutline","loading","allowPdfFile","pdfLoadingTask","pdfDocument","pdfViewer","pdfHistory","pdfLinkService","highlightLayers","bar","shadow","watch","parseInt","getElementsByClassName","scrollIntoView","initPdfViewer","open","l10n","viewerContainer","linkService","useOnlyCssZoom","textLayerMode","createTextLayerBuilder","isInPresentationMode","setViewer","setHistory","close","maxImageSize","cMapUrl","cMapPacked","onProgress","progressData","loaded","total","setDocument","initialize","fingerprint","loadingBar","hide","currentScaleValue","showOutline","_extractText","exception","loadingErrorMessage","InvalidPDFException","MissingPDFException","UnexpectedResponseException","msg","errorWrapper","getElementById","destroy","moreInfo","moreInfoText","version","build","stack","filename","lineNumber","line","errorMessage","closeButton","removeAttribute","onclick","errorMoreInfo","moreInfoButton","lessInfoButton","scrollHeight","parts","level","percent","round","isNaN","ticks","newScale","currentScale","ceil","min","floor","LocalPdfFile","pdfDoc","getOutline","tab","paperUrl","allowLocalFile","onPdfLoaded","quote","hightlightColors","highlightByKeywords","removeHighlights","proxy","autoHighlight","editKeyword","keywordIcon","selectedKeywordColor","selectedKeyword","updateHighlight","term","removeKeyword","suggestedTerms","addKeyword","newKeywordTerm","String","terms","highlighted","colors","highlightInProcess","isInteger","val","use","process","extractKeywords","vals","ki","kw","idx","keyphrases","phrase","keywordColors","newColor","newKeyword","keywordTerm","VSwitch","normalize","normalizer","plurals","parentheses","possessives","honorifics","out","extractWords","sentence","w","removeStopwords","calcWordMetrics","documents","numDocument","documentTexts","words","wordIdx","tf","idf","log10","tfidf","calcSentenceMetrics","wordMetrics","sentences","docIdx","metrics","tfVals","idfVal","reduce","floatButtonStyle","left","pagesPromise","pageView","getPageView","textLayer","clientX","clientY","VBtnToggle","PdfViewer","KeywordList","pdfTexts","quotes","getPaperTexts","parseKeywords","subtitles","textBySections","section","results","stats","topic","scoreMax","score","selectedSentences","analyzeTextByKeywords","selectedSections","keywordIdx","createSummary","keywordToRemove","ht","sec","lines","paperText","rawText","exec","keywordEndIndex","keywordStr","delimiters","dx","char","delimiter","sectionEnd","sectionCount","sectionTexts","subParts","toUpperCase","sp","regex","VTabsSlider","router","base","routes","Reader","beforeEach","to","from","next","requireAuth","matched","some","meta","Store","mutations","getters","icons","iconfont","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","config","productionTip","store","vuetify","h","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASY,EAAe5B,GACvB,OAAOyB,EAAoBI,EAAI,OAAS,CAAC,YAAc,eAAe7B,IAAUA,GAAW,IAAM,CAAC,YAAc,YAAYA,GAAW,MAIxI,SAASyB,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU+B,QAGnC,IAAIC,EAASJ,EAAiB5B,GAAY,CACzCK,EAAGL,EACHiC,GAAG,EACHF,QAAS,IAUV,OANAjB,EAAQd,GAAUW,KAAKqB,EAAOD,QAASC,EAAQA,EAAOD,QAASL,GAG/DM,EAAOC,GAAI,EAGJD,EAAOD,QAKfL,EAAoBQ,EAAI,SAAuBjC,GAC9C,IAAIkC,EAAW,GAKXC,EAAqBxB,EAAgBX,GACzC,GAA0B,IAAvBmC,EAGF,GAAGA,EACFD,EAAStB,KAAKuB,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,QAAQ,SAASC,EAASC,GAC3CJ,EAAqBxB,EAAgBX,GAAW,CAACsC,EAASC,KAE3DL,EAAStB,KAAKuB,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbpB,EAAoBqB,IACvBL,EAAOM,aAAa,QAAStB,EAAoBqB,IAElDL,EAAOO,IAAMpB,EAAe5B,GAG5B,IAAIiD,EAAQ,IAAIC,MAChBV,EAAmB,SAAUW,GAE5BV,EAAOW,QAAUX,EAAOY,OAAS,KACjCC,aAAaT,GACb,IAAIU,EAAQ5C,EAAgBX,GAC5B,GAAa,IAAVuD,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOX,IACpDC,EAAMW,QAAU,iBAAmB5D,EAAU,cAAgBwD,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEVtC,EAAgBX,QAAW+D,IAG7B,IAAIlB,EAAUmB,WAAW,WACxBxB,EAAiB,CAAEiB,KAAM,UAAWE,OAAQlB,KAC1C,MACHA,EAAOW,QAAUX,EAAOY,OAASb,EACjCE,SAASuB,KAAKC,YAAYzB,GAG5B,OAAOJ,QAAQ8B,IAAIjC,IAIpBT,EAAoB2C,EAAIvD,EAGxBY,EAAoB4C,EAAI1C,EAGxBF,EAAoB6C,EAAI,SAASxC,EAAS+B,EAAMU,GAC3C9C,EAAoB+C,EAAE1C,EAAS+B,IAClCtD,OAAOkE,eAAe3C,EAAS+B,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE9C,EAAoBmD,EAAI,SAAS9C,GACX,qBAAX+C,QAA0BA,OAAOC,aAC1CvE,OAAOkE,eAAe3C,EAAS+C,OAAOC,YAAa,CAAEC,MAAO,WAE7DxE,OAAOkE,eAAe3C,EAAS,aAAc,CAAEiD,OAAO,KAQvDtD,EAAoBuD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQtD,EAAoBsD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK5E,OAAO6E,OAAO,MAGvB,GAFA3D,EAAoBmD,EAAEO,GACtB5E,OAAOkE,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOtD,EAAoB6C,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR1D,EAAoB8D,EAAI,SAASxD,GAChC,IAAIwC,EAASxC,GAAUA,EAAOmD,WAC7B,WAAwB,OAAOnD,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAN,EAAoB6C,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR9C,EAAoB+C,EAAI,SAASgB,EAAQC,GAAY,OAAOlF,OAAOC,UAAUC,eAAeC,KAAK8E,EAAQC,IAGzGhE,EAAoBI,EAAI,oBAGxBJ,EAAoBiE,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAWjF,KAAK0E,KAAKO,GAC5CA,EAAWjF,KAAOf,EAClBgG,EAAaA,EAAWG,QACxB,IAAI,IAAI5F,EAAI,EAAGA,EAAIyF,EAAWvF,OAAQF,IAAKP,EAAqBgG,EAAWzF,IAC3E,IAAIU,EAAsBiF,EAI1B/E,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6EC5NT,yBAAke,EAAG,G,gDCArea,EAAOD,QAAU,IAA0B,2B,oCCA3C,yBAAuhB,EAAG,G,8DCA1hB,IAAImE,EAAM,CACT,eAAgB,OAChB,eAAgB,OAChB,aAAc,OACd,cAAe,QAIhB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAO1E,EAAoB2E,GAE5B,SAASC,EAAsBF,GAC9B,IAAI1E,EAAoB+C,EAAEyB,EAAKE,GAAM,CACpC,IAAIlE,EAAI,IAAIiB,MAAM,uBAAyBiD,EAAM,KAEjD,MADAlE,EAAEqE,KAAO,mBACHrE,EAEP,OAAOgE,EAAIE,GAEZD,EAAeK,KAAO,WACrB,OAAOhG,OAAOgG,KAAKN,IAEpBC,EAAe5D,QAAU+D,EACzBtE,EAAOD,QAAUoE,EACjBA,EAAeE,GAAK,Q,oGCzBpB,yBAAghB,EAAG,G,sDCAnhB,yBAAkhB,EAAG,G,oCCArhB,yBAAohB,EAAG,G,oCCAvhB,yBAA0hB,EAAG,G,+FCAzhBI,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,gBAAgB,IAC9IG,EAAkB,GCMP,GACbnD,KAAM,OCR2N,I,wBCQ/NoD,EAAY,eACd,EACAT,EACAQ,GACA,EACA,KACA,KACA,MAIa,EAAAC,E,oBCnBX,EAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,YAAY,CAACA,EAAG,cAAc,CAACK,YAAY,cAAcH,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,SAAS,QAAU,WAAW,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK,IAAI,GAAK,MAAM,CAACF,EAAG,SAAS,CAACK,YAAY,QAAQ,CAACL,EAAG,MAAM,CAACK,YAAY,SAAS,CAACL,EAAG,KAAK,CAACJ,EAAIU,GAAG,cAAcN,EAAG,KAAK,CAACJ,EAAIU,GAAG,qCAAuCV,EAAIW,OAAkTX,EAAIY,KAA9SR,EAAG,MAAM,CAACS,YAAY,CAAC,aAAa,QAAQ,CAACT,EAAG,KAAK,CAACJ,EAAIU,GAAG,gBAAgBN,EAAG,sBAAsB,CAACK,YAAY,YAAYH,MAAM,CAAC,MAAQ,EAAE,KAAO,IAAI,MAAQ,OAAO,cAAgB,MAAMF,EAAG,KAAK,CAACJ,EAAIU,GAAG,0BAA0BN,EAAG,KAAK,CAACJ,EAAIU,GAAG,6CAA6C,GAAcV,EAAIc,WAA8hDd,EAAIY,KAAthDR,EAAG,MAAM,CAACW,MAAM,CAACC,QAAShB,EAAIW,SAAS,CAACP,EAAG,MAAMJ,EAAIiB,GAAIjB,EAAkB,eAAE,SAASkB,EAAKC,GAAO,OAAOf,EAAG,MAAM,CAACxB,IAAIuC,EAAMb,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACK,YAAY,gBAAgBW,MAAM,CAAE,mBAAoBF,EAAKG,gBAAiBC,MAAOJ,EAAKK,WAAYC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI0B,OAAOR,EAAKS,aAAa,CAAET,EAAU,MAAEd,EAAG,MAAM,CAACK,YAAY,cAAcH,MAAM,CAAC,MAAQ,KAAK,IAAM,UAAQ,KAAcY,EAAKU,UAAUxB,EAAG,IAAI,CAACK,YAAY,cAAcM,MAAMG,EAAKW,KAAKT,MAAM,CAAEE,MAAOJ,EAAKY,aAAc1B,EAAG,MAAM,CAACJ,EAAIU,GAAG,gBAAgBV,EAAI+B,GAAGb,EAAK9D,eAAe,GAAGgD,EAAG,MAAM,CAACK,YAAY,UAAU,CAACL,EAAG,OAAO,CAACJ,EAAIU,GAAG,UAAUN,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,YAAY,cAAc,CAACL,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACJ,EAAIU,GAAG,WAAWN,EAAG,QAAQ,CAAC4B,WAAW,CAAC,CAAC5E,KAAK,QAAQ6E,QAAQ,UAAU3D,MAAO0B,EAAS,MAAEkC,WAAW,UAAU5B,MAAM,CAAC,KAAO,OAAO,MAAQ,UAAU6B,SAAS,CAAC,MAASnC,EAAS,OAAGwB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOvE,OAAOkF,YAAqBpC,EAAIqC,MAAMZ,EAAOvE,OAAOoB,aAAY8B,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACJ,EAAIU,GAAG,cAAcN,EAAG,QAAQ,CAAC4B,WAAW,CAAC,CAAC5E,KAAK,QAAQ6E,QAAQ,UAAU3D,MAAO0B,EAAY,SAAEkC,WAAW,aAAa5B,MAAM,CAAC,KAAO,WAAW,MAAQ,aAAa6B,SAAS,CAAC,MAASnC,EAAY,UAAGwB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOvE,OAAOkF,YAAqBpC,EAAIsC,SAASb,EAAOvE,OAAOoB,eAAc8B,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,YAAY,QAAQ,CAACL,EAAG,QAAQ,CAACK,YAAY,gBAAgBe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI0B,YAAY,CAAC1B,EAAIU,GAAG,uEAAuE,YAAqB,IAAI,IAAI,IAAI,IAAI,IAC7zE,EAAkB,G,sBCGb,UAAc6B,kBACb,UAAcC,mBAGjB,SAASC,EAAeC,GAC7B,MAAO,CACLC,IAAKD,EAAaC,IAClBvF,KAAMsF,EAAaE,YACnBP,MAAOK,EAAaL,MACpBQ,MAAOH,EAAaI,SACpBC,MAAOL,EAAaM,SAASC,iBAAmBP,EAAaM,SAASE,cAcnE,SAASC,IACd,OAAO,YAAgBA,UAGlB,SAASC,IACd,IAAIC,EAAc,YAAgBA,YAClC,OAAIA,EACKZ,EAAcY,GAEhB,KAGF,SAASC,EAAiBC,GAC/B,OAAO,YAAgBC,mBAAmBC,IACxC,IAAIC,EAAW,KACXD,IACFC,EAAWjB,EAAcgB,IAE3BF,EAASG,KAIN,SAASC,EAAcJ,GAC5B,OAAOD,EAAgBC,GC2BV,OACblK,KAAM,KAAM,CACVgJ,MAAO,KACPC,SAAU,KACVxB,YAAY,EACZ2C,KAAM,KACN9C,QAAQ,EACRiD,eAAgB,CACd,CACExG,KAAM,SACNwE,MAAO,aACPE,UAAW,UACXT,gBAAiB,UACjBE,UAAW,OACXI,SAAU,IAAI,UAAca,oBAE9B,CACEpF,KAAM,WACNyE,KAAM,kBACNN,UAAW,OACXF,gBAAiB,UACjBM,SAAU,IAAI,UAAckC,yBAIlC,UACE,GAAkC,YAA9B5D,KAAK6D,OAAOC,OAAOC,OACrB7E,QAAQ8E,IAAI,WACZd,IACAlD,KAAKa,YAAa,EAClBb,KAAKU,QAAS,MACT,CACL,IAAIuD,EAAcjE,KAAK6D,OAAOK,MAAMC,UAAY,IAChD,YAAgBC,oBAAoBC,KAAK5J,IACvCuF,KAAKwD,KAAO/I,EAAO+I,KACfxD,KAAKwD,MACPxD,KAAKa,YAAa,EAClBb,KAAKsE,QAAQpK,KAAK,CAACqK,KAAMN,MAEzBjE,KAAKa,YAAa,EAClBb,KAAKU,QAAS,KAEf8D,MAAMjI,IAEP2C,QAAQ8E,IAAIzH,OAIlBkI,QAAS,CACP,OAAQ/C,QACWrE,IAAbqE,EACE1B,KAAKoC,OAASpC,KAAKqC,SACrB,YAAgBqC,2BAA2B1E,KAAKoC,MAAOpC,KAAKqC,UAAUmC,MAAMjI,IAC1E2C,QAAQ8E,IAAIzH,KAGdP,SAAS2I,iBAAiB,SAASC,QAAQC,IACzCA,EAAI1D,MAAM2D,OAAS,kBAIvB,YAAgBC,mBAAmBrD,MC3IsM,I,iICQ7O,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAiB,QAYhC,IAAkB,EAAW,CAACsD,OAAA,KAAKC,OAAA,KAAKC,QAAA,KAAMC,OAAA,KAAKC,aAAA,KAAWC,WAAA,KAASC,oBAAA,KAAkBC,OAAA,OC/BzF,IAAI,EAAS,WAAa,IAAIxF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,mBAAmB,CAACE,MAAM,CAAC,WAAY,KAAQF,EAAG,YAAY,CAACA,EAAG,UAAUA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,YAAY,GAAG,iBAAiB,GAAG,OAAO,KAAK,CAACF,EAAG,SAAS,CAACK,YAAY,OAAOH,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,SAAS,CAACK,YAAY,OAAOH,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIyF,MAAM,aAAa,CAACrF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,WAAW,CAACN,EAAIU,GAAG,iBAAiB,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,aAAa,CAACN,EAAIU,GAAG,mBAAmB,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,wBAAwB,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,uBAAuB,IAAI,GAAGN,EAAG,eAAe,CAACJ,EAAIU,GAAG,mBAAmBV,EAAI+B,GAAG/B,EAAI0F,WAAWtI,MAAM,oBAAoBgD,EAAG,cAAc,CAACK,YAAY,aAAa,CAACT,EAAIU,GAAG,mBAAmBV,EAAI+B,GAAG/B,EAAI0F,WAAWC,aAAa,qBAAqB,GAAGvF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAeJ,EAAIiB,GAAIjB,EAAY,SAAE,SAAS4F,EAAQzE,GAAO,OAAOf,EAAG,SAAS,CAACxB,IAAIuC,EAAMV,YAAY,QAAQ,CAACL,EAAG,cAAc,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQsF,EAAQC,KAAK,MAAQD,EAAQC,MAAMC,MAAM,CAACxH,MAAO0B,EAAoB,iBAAEuD,SAAS,SAAUwC,GAAM/F,EAAIgG,iBAAiBD,GAAK7D,WAAW,uBAAuB,IAAI,KAAK,IAAI,IAAI,GAAG9B,EAAG,SAAS,CAACK,YAAY,OAAOH,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,WAAWkB,GAAG,CAAC,MAAQxB,EAAIiG,iBAAiB,CAAC7F,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,eAAe,CAACN,EAAIU,GAAG,cAAcV,EAAIU,GAAG,4BAA4B,GAAGN,EAAG,YAAYA,EAAG,eAAe,CAACE,MAAM,CAAC,cAAc,GAAG,eAAe,GAAG,MAAQ,SAAS,cAAc,iBAAiB,GAAGF,EAAG,cAAc,CAAC8F,IAAI,gBAAgB9F,EAAG,YAAY,CAAC8F,IAAI,YAAY1E,GAAG,CAAC,UAAYxB,EAAImG,cAAc,GAAG/F,EAAG,SAAS,CAACK,YAAY,OAAOH,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,mBAAmB,SAAS,CAACF,EAAG,QAAQ,CAACK,YAAY,OAAOH,MAAM,CAAC,GAAK,eAAekB,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIoG,UAAU,gBAAgB,CAACpG,EAAIU,GAAG,gBAAgBN,EAAG,QAAQ,CAACK,YAAY,OAAOH,MAAM,CAAC,GAAK,YAAYkB,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIoG,UAAU,aAAa,CAACpG,EAAIU,GAAG,cAAc,GAAGV,EAAIiB,GAAIjB,EAAc,WAAE,SAASqG,EAAUlF,GAAO,OAAOf,EAAG,MAAM,CAACxB,IAAIuC,EAAMV,YAAY,YAAY,CAACL,EAAG,MAAM,CAACJ,EAAIU,GAAGV,EAAI+B,GAAGsE,EAAUC,QAAQ,OAAOlG,EAAG,OAAO,CAACJ,EAAIU,GAAG,IAAIV,EAAI+B,GAAGsE,EAAUE,WAAW,6BAA6B,IAAI,IAAI,IAAI,IAAI,IACrnF,EAAkB,GCDlB,EAAS,WAAa,IAAIvG,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACK,YAAY,aAAaH,MAAM,CAAC,IAAM,GAAG,eAAe,GAAG,KAAO,KAAK,CAACF,EAAG,qBAAqB,CAACoB,GAAG,CAAC,MAAQxB,EAAIwG,gBAAgBpG,EAAG,kBAAkB,CAACJ,EAAIU,GAAG,cAAcN,EAAG,WAAW,CAACS,YAAY,CAAC,cAAc,OAAOP,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIU,GAAG,UAAUN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIU,GAAG,cAAc,GAAGN,EAAG,YAAYA,EAAG,aAAa,IACre,EAAkB,GCDlB,EAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAASF,EAAIyG,SAA6FrG,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,IAAIoG,YAAY1G,EAAI2G,GAAG,CAAC,CAAC/H,IAAI,YAAYgI,GAAG,SAASV,GACvR,IAAI1E,EAAK0E,EAAI1E,GACb,MAAO,CAACpB,EAAG,QAAQJ,EAAI6G,GAAG,CAACvG,MAAM,CAAC,MAAQ,GAAG,KAAO,KAAKkB,GAAI,CAAGxB,EAAIyG,SAAS5D,MAA6H7C,EAAIY,KAA1HR,EAAG,SAAS,CAACxB,IAAI,OAAO0B,MAAM,CAAC,MAAQ,GAAG,MAAQ,kBAAkB,CAACN,EAAIU,GAAG,0CAAmDN,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,SAAS,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMN,EAAIyG,SAAS5D,YAAY,SAAS,CAACzC,EAAG,SAAS,CAACA,EAAG,cAAc,CAACJ,EAAIU,GAAGV,EAAI+B,GAAG/B,EAAIyG,SAASpE,UAAUjC,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,sBAAsB,CAACF,EAAG,oBAAoB,CAACJ,EAAIU,GAAG,qBAAqB,GAAGN,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,mBAAmB,CAACF,EAAG,oBAAoB,CAACJ,EAAIU,GAAG,eAAe,GAAGN,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,oBAAoB,CAACJ,EAAIU,GAAG,WAAW,GAAGN,EAAG,cAAc,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACF,EAAG,oBAAoB,CAACJ,EAAIU,GAAG,eAAe,IAAI,IAAI,GAFppBN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,GAAG,GAAK,iBAAiB,CAACN,EAAIU,GAAG,cAGlL,EAAkB,GC+BP,GACbtD,KAAM,WACN,OACE,MAAO,CACLqJ,SAAUrD,OCtCiO,I,oFCO7O,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,IAAiB,QAYhC,IAAkB,EAAW,CAAC0D,UAAA,KAAQ5B,OAAA,KAAK6B,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUC,eAAA,OAAeC,QAAA,KAAMC,aAAA,OCbvE,OACbhK,KAAM,SACNiK,WAAY,CACVC,YAEF,OACE,MAAO,CACL7D,KAAM,OAGViB,QAAS,CACP,eACEzE,KAAKsH,OAAOC,OAAO,6BC7BsN,I,4ECQ3O,GAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,MAAiB,QAUhC,IAAkB,GAAW,CAACC,UAAA,KAAQC,iBAAA,KAAexC,OAAA,KAAKyC,WAAA,KAAQC,WAAA,KAAQC,cAAAC,GAAA,OC7B1E,IAAI,GAAS,WAAa,IAAI9H,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,sBAAsB,CAACE,MAAM,CAAC,IAAM,GAAG,UAAYN,EAAI+H,YAAY,MAAQ,GAAG,QAAU,IAAIjC,MAAM,CAACxH,MAAO0B,EAAU,OAAEuD,SAAS,SAAUwC,GAAM/F,EAAIgI,OAAOjC,GAAK7D,WAAW,WAAW,CAAC9B,EAAG,qBAAqB,IAC7S,GAAkB,GCDlB,GAAS,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACA,EAAG,oBAAoB,CAACE,MAAM,CAAC,MAAQ,WAAWwF,MAAM,CAACxH,MAAO0B,EAAY,SAAEuD,SAAS,SAAUwC,GAAM/F,EAAIiI,SAASlC,GAAK7D,WAAW,aAAalC,EAAIiB,GAAIjB,EAAW,QAAE,SAASkI,EAAOvO,GAAG,OAAOyG,EAAG,cAAc,CAACxB,IAAIjF,EAAE6H,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAImI,iBAAiBxO,MAAM,CAACyG,EAAG,qBAAqB,CAACA,EAAG,SAAS,CAACJ,EAAIU,GAAG,eAAeV,EAAI+B,GAAGmG,EAAOrG,MAAM,iBAAiB,GAAGzB,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAAC+B,SAAS,CAAC,YAAcnC,EAAI+B,GAAGmG,EAAOE,UAAU,IAAI,KAAK,IAAI,IACplB,GAAkB,GCkBP,IACbhL,KAAM,mBACN,OACE,MAAO,CACLiL,QAAQ,EACRJ,SAAU,EACVK,QAAS,CACP,CAAEF,KAAM,kBAAmBvG,KAAM,YACjC,CAAEuG,KAAM,iBAAkBvG,KAAM,YAChC,CAAEuG,KAAM,iBAAkBvG,KAAM,wBAChC,CAAEuG,KAAM,UAAWvG,KAAM,mBAI/B6C,QAAS,CACP,iBAAkBvD,GAChBlB,KAAKgI,SAAW9G,EAChBlB,KAAKsI,KAAKC,KAAKvI,KAAKgI,aCpC+N,M,sCCQrP,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,MAAiB,QAWhC,IAAkB,GAAW,CAAClB,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUwB,mBAAA,KAAgBC,iBAAA,OAAiBC,kBAAA,KAAezB,eAAA,SChBrF,QACb9J,KAAM,mBACNiK,WAAY,CACVuB,qBAEFC,MAAO,CACLC,UAAWC,QACXC,WAAYD,SAEd,OACE,MAAO,CACLf,OAAQ/H,KAAK+I,aAGjBC,SAAU,CACRlB,YAAa,WACX,OAAO9H,KAAK6I,YAGhB,UACE7I,KAAKsH,OAAO2B,UAAU,CAACC,EAAUC,KAC/B,OAAOD,EAASnM,MACd,IAAK,yBACHiD,KAAK+H,OAASoB,EAAMC,iBACpB,WCtC+O,M,aCOrP,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,MAAiB,QAKhC,IAAkB,GAAW,CAACC,qBAAA,OCvB9B,IAAI,GAAS,WAAa,IAAItJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,KAAK,CAACN,EAAIiB,GAAIjB,EAAU,OAAE,SAASuJ,EAAMpI,GAAO,MAAO,CAACf,EAAG,cAAc,CAACxB,IAAI2K,EAAMC,MAAM3I,YAAY,CAAC,OAAS,WAAWP,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,MAAM,CAACK,YAAY,cAAc,CAACL,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,GAAG,MAAQ,UAAU,MAAQ,aAAa,CAACN,EAAIU,GAAG,eAAe,GAAGN,EAAG,sBAAsB,CAACoB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAImG,UAAUoD,EAAM5J,OAAO,CAACS,EAAG,oBAAoB,CAACA,EAAG,OAAO,CAACK,YAAY,MAAMW,MAAO,qBAAuBmI,EAAMjI,QAAStB,EAAIU,GAAG,iBAAiBV,EAAI+B,GAAGwH,EAAMC,OAAO,kBAAkBpJ,EAAG,uBAAuB,CAACK,YAAY,iBAAiB,CAACT,EAAIU,GAAG,iBAAiBV,EAAI+B,GAAGwH,EAAME,MAAM,kBAAkBzJ,EAAI+B,GAAG/B,EAAI0J,gBAAgBH,EAAMI,UAAU,mBAAmB,GAAIJ,EAAoB,eAAEnJ,EAAG,qBAAqB,CAACA,EAAG,sBAAsB,CAACE,MAAM,CAAC,QAAU,GAAG,KAAO,GAAG,MAAQ,EAAE,MAAQiJ,EAAMK,eAAe,MAAQ,SAAS,CAAC5J,EAAIU,GAAG,iBAAiBV,EAAI+B,GAAGwH,EAAMK,gBAAgB,mBAAmB,GAAG5J,EAAIY,KAAKR,EAAG,MAAM,CAACK,YAAY,eAAe,CAACT,EAAIiB,GAAIjB,EAAW,QAAE,SAASgE,EAAO6F,GAAI,MAAO,CAAE7F,EAAY,MAAE5D,EAAG,SAAS,CAACxB,IAAIiL,EAAGvJ,MAAM,CAAC,MAAQ0D,EAAOA,QAAQxC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI8J,YAAY3I,MAAU,CAACnB,EAAIU,GAAGV,EAAI+B,GAAGiC,EAAOnC,SAAS7B,EAAIY,SAAS,IAAI,GAAIO,EAAQ,EAAInB,EAAI+J,OAAOlQ,OAAQuG,EAAG,YAAY,CAACxB,IAAIuC,IAAQnB,EAAIY,SAAS,IAAI,IACx7C,GAAkB,GC+DP,IACbxD,KAAM,YACN,OACE,MAAO,CACL2M,OAAQ,GACRC,mBAAoB,GACpBC,QAAS,CACP,CAACpI,KAAM,YAAamC,OAAQ,QAAS1C,MAAO,QAAS4I,OAAO,GAC5D,CAACrI,KAAM,aAAcmC,OAAQ,OAAQ1C,MAAO,SAAU4I,OAAO,GAC7D,CAACrI,KAAM,aAAcmC,OAAQ,SAAU1C,MAAO,MAAO4I,OAAO,IAE9D5L,MAAO,KAGXoG,QAAS,CACP,SAAU6E,GACRA,EAAMK,eAAiB,EACvB3J,KAAK8J,OAAO5P,KAAKoP,GACjBA,EAAMY,WAAW3I,GAAG,gBAAiB4I,IACnC,IAAIC,EAAYD,EAASE,iBAAmBF,EAASG,WAAc,IACnEhB,EAAMK,eAAiBS,EAASG,YAAY,MAIhD,QACEvK,KAAK8J,OAAS,IAGhB,UAAW5I,GACTlB,KAAKwF,MAAM,YAAatE,IAG1B,YAAasJ,GACX,IAAIlB,EAAQtJ,KAAK8J,OAAOW,KAAKtP,GAAKA,EAAEuE,KAAO8K,EAAa9K,IACxD7F,OAAOgG,KAAK2K,GAAc5F,QAAQ2D,IAC5Be,EAAMvP,eAAewO,IAAkB,OAATA,IAChCe,EAAMf,GAAQiC,EAAajC,OAKjC,cAAerH,GACbhC,QAAQ8E,IAAIhE,KAAK8J,OAAO5I,GAAOxB,IAC/B,IAAI4J,EAAQtJ,KAAK8J,OAAO5I,GACxBlB,KAAKwF,MAAM,gBAAiB8D,GAC5BtJ,KAAKwF,MAAM,YAAatE,IAG1B,gBAAiBwI,GACf,GAAIgB,MAAMC,QAAQjB,GAChB,OAAOA,EAAQnK,IAAIqL,GAAUA,EAAOC,MAAQ,IAAMD,EAAOE,QAAQC,KAAK,OAI1E,YAAahH,EAAQ7C,GACJ,SAAX6C,EACF/D,KAAKgL,cAAc9J,GACC,WAAX6C,IACT/D,KAAK8J,OAAOhP,OAAOoG,EAAO,GAC1BlB,KAAKwF,MAAM,2BAA4BxF,KAAK8J,OAAOvK,IAAIpE,GAAKA,EAAEuE,SC3H4K,M,yBCQ9O,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,MAAiB,QAchC,IAAkB,GAAW,CAACwF,QAAA,KAAM+F,YAAA,KAASnE,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUwB,mBAAA,KAAgBC,iBAAA,OAAiByC,kBAAA,OAAkBjE,eAAA,OAAe3B,oBAAA,OCjCrI,IAAI,GAAS,WAAa,IAAIvF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACJ,EAAIU,GAAG,kCAAkCN,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,GAAG,QAAU,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIoL,kBAAkB,CAACpL,EAAIU,GAAG,8BAA8BN,EAAG,YAAYA,EAAG,eAAe,CAACE,MAAM,CAAC,cAAc,SAAS,MAAQ,SAAS,cAAc,GAAG,eAAe,IAAIwF,MAAM,CAACxH,MAAO0B,EAAU,OAAEuD,SAAS,SAAUwC,GAAM/F,EAAIqL,OAAOtF,GAAK7D,WAAW,aAAa,GAAG9B,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIsL,QAAQ,MAAQtL,EAAIuL,WAAW,OAASvL,EAAIqL,OAAO,sBAAsB,CAAC,GAAI,GAAI,GAAI,KAAK3E,YAAY1G,EAAI2G,GAAG,CAAC,CAAC/H,IAAI,QAAQgI,GAAG,SAASiC,GAAO,MAAO,CAACzI,EAAG,KAAK,CAACK,YAAY,aAAaI,YAAY,CAAC,aAAa,QAAQW,GAAG,CAAC,WAAa,SAASC,GAAQzB,EAAIwL,QAAU3C,EAAM4C,KAAK9L,MAAM,CAACK,EAAIU,GAAGV,EAAI+B,GAAG8G,EAAM4C,KAAKjC,OAAO,KAAMX,EAAM4C,KAAU,MAAErL,EAAG,OAAO,CAACK,YAAY,WAAW,CAACT,EAAIU,GAAG,IAAIV,EAAI+B,GAAG8G,EAAM4C,KAAKC,OAAO,OAAO1L,EAAIY,KAAMiI,EAAM4C,KAAK9L,IAAMK,EAAIwL,QAASpL,EAAG,SAAS,CAACoB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI2L,cAAc9C,EAAM4C,KAAK9L,OAAO,CAACK,EAAIU,GAAG,UAAUV,EAAIY,MAAM,GAAGR,EAAG,KAAK,CAACK,YAAY,iBAAiB,CAACT,EAAIU,GAAGV,EAAI+B,GAAG8G,EAAM4C,KAAKhC,OAAOrJ,EAAG,QAAQA,EAAG,KAAK,CAACK,YAAY,iBAAiB,CAACT,EAAIU,GAAGV,EAAI+B,GAAG/B,EAAI0J,gBAAgBb,EAAM4C,KAAKG,eAAexL,EAAG,QAAQA,EAAG,KAAK,CAACK,YAAY,iBAAiB,CAACT,EAAIU,GAAGV,EAAI+B,GAAG8G,EAAM4C,KAAKI,uBAAuB,CAACzL,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,aAAa,OAAQ,EAAK,MAAQ,QAAQ,KAAO,WAAWwL,KAAK,cAAc,CAAC9L,EAAIU,GAAG,8BAA+BV,EAAI+B,GAAG/B,EAAIqL,QAAQ,kCAAmC,IAAI,GAAGjL,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,OAAOwF,MAAM,CAACxH,MAAO0B,EAAU,OAAEuD,SAAS,SAAUwC,GAAM/F,EAAIqI,OAAOtC,GAAK7D,WAAW,WAAW,CAAC9B,EAAG,SAAS,CAACA,EAAG,eAAe,CAACK,YAAY,YAAY,CAACT,EAAIU,GAAG,2BAA2BN,EAAG,cAAc,CAACJ,EAAIU,GAAG,aAAaV,EAAI+B,GAAG/B,EAAI+L,kBAAkBzF,QAAQ,cAAclG,EAAG,cAAc,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,KAAK,QAAU,IAAIwF,MAAM,CAACxH,MAAO0B,EAAiB,cAAEuD,SAAS,SAAUwC,GAAM/F,EAAIgM,cAAcjG,GAAK7D,WAAW,oBAAoB,GAAG9B,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,iBAAiB,KAAO,QAAQkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIiM,iBAAiB,CAACjM,EAAIU,GAAG,gCAAgCN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,QAAQkB,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIqI,QAAS,KAAS,CAACrI,EAAIU,GAAG,mCAAmC,IAAI,IAAI,IAAI,IAC/7E,GAAkB,GCwEP,IACbtD,KAAM,QACN,OACE,MAAO,CACLiO,OAAQ,GACRhD,QAAQ,EACRmD,QAAS,KACTO,kBAAmB,GACnBR,WAAY,GACZS,cAAe,GACfV,QAAS,CACP,CAAElD,KAAM,QAAS9J,MAAO,QAAS4N,UAAU,GAC3C,CAAE9D,KAAM,OAAQ9J,MAAO,QACvB,CAAE8J,KAAM,UAAW9J,MAAO,eAC1B,CAAE8J,KAAM,WAAY9J,MAAO,mBAIjCoG,QAAS,CACP,OAAQyH,GACNlM,KAAKsL,WAAaY,GAEpB,OAAQC,GACN,IAAIC,EAAWpM,KAAKsL,WAAW/L,IAAIrB,GAAKA,EAAEwB,IAC1C,IAAuC,IAAnC0M,EAASC,QAAQF,EAASzM,IAC5BM,KAAKsL,WAAWpR,KAAKiS,OAChB,CACL,IAAI7C,EAAQtJ,KAAKsL,WAAWb,KAAKtP,GAAKA,EAAEuE,KAAOyM,EAASzM,IACxD4J,EAAMsC,cAAgB,IAG1B,UAAWrC,GACT,OAAQA,EAAM3P,OAAS,GAAM2P,EAAMjK,MAAM,EAAG,IAAM,OAASiK,GAE7D,gBAAiBG,GACf,GAAIgB,MAAMC,QAAQjB,GAChB,OAAOA,EAAQqB,KAAK,OAGxB,cAAeuB,GACbpN,QAAQ8E,IAAIsI,GACZtM,KAAK8L,kBAAoB9L,KAAKsL,WAAWb,KAAKxE,GAAOA,EAAIvG,KAAO4M,GAChEtM,KAAKoI,QAAUpI,KAAKoI,OACpBpI,KAAK+L,cAAgB/L,KAAKuM,eAE5B,YAAaC,EAAaC,GAAgB,GACxC,IAAIxG,EAAMuG,GAAexM,KAAK8L,kBAC9B,IAAK7F,EAAIsD,MAAO,OAChB,IAAImD,EAAU,CACZnD,MAAOtD,EAAIsD,MACXoC,YAAa1F,EAAI0F,YAAYZ,KAAK,MAClCU,MAAOxF,EAAIwF,MACXjC,KAAMvD,EAAIuD,KACVmD,UAAW1G,EAAI0G,UACfC,MAAO3G,EAAI2G,MACXC,OAAQ5G,EAAI4G,OACZC,MAAO7G,EAAI6G,OAKb,OAHIL,IACFC,EAAQrG,OAASJ,EAAII,QAEhB0G,KAAKC,UAAUN,EAAS,KAAM,IAEvC,cACE,IAAIO,EAASF,KAAKG,MAAMlN,KAAK+L,eAC7BkB,EAAOtB,YAAcsB,EAAOtB,YAAYwB,MAAM,KAAK5N,IAAI6N,GAAKA,EAAEC,QAC9DrN,KAAK8L,kBAAoBjS,OAAOyT,OAAOtN,KAAK8L,kBAAmBmB,GAC/DjN,KAAKoI,QAAS,EACdpI,KAAKwF,MAAM,cAAexF,KAAK8L,oBAEjC,eACE,IAAI3D,EAAOnI,KAAKsL,WAAW/L,IAAI0G,GAAOjG,KAAKuM,YAAYtG,GAAK,IAC5DkC,EAAO,IAAMA,EAAK4C,KAAK,MAAQ,IAC/B,IAAIwC,EAAUvR,SAASC,cAAc,KACrCsR,EAAQlR,aAAa,OAAQ,iCAAmCmR,mBAAmBrF,IACnFoF,EAAQlR,aAAa,WAAY,mBACjCkR,EAAQpM,MAAMsM,QAAU,OACxBzR,SAAS0R,KAAKlQ,YAAY+P,GAC1BA,EAAQI,QACR3R,SAAS0R,KAAKE,YAAYL,MCxJgN,M,2FCO5O,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,MAAiB,QAiBhC,IAAkB,GAAW,CAACM,UAAA,KAAO5I,OAAA,KAAKC,QAAA,KAAM4I,aAAA,QAAaC,UAAA,QAAUC,WAAA,QAAWC,cAAA,KAAWC,WAAA,KAAQC,SAAA,KAAMrH,QAAA,KAAMa,WAAA,KAAQyG,cAAA,KAAWC,aAAA,OChC7H,MAAMC,GAAU,CACrB,WACE,IAAI9K,EAAOL,IACX,OAAO,iBAAqBsC,WAAW,SAAS8I,IAAI/K,EAAKd,KAAK8L,IAAIhL,IAGpE,iBACE,OAAO,IAAI7H,QAAQ,CAACC,EAASC,KAC3B4S,GAAYC,OAAOrK,KAAKsK,IACtB/S,EAAQ+S,EAAcC,KAAKrP,IAAIsP,IAAgB,CAC7CnP,GAAImP,EAAanP,MACdmP,EAAazV,aAEjBoL,MAAMjI,IACPV,EAAOU,SAMFkS,GAAc,CACzB,IAAKhJ,GACH,MAAMjC,EAAOL,IACb,OAAO,iBAAqBsC,WAAW,eAAeqJ,IAAI,IACrDrJ,EACHsJ,MAAOvL,EAAKd,OAIhB,IAAKsM,GACH,OAAO,iBAAqBT,mBAAmBS,KAAgB/Q,MAAMoG,KAAK8F,IACxE,GAAIA,EAAS8E,OACX,OAAO9E,EAAS/Q,OAElB,MAAM,IAAIoD,UAAUwS,mCAIxB,OACE,MAAMxL,EAAOL,IACb,OAAO,iBAAqBsC,WAAW,eACpCyJ,MAAM,QAAS,KAAM1L,EAAKd,KAAKzE,OAGpCkR,SAAU,CACR,IAAKH,EAAcI,GACZ1E,MAAMC,QAAQyE,IAAiC,kBAAbA,IACrCA,EAAW,CAACA,IAEd,IAAIC,EAAgB,iBAAqB5J,WAAW,eAAe8I,IAAIS,GACvEI,EAASxK,QAAQ0K,IACf,IAAKA,EAAQ5P,GAAI,OACjB,IAAI6P,EAASF,EAAc5J,WAAW,YAAY8I,IAAIe,EAAQ5P,IAC9D6P,EAAOtR,MAAMoG,KAAKmL,IAChB,GAAIA,EAAYP,OAAQ,CAEtB,IAAIQ,EAAO,GACX,IAAK,MAAO9Q,EAAKN,KAAUxE,OAAO6V,QAAQF,EAAYpW,QAChDkW,EAAQ3Q,KAASN,IACnBoR,EAAK9Q,GAAON,GAGhBkR,EAAOI,OAAOF,QAEdF,EAAOf,IAAIc,QAMnB,KAAMN,GACJ,OAAO,IAAIrT,QAAQ,CAACC,EAASC,KAC3B,iBAAqB4J,WAAW,eAAe8I,IAAIS,GAAcvJ,WAAW,YAAYxH,MACrFoG,KAAK8F,IACJ,IAAIyF,EAAM,GACVzF,EAASvF,QAAQ5J,IACf4U,EAAI1V,KAAKc,EAAE5B,UAEbwC,EAAQgU,KACPpL,MAAMjI,IACPV,EAAOU,UCnFnB,IAAI,GAAS,WAAa,IAAIwD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAAC8F,IAAI,aAAarF,YAAY,CAAC,QAAU,QAAQP,MAAM,CAAC,KAAO,OAAO,SAAW,IAAIkB,GAAG,CAAC,OAASxB,EAAI8P,cAC7M,GAAkB,G,gDCCP,MAAM,GACnB,YAAaC,GAET9P,KAAKkN,MADQ,QAAX4C,EACW9P,KAAK+P,cACE,aAAXD,EACI9P,KAAKgQ,YAELhQ,KAAKiQ,YAItB,gBAAiBC,GAEf,IAAIC,EAAW,GACXC,EAAmB,CACrB,IAAIC,OAAO,aACX,IAAIA,OAAO,iBAETC,EAAe,KACfC,EAAiB,GAwCrB,OAvCAL,EAAWtL,QAAQ4L,IACjB,GAAqB,OAAjBF,EACF,IAAK,IAAI5W,EAAI,EAAGA,EAAI0W,EAAiBxW,OAAQF,IAAK,CAChD,IAAI+W,EAAUL,EAAiB1W,GAC/B,GAAI8W,EAAQE,MAAMD,GAAU,CAC1BH,EAAeG,EACf,WAGC,CACL,IAAIC,EAAQF,EAAQE,MAAMJ,GAC1B,GAAII,EACEA,EAAM,GAAGA,MAAM,UAAyB,WAAbA,EAAM,GAC/BC,OAAOD,EAAM,MAAQP,EAASvW,OAAS,IACzCuW,EAASjW,KAAKqW,GACdA,EAAiBC,EAAQI,QAAQN,EAAc,MAGjDH,EAASjW,KAAKqW,EAAelD,QAC7BkD,EAAiB,QAEd,CACL,IAAIM,EAAWN,EAAejR,OAAO,GACpB,MAAbuR,GAAiC,MAAbA,GACL,MAAbA,IACFN,EAAiBA,EAAejR,MAAM,GAAI,IAE5CiR,GAAkBC,GAElBD,GAAkB,IAAMC,MAM5BL,EAASA,EAASvW,OAAS,GAAGA,OAAS,MACzCuW,EAASA,EAASvW,OAAS,GAAKuW,EAASA,EAASvW,OAAS,GAAG0F,MAAM,EAAG,MAGlE6Q,EAUT,YAAaD,GACX,IAAIC,EAAWnQ,KAAK8Q,gBAAgBZ,GAChCa,EAAWZ,EAAS5Q,IAAIyR,GAAM,IAAOA,EAAK,KAAMjG,KAAK,KACzD,OAAO,IAAIpP,QAAQ,CAACC,EAASC,KAC3B,KAAM,sBAAwB2R,mBAAmBuD,IAAW1M,KAAKuL,IAC/D1Q,QAAQ8E,IAAI+I,KAAKG,MAAM0C,EAAIxW,OAC3BwC,EAAQ,CAACqV,IAAKd,EAAUe,OAAQnE,KAAKG,MAAM0C,EAAIxW,UAC9CoL,MAAMvF,IACPpD,EAAOoD,OAKb,kBC7Ea,MAAM,GACnB,YAAakS,GACXnR,KAAKoR,IAAM,KACXpR,KAAKmR,OAASA,EACdnR,KAAKqR,UAAY,IAAI,GACrBrR,KAAK4M,MAAQ,GAGf,aACE,OAAiB,OAAb5M,KAAKoR,UACM,KAASE,YAAY,CAACC,IAAKvR,KAAKmR,SAASzV,cAEzCsE,KAAKoR,IAQtB,UACE,OAAOpR,KAAKwR,OAAOnN,KAAM+M,IACvB,OAAOA,EAAIK,gBACVpN,KAAMqN,IACP,IAAInJ,EAAOmJ,EAAGnJ,KACViB,EAAQjB,EAAiB,aAAIA,EAAKoJ,aAAarS,MAAM,EAAG,GAAK,UAC7DoK,IAAWnB,EAAW,QAAIA,EAAKqJ,OAAOhB,QAAQ,MAAO,KAAKzD,MAAM,KAChE5D,KAAShB,EAAKsJ,OAAStJ,EAAKsJ,MAAMjY,OAAS,KAAM2O,EAAKsJ,MAC1D,OAAInI,GAAWH,EACNvJ,KAAK8R,UAAU,CAACtI,OAAME,UAASH,UAE/BvJ,KAAK8R,UAAU,CAACtI,WAK7B,QAASuI,GACP,OAAO,IAAIpW,QAAQ,CAACC,EAASC,KACvBmE,KAAK4M,MAAMmF,GACbnW,EAAQoE,KAAK4M,MAAMmF,IAEnB/R,KAAKwR,OAAOnN,KAAM+M,IAChBA,EAAIY,QAAQD,GAAY1N,KAAK4N,IAC3BjS,KAAK4M,MAAMmF,GAAcE,EACzBrW,EAAQqW,OAETzN,MAAMjI,IACPV,EAAOU,OASf,UAAWgM,GACT,OAAOvI,KAAKwR,OAAOnN,KAAM+M,IACvB,OAAOA,EAAIY,QAAQ,KAClB3N,KAAM8D,IACP,OAAOA,EAAK+J,mBACX7N,KAAM8N,IACP,IAAIC,EAAQD,EAAQC,MAChBC,EAAY,GACZC,EAAW,GACXC,EAAW,GACXC,GAAgB,EAChBC,GAAe,EACnB,IAAK,IAAI/Y,EAAI,EAAGA,EAAI0Y,EAAMxY,OAAQF,IAAK,CACrC,IAAI8R,EAAO4G,EAAM1Y,GACjB,GAAI8R,EAAKkH,IAAIhC,MAAM,iBACjB,MAEE+B,GAAgBjH,EAAKkH,IAAI9Y,OAAS,GACpC2Y,EAASrY,KAAKsR,EAAKkH,MAEjBlH,EAAKkH,IAAIhC,MAAM,gBAAkBlF,EAAKkH,IAAIhC,MAAM,qBAClD8B,GAAgB,EAChBC,GAAe,GAEbD,GACFF,EAASpY,KAAKsR,EAAKkH,KAEjBlH,EAAKkH,IAAIhC,MAAM,eACjB8B,GAAgB,GAKpB,GAFAF,EAAWA,EAASvH,KAAK,KAAK6F,QAAQ,OAAQ,KAC9C2B,EAAWA,EAASxH,KAAK,IACrBxC,EAAKgB,OAAShB,EAAKmB,QACrB2I,EAAYxY,OAAOyT,OAAO,GAAI/E,OACzB,CACL,MAAMoK,EAAmB,GACnBC,EAAkB,EAClBC,EAAiB,GACvB,IAAIC,EAAUV,EAAM9S,MAAM,EAAGuT,GAAgB5K,OAAQuD,GAASA,EAAKkH,IAAI9Y,OAAS+Y,GAC5EI,EAAcC,KAAKC,OAAOH,EAAQvT,IAAKiM,GAASA,EAAK0H,SACrDC,EAAgBf,EAAM9S,MAAM,EAAGuT,GAAgBtT,IAAKiM,GAASA,EAAK0H,QAAQ7G,QAAQ0G,GAClFxJ,EAAQ6I,EAAMe,GAAeT,IAC7BU,EAAiBD,EAAgB,EACjCzJ,EAAU0I,EAAMgB,GAAgBV,IAC/BhJ,EAAQ2J,SAAS,MAAS3J,EAAQ2J,SAAS,SAC9C9J,GAASG,EACT0J,IACA1J,EAAU0I,EAAMgB,GAAgBV,KAElC,MAAOhJ,EAAQ9P,OAASgZ,EACtBQ,IACA1J,EAAU0I,EAAMgB,GAAgBV,IAElChJ,EAAUA,EAAQkH,QAAQ,MAAO,KAAKzD,MAAM,KAC5CkF,EAAY,CAAC9I,QAAOG,WAKtB,OAHA2I,EAAUC,SAAWA,EACrBD,EAAUE,SAAWA,EACrBF,EAAU7I,KAAOjB,EAAKiB,KACf,IAAI7N,QAAQ,CAACC,EAASC,KAC3BD,EAAQyW,OASd,kBAAmBiB,GAEjB,IAAI7Y,EAAS6Y,EACb,IAAK,MAAOpS,EAAOsK,KAAS8H,EAAM5D,UAChC,GAA+B,cAA3BlE,EAAKkH,IAAIa,eAA4D,eAA3B/H,EAAKkH,IAAIa,eAAkC/H,EAAKkH,IAAIhC,MAAM,sBAAuB,CAC7HjW,EAAS6Y,EAAMhU,MAAM4B,EAAQ,GAC7B,MAGJ,OAAOzG,EAOT,YAAa+Y,GACX,OAAOA,EACJ5C,QAAQ,SAAU,IAClBA,QAAQ,KAAM,IACdA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACdA,QAAQ,IAAK,IAGlB,SAAU0C,GACR,OAAOA,EAAM/T,IAAKiM,GAASA,EAAKkH,IAAI9B,QAAQ,oBAAqB,WAOnE,gBACE,IAAIJ,EACJ,OAAOxQ,KAAKwR,OAAOnN,KAAM+M,IACvB,IAAIqC,GAAW,EACf,OAAOrC,EAAIY,QAAQZ,EAAIsC,UAAUrP,KAAM8D,IACrC,OAAOA,EAAK+J,mBACX7N,KAAM8D,IAGP,OAFAqI,EAAUxQ,KAAK2T,kBAAkBxL,EAAKiK,OACtCqB,EAAWjD,EAAQ5W,SAAWuO,EAAKiK,MAAMxY,OACrC6Z,EACK,IAAI9X,QAAQ,CAACC,EAASC,KAC3BD,EAAQ4U,KAIHY,EAAIY,QAAQZ,EAAIsC,SAAW,KAEnCrP,KAAM8D,IACP,IAAKsL,EAAU,OAAOtL,EAAK+J,mBAC1B7N,KAAM8D,IACP,IAAIyL,EAAc,GAMlB,OALKH,IACHG,EAAc5T,KAAK2T,kBAAkBxL,EAAKiK,OAC1C5B,EAAUoD,EAAYC,OAAOrD,IAG1BiD,GAAYG,EAAYha,SAAWuO,EAAKiK,MAAMxY,OAK1CoG,KAAKqR,UAAUrB,YAAYQ,EAAQjR,IAAIrB,GAAKA,EAAEwU,MAJ9C,IAAI/W,QAAQ,CAACC,EAASC,KAC3BD,QAKHyI,KAAMyP,IACP,OAAO,IAAInY,QAAQ,CAACC,EAASC,KAC3BD,EAAQkY,UCxMX,SAASC,GAAgB/E,EAAc1C,GAC5C,cAAe0C,KAAgB1C,QAG1B,SAAS0H,GAAehF,EAAc1C,EAAS2H,GACpD,OAAO,eAAmBhO,MACvBiO,MAAMH,GAAe/E,EAAc1C,IACnC6H,IAAIF,GAGF,SAASG,GAAepF,EAAc1C,GAC3C,OAAO,eAAmBrG,MACvBiO,MAAMH,GAAe/E,EAAc1C,IACnC+H,iB,4BCbU,mBACb,IAAKC,IAAuB9K,IAASD,EACnC,OAAO,KAET,IAAIgL,EAAWhL,EAAMqH,QAAQ,OAAQ,KAAKvD,OAAOkG,cACjD,MAAMiB,EAAO,GACPC,EAAQ,GACRC,EACJ,KAAOC,IAAIJ,EAAUC,GAAMI,SAASH,GACtC,SAAUH,EAAmBf,iBAAiB/J,KAAQkL,KCDzC,IACbvX,KAAM,cACN,OACE,MAAO,CACL6R,aAAc,KACd6F,aAAc,KACdC,qBAAsB,KACtBC,WAAY,OAGhB,UACE/U,KAAKgP,aAAehP,KAAK6D,OAAOC,OAAOkL,cAEzCvK,QAAS,CACP,cACE,MAAMuQ,EAAOhV,KAAKiV,MAAMC,WACxBF,EAAKrH,SAGP,UAAWnM,GACT,IAAI2T,EAAQ3T,EAAOvE,OAAOkY,MAC1B,GAAqB,IAAjBA,EAAMvb,OAEV,IAAK,IAAIqa,KAAQkB,EAAO,CACtB,IAKIC,EACA9J,EANAiG,EAAM8D,IAAIC,gBAAgBrB,GAE1B7C,EAAM,IAAI,GAAUG,GAKxBH,EAAImE,UAAUlR,KAAKiF,IACjB8L,EAAWvb,OAAOyT,OAAO,GAAIhE,GAC7B8L,EAAS1L,QAAUJ,EAAMI,QACtBnK,IAAIiW,GAAcA,EAAWnI,QAC7BpF,OAAOuN,GAA6B,KAAfA,GACrBjW,IAAIiW,IACH,IAAIrY,EAAOqY,EAAWrI,MAAM,KAC5B,MAAO,CACLrC,OAAQ3N,EAAKsY,MACb5K,MAAO1N,KAGbiY,EAAS1V,GAAKgW,GAAWN,EAAS1L,QAAQ,GAAGoB,OAAQsK,EAAS5L,KAAM4L,EAAS7L,OAC7E6H,EAAIuE,gBAAgBtR,KAAKyP,IACvB,GAAIA,EAAK5C,OAAOtX,OAAS,EAAG,CAC1B,IAAIgc,EAAY9B,EAAK5C,OAsBrB,GArBA5F,EAAasK,EAAUrW,IAAI,CAAC0G,EAAK4P,KAC/B,IAAI1J,EAAW,GACf,GAAIzB,MAAMC,QAAQ1E,EAAIsD,OAcpB,OAbA4C,EAAS5C,MAAQtD,EAAIsD,MAAM,GAC3B4C,EAASzC,QAAYgB,MAAMC,QAAQ1E,EAAI2E,QAAkB3E,EAAI2E,OAAX,CAAC,IAC/CF,MAAMC,QAAQ1E,EAAI,qBAAuBA,EAAI,mBAAmBrM,SAClEuS,EAASV,MAASxF,EAAI,mBAAsBA,EAAI,mBAAmB,GAAG2K,QAAQ,KAAM,IAAM,IAE5FzE,EAAS3C,KAAOkB,MAAMC,QAAQ1E,EAAI6P,MAAQ7P,EAAI6P,KAAK,GAAK,UACpDpL,MAAMC,QAAQ1E,EAAI6P,QAAO3J,EAAS2J,KAAO7P,EAAI6P,KAAK,IAClD7P,EAAI2G,QAAOT,EAASS,MAASlC,MAAMC,QAAQ1E,EAAI2G,OAAU3G,EAAI2G,MAAM,GAAK3G,EAAI2G,OAC5E3G,EAAI0G,YAAWR,EAASQ,UAAajC,MAAMC,QAAQ1E,EAAI0G,WAAc1G,EAAI0G,UAAU,GAAK1G,EAAI0G,WAC5F1G,EAAI4G,SAAQV,EAASU,OAAUnC,MAAMC,QAAQ1E,EAAI4G,QAAW5G,EAAI4G,OAAO,GAAK5G,EAAI4G,QAChF5G,EAAI6G,QAAOX,EAASW,MAASpC,MAAMC,QAAQ1E,EAAI6G,OAAU7G,EAAI6G,MAAM,GAAK7G,EAAI6G,OAChFX,EAAS9F,OAASyN,EAAK7C,IAAI4E,GAC3B1J,EAASzM,GAAKgW,GAAWvJ,EAASzC,QAAQ,GAAGoB,OAAQqB,EAAS3C,KAAM2C,EAAS5C,OACtE4C,IAERlE,OAAOhC,QAAe5I,IAAR4I,GAAgC,OAAXA,EAAIvG,IAC1C+O,GAAYU,SAASL,IAAI9O,KAAKgP,aAAc1D,GAC5C8J,EAAS9J,WAAaA,EAAW/L,IAAIrB,GAAKA,EAAEwB,IACxB,OAAhB0V,EAAS1V,GAAa,CACxB+O,GAAYU,SAASL,IAAI9O,KAAKgP,aAAcnV,OAAOyT,OAAO,GAAI8H,IAC9D,IAAIlL,EAAa8J,GAAchU,KAAKgP,aAAcoG,EAAS1V,GAAIuU,GAC/D/J,EAAW7F,KAAK,KACdnF,QAAQ8E,IAAI,gBAAkBoR,EAAS1V,MAEzC0V,EAASlL,WAAaA,EACW,oBAAtBlK,KAAK6U,cACd7U,KAAK6U,aAAaO,aCtFgN,MCOhP,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QC8EA,IACbjY,KAAM,iBACNiK,WAAY,CACV2O,UACAC,oBACAC,aACAC,WACAC,gBAEF/c,KAAM,KAAM,CACV+M,UAAW,aACXiQ,WAAY,KACZpH,aAAc,KACdvJ,WAAY,CACVtI,KAAM,KACNuI,YAAa,MAEf0J,SAAU,KACV9D,WAAY,GACZiH,SAAU,GACVxM,iBAAkB,KAEpB,UACE/F,KAAKgP,aAAehP,KAAK6D,OAAOC,OAAOkL,aACvCP,GAAYxQ,IAAI+B,KAAKgP,cAAc3K,KAAKoB,IACtCzF,KAAKyF,WAAaA,KAGtB,UACEzF,KAAKiV,MAAMkB,YAAYtB,aAAe,CAACvL,EAAOwK,KAC5C9T,KAAKiV,MAAMgB,UAAUI,SAAS/M,IAMhCmF,GAAYU,SAAST,KAAK1O,KAAKgP,cAAc3K,KAAK+K,IAEhDpP,KAAKoP,SAAWA,EAASnH,OAAO9M,IAAMA,EAAEpB,eAAe,WACvD,IAAIwY,EAAW,GACfvS,KAAKoP,SAASxK,QAAQwI,IACpBA,EAAEmF,SAAS3B,QAAQ,mBAAoB,IAAI2C,cAAcpG,MAAM,MAC5DlF,OAAOqO,GAAKA,EAAE1c,OAAS,GAAK0c,EAAE1c,OAAS,IACvCgL,QAAQ0R,IACH/D,EAASxY,eAAeuc,GAC1B/D,EAAS+D,IAAM,EAEf/D,EAAS+D,GAAK,MAItBtW,KAAKuS,SAAW1Y,OAAOgG,KAAK0S,GAAUhT,IAAIZ,IACxC,MAAO,CACLiH,KAAMjH,EACN4X,MAAOhE,EAAS5T,MAGpBqB,KAAKiV,MAAMgB,UAAUnM,OAAS9J,KAAKoP,SACnC,IAAIoH,EAAqB,GACzBxW,KAAKoP,SAASxK,QAAQzJ,IACpBA,EAAEmQ,WAAW1G,QAAQ1G,IACfsY,EAAmBzc,eAAemE,GACpCsY,EAAmBtY,IAAM,EAEzBsY,EAAmBtY,GAAK,MAK9B8B,KAAKsL,WAAa8D,EAASnH,OAAOmF,GAAKA,EAAErT,eAAe,WACrDwF,IAAIrB,IAEH,OADAA,EAAEoI,UAAYkQ,EAAmBtY,EAAEwB,IAC5BxB,IAERuY,KAAK,CAACrJ,EAAGsJ,IAAMA,EAAEpQ,UAAY8G,EAAE9G,WAC/BhH,MAAM,EAAG,MAGhBmF,QAAS,CACP,iBACEzE,KAAKiV,MAAMkB,YAAYQ,eAEzB,UAAWzV,GACTlB,KAAKsE,QAAQpK,KAAK,CAACqK,KAAM,WAAavE,KAAKgP,aAAe,IAAM9N,OCnLiL,M,gECQnP,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIa,GAAiB,QAuBhC,IAAkB,GAAW,CAAC8D,OAAA,KAAKC,OAAA,KAAKC,QAAA,KAAM4I,aAAA,QAAaC,UAAA,QAAUC,WAAA,QAAW4I,aAAA,KAAUxR,aAAA,KAAWC,WAAA,KAAS8I,SAAA,KAAMrH,QAAA,KAAMY,WAAA,KAAQX,QAAA,KAAMC,YAAA,KAAUW,WAAA,KAAQkP,QAAA,KAAKC,SAAA,KAAM1I,cAAA,KAAWvG,SAAA,UC1ChL,IAAI,GAAS,WAAa,IAAI9H,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,mBAAmB,CAACE,MAAM,CAAC,YAAa,EAAK,WAAY,KAASF,EAAG,YAAY,CAACA,EAAG,UAAUA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,YAAY,GAAG,iBAAiB,KAAK,CAACF,EAAG,iBAAiB,CAAC8F,IAAI,qBAAqB,IAAI,IAAI,IAAI,IACjY,GAAkB,GCDlB,GAAS,WAAa,IAAIlG,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,GAAG,MAAQ,GAAG,MAAQ,YAAY,CAACF,EAAG,kBAAkB,CAACJ,EAAIU,GAAG,uBAAuBN,EAAG,YAAYA,EAAG,QAAQ,CAACK,YAAY,OAAOH,MAAM,CAAC,MAAQ,GAAG,MAAQ,WAAWkB,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIqI,QAAS,KAAQ,CAACjI,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIU,GAAG,cAAcV,EAAIU,GAAG,yBAAyB,IAAI,GAAGN,EAAG,SAAS,CAACE,MAAM,CAAC,WAAW,KAAK,CAACN,EAAIiB,GAAIjB,EAAe,YAAE,SAAS0F,EAAWvE,GAAO,MAAO,CAACf,EAAG,cAAc,CAACxB,IAAI8G,EAAW8D,MAAM3I,YAAY,CAAC,OAAS,WAAWP,MAAM,CAAC,OAAS,GAAG,GAAKN,EAAIgX,cAActR,KAAc,CAACtF,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACK,YAAY,iBAAiB,CAACT,EAAIU,GAAG,iBAAiBV,EAAI+B,GAAG2D,EAAWtI,MAAM,kBAAkBgD,EAAG,uBAAuB,CAACJ,EAAIU,GAAG,iBAAiBV,EAAI+B,GAAG2D,EAAWC,aAAa,mBAAmB,GAAGvF,EAAG,qBAAqB,CAACA,EAAG,0BAA0B,CAACJ,EAAIU,GAAGV,EAAI+B,GAAG2D,EAAWuR,cAAc,IAAI,GAAI9V,EAAQ,EAAInB,EAAIkX,YAAYrd,OAAQuG,EAAG,YAAY,CAACxB,IAAIuC,IAAQnB,EAAIY,SAAS,GAAGR,EAAG,WAAW,CAACE,MAAM,CAAC,WAAa,GAAG,YAAY,OAAOwF,MAAM,CAACxH,MAAO0B,EAAU,OAAEuD,SAAS,SAAUwC,GAAM/F,EAAIqI,OAAOtC,GAAK7D,WAAW,WAAW,CAAC9B,EAAG,SAAS,CAACA,EAAG,eAAe,CAACK,YAAY,YAAY,CAACT,EAAIU,GAAG,2BAA2BN,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,QAAQwF,MAAM,CAACxH,MAAO0B,EAAImX,cAAmB,MAAE5T,SAAS,SAAUwC,GAAM/F,EAAIoX,KAAKpX,EAAImX,cAAe,QAASpR,IAAM7D,WAAW,yBAAyB9B,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,cAAc,IAAM,IAAIwF,MAAM,CAACxH,MAAO0B,EAAImX,cAAyB,YAAE5T,SAAS,SAAUwC,GAAM/F,EAAIoX,KAAKpX,EAAImX,cAAe,cAAepR,IAAM7D,WAAW,gCAAgC,GAAG9B,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,iBAAiB,KAAO,QAAQkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIqX,sBAAsB,CAACrX,EAAIU,GAAG,kCAAkCN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,QAAQkB,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIqI,QAAS,KAAS,CAACrI,EAAIU,GAAG,mCAAmC,IAAI,IAAI,IAAI,IACnkE,GAAkB,GC6EP,I,UAAA,CACbtD,KAAM,iBACN,OACE,MAAO,CACLiL,QAAQ,EACR6O,YAAa,GACbC,cAAe,KACflN,QAAS,CACP,OAAQ,YAId,UACEhK,KAAKqX,+BAEP5S,QAAS,CACP,cAAe6S,GACb,MAAO,eAAiBA,EAAK5X,IAE/B,mBACEM,KAAKkX,cAAcK,YACjB,eAAmBC,WAAWC,kBAChChJ,GAAYK,IAAI9O,KAAKkX,eAAe7S,KAAK,KACvCrE,KAAKiX,YAAY/c,KAAKL,OAAOyT,OAAO,GAAItN,KAAKkX,gBAC7ClX,KAAKqX,8BACLrX,KAAKoI,QAAS,KAGlB,8BACEpI,KAAKkX,cAAgB,CACnB/Z,KAAM,KACNuI,YAAa,KACbsR,SAAU,EACVU,QAAQ,IAGZ,aAAc3T,EAAQ7C,GACL,SAAX6C,EACF/D,KAAKsI,KAAKC,KAAKxE,EAAQ7C,GACH,WAAX6C,GACT/D,KAAKsI,KAAKC,KAAKxE,EAAQ7C,OCtHwN,MCQnP,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,MAAiB,QAwBhC,IAAkB,GAAW,CAAC+D,OAAA,KAAKC,QAAA,KAAM4I,aAAA,QAAaC,UAAA,QAAUC,WAAA,QAAW5I,aAAA,KAAW8I,WAAA,KAAQjD,YAAA,KAASnE,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUwB,mBAAA,KAAgBmP,oBAAA,OAAoBlP,iBAAA,OAAiByC,kBAAA,OAAkBjE,eAAA,OAAeU,WAAA,KAAQyG,cAAA,KAAWvG,SAAA,QAASD,cAAAC,GAAA,OCtBhO,QACb1K,KAAM,WACNiK,WAAY,CACV2O,UACA6B,kBACA5B,qBAEF5c,KAAM,KAAM,CACVoK,KAAM,KACN2C,UAAW,QACXiQ,WAAY,KACZ3Q,WAAY,CACVtI,KAAM,8BACNuI,YAAa,QAGjB,UACE1F,KAAKwD,KAAOL,IACRnD,KAAKwD,KAAKV,OACZwL,GAAQuJ,SAAS7X,KAAKwD,OAG1B,UACE8K,GAAQwJ,iBAAiBzT,KAAK4S,IAC5B/X,QAAQ8E,IAAIiT,GACZjX,KAAKiV,MAAM8C,gBAAgBd,YAAcA,KAG7CxS,QAAS,CACP,eACEzE,KAAK+H,QAAU/H,KAAK+H,UCnDmN,MCQzO,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,GAAiB,QAQhC,IAAkB,GAAW,CAAC/C,OAAA,KAAKI,aAAA,KAAWC,WAAA,KAASqC,WAAA,OC3BvD,IAAI,GAAS,WAAa,IAAI3H,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,YAAY,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,GAAG,KAAO,GAAG,IAAM,GAAG,eAAe,GAAG,gBAAgB,GAAG,MAAQ,SAAS,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIuE,QAAQ0T,IAAI,MAAM,CAAC7X,EAAG,SAAS,CAACJ,EAAIU,GAAG,qBAAqB,GAAGN,EAAG,SAAS,CAACE,MAAM,CAAC,iBAAiB,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIkY,aAAa,CAAC9X,EAAG,SAAS,CAACJ,EAAIU,GAAG,gCAAgC,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAImY,YAAY,CAAC/X,EAAG,SAAS,CAACJ,EAAIU,GAAG,+BAA+B,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,SAAWN,EAAIgS,WAAW,GAAGxQ,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIgS,YAAY,KAAK,CAAC5R,EAAG,SAAS,CAACJ,EAAIU,GAAG,uBAAuB,GAAGN,EAAG,QAAQ,CAAC4B,WAAW,CAAC,CAAC5E,KAAK,QAAQ6E,QAAQ,UAAU3D,MAAO0B,EAAc,WAAEkC,WAAW,eAAezB,YAAY,oBAAoBH,MAAM,CAAC,KAAO,OAAO,MAAQ,IAAI,KAAO,KAAK6B,SAAS,CAAC,MAASnC,EAAc,YAAGwB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOvE,OAAOkF,YAAqBpC,EAAIgS,WAAWvQ,EAAOvE,OAAOoB,WAAU0B,EAAIU,GAAG,MAAMV,EAAI+B,GAAG/B,EAAIoY,WAAW,cAAchY,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,SAAWN,EAAIgS,YAAYhS,EAAIoY,WAAW5W,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIgS,YAAY,KAAK,CAAC5R,EAAG,SAAS,CAACJ,EAAIU,GAAG,wBAAwB,IAAI,GAAIV,EAAgB,aAAEI,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQxB,EAAIqY,kBAAkB,CAACjY,EAAG,SAAS,CAACJ,EAAIU,GAAG,sBAAsB,GAAGV,EAAIY,KAAKR,EAAG,aAAa,GAAGA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,QAAQ,CAAC8F,IAAI,eAAezF,YAAY,SAASH,MAAM,CAAC,KAAO,QAAQkB,GAAG,CAAC,OAASxB,EAAIsY,YAAYlY,EAAG,MAAM,CAAC8F,IAAI,kBAAkB5F,MAAM,CAAC,GAAK,oBAAoB,CAACF,EAAG,MAAM,CAAC8F,IAAI,YAAYzF,YAAY,YAAYH,MAAM,CAAC,GAAK,cAAcF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,MAAM,CAACK,YAAY,aAAaL,EAAG,MAAM,CAACK,YAAY,cAAcL,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,OAAS,SAAS,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,qBAAqB,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,kBAAkBF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACN,EAAIU,GAAG,gDAAgDN,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACN,EAAIU,GAAG,kDAAkDN,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,sBAAsB,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,eAAe,CAACN,EAAIU,GAAG,uCAAuCN,EAAG,MAAM,CAACK,YAAY,cAAcL,EAAG,WAAW,CAACE,MAAM,CAAC,GAAK,gBAAgB,OAAS,OAAO,SAAW,mBAAmB,GAAGF,EAAG,sBAAsB,CAACK,YAAY,OAAOH,MAAM,CAAC,QAAU,GAAG,IAAM,GAAG,MAAQ,QAAQ,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIuY,YAAY,GAAGnY,EAAG,sBAAsB,CAACE,MAAM,CAAC,QAAU,GAAG,IAAM,GAAG,MAAQ,GAAG,MAAQ,OAAOwF,MAAM,CAACxH,MAAO0B,EAAY,SAAEuD,SAAS,SAAUwC,GAAM/F,EAAIwY,SAASzS,GAAK7D,WAAW,aAAa,CAAC9B,EAAG,SAAS,CAACA,EAAG,QAAQ,CAACJ,EAAIU,GAAG,cAAcN,EAAG,QAAQ,CAACJ,EAAIU,GAAG,eAAe,IAAI,IAAI,IAC93F,GAAkB,GCDlB,GAAS,WAAa,IAAIV,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACK,YAAY,YAAYH,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACJ,EAAIU,GAAG,aAAaN,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,GAAG,WAAW,GAAG,YAAc,GAAG,MAAQN,EAAIqS,OAAO3L,YAAY1G,EAAI2G,GAAG,CAAC,CAAC/H,IAAI,QAAQgI,GAAG,SAASV,GAClU,IAAIuF,EAAOvF,EAAIuF,KACf,MAAO,CAACrL,EAAG,IAAI,CAACoB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIyY,OAAOhN,EAAKrO,SAAS,CAAC4C,EAAIU,GAAGV,EAAI+B,GAAG0J,EAAKrO,iBAAiB,IAC9G,GAAkB,GCStB,IACE,MAAF,CACI,QAAJ,OAEE,SAAF,CACI,QACE,IAAN,sBACM,IAAN,IACM,OAAN,yBACQ,MAAR,CACU,GAAV,IACU,KAAV,QACU,SAAV,8DAKE,QAAF,CACI,OAAJ,GACM,QAAN,UC/BqP,M,aCOjP,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,MAAiB,QAOhC,IAAkB,GAAW,CAAC+H,QAAA,KAAM8I,WAAA,QAAWyK,aAAA,O,oECP/C,MAAMC,GAAsB,IAmB5B,MAAM,GACJ,aAAY,aAAEC,EAAY,SAAEC,EAAQ,UAAEC,EAAS,SAAEC,EAAQ,eAC3CC,EAAiB,KAAI,qBAAEC,GAAuB,EAAK,WACnDC,EAAa,GAAE,eAAEC,EAAiB,KAC9ClZ,KAAK2Y,aAAeA,EACpB3Y,KAAK4Y,SAAWA,GAAY,kCAC5B5Y,KAAKmZ,YAAc,KACnBnZ,KAAKoZ,oBAAsB,GAC3BpZ,KAAKqZ,kBAAoB,KACzBrZ,KAAKsZ,eAAgB,EACrBtZ,KAAKuZ,QAAUV,EACf7Y,KAAK+R,WAAa/R,KAAKuZ,QAAU,EACjCvZ,KAAKwZ,QAAU,GACfxZ,KAAK8Y,SAAWA,EAChB9Y,KAAKyZ,SAAW,GAChBzZ,KAAK+Y,eAAiBA,EACtB/Y,KAAK0Z,oBAAsB,KAC3B1Z,KAAKgZ,qBAAuBA,EAC5BhZ,KAAKiZ,WAAaA,EAClBjZ,KAAKkZ,eAAiBA,EAEtBlZ,KAAK2Z,aAMP,mBAGE,GAFA3Z,KAAKsZ,eAAgB,GAEhBtZ,KAAKgZ,qBAAsB,CAC9B,IAAIY,EAAe5d,SAASC,cAAc,OAC1C2d,EAAaC,UAAY,eACzB7Z,KAAK2Y,aAAanb,YAAYoc,GAGhC5Z,KAAK4Y,SAASkB,SAAS,oBAAqB,CAC1CC,OAAQ/Z,KACR+R,WAAY/R,KAAK+R,WACjBiI,YAAaha,KAAKyZ,SAAS7f,SAU/B,OAAOuC,EAAU,GACf,IAAM6D,KAAKmZ,cAAenZ,KAAKqZ,mBAAsBrZ,KAAKsZ,cACxD,OAEFtZ,KAAKia,SAELja,KAAKyZ,SAAW,GAChB,IAAIS,EAAgBle,SAASme,yBAC7Bna,KAAK0Z,oBAAsB,8BAAgB,CACzCP,YAAanZ,KAAKmZ,YAClBE,kBAAmBrZ,KAAKqZ,kBACxBe,UAAWF,EACXpB,SAAU9Y,KAAK8Y,SACfW,SAAUzZ,KAAKyZ,SACfL,oBAAqBpZ,KAAKoZ,oBAC1Bjd,UACA6c,qBAAsBhZ,KAAKgZ,uBAE7BhZ,KAAK0Z,oBAAoBhe,QAAQ2I,KAAK,KACpCrE,KAAK2Y,aAAanb,YAAY0c,GAC9Bla,KAAKqa,mBACLra,KAAKsa,gBACLta,KAAKua,oBACJ,SAAUC,MAQf,SACMxa,KAAK0Z,sBACP1Z,KAAK0Z,oBAAoBO,SACzBja,KAAK0Z,oBAAsB,MAI/B,qBAAqBe,GACnBza,KAAKia,SACLja,KAAKqZ,kBAAoBoB,EAG3B,eAAetB,GACbnZ,KAAKia,SACLja,KAAKmZ,YAAcA,EAGrB,eAAeK,EAASkB,GACtB,IAAIhhB,EAAI,EACJihB,EAAS,EACTvB,EAAsBpZ,KAAKoZ,oBAC3BwB,EAAMxB,EAAoBxf,OAAS,EACnCihB,EAAoC,OAAxB7a,KAAK+Y,gBAA2B2B,EAChC,EAAI1a,KAAK+Y,eAAe5P,MAAMjF,MAAMtK,OAChDkhB,EAAM,GACV,IAAKtB,EACH,OAAOsB,EAET,IAAK,IAAIpd,EAAI,EAAGqd,EAAMvB,EAAQ5f,OAAQ8D,EAAIqd,EAAKrd,IAAK,CAElD,IAAIsd,EAAWxB,EAAQ9b,GAGvB,MAAOhE,IAAMkhB,GAAOI,GACZL,EAASvB,EAAoB1f,GAAGE,OACtC+gB,GAAUvB,EAAoB1f,GAAGE,OACjCF,IAGEA,IAAM0f,EAAoBxf,QAC5BsF,QAAQ3C,MAAM,qCAGhB,IAAImU,EAAQ,CACVuK,MAAO,CACLC,OAAQxhB,EACRyhB,OAAQH,EAAWL,IAMrBK,GADEN,EACUA,EAAchd,GAEdmd,EAKd,MAAOnhB,IAAMkhB,GAAOI,EACZL,EAASvB,EAAoB1f,GAAGE,OACtC+gB,GAAUvB,EAAoB1f,GAAGE,OACjCF,IAGFgX,EAAMkK,IAAM,CACVM,OAAQxhB,EACRyhB,OAAQH,EAAWL,GAErBG,EAAI5gB,KAAKwW,GAGX,OAAOoK,EAGT,cAActB,GAEZ,GAAuB,IAAnBA,EAAQ5f,OACV,OAGF,IAAIwf,EAAsBpZ,KAAKoZ,oBAC3BK,EAAWzZ,KAAKyZ,SAChB2B,EAAU,KACV7B,EAAUvZ,KAAKuZ,QACf8B,EAA0C,OAAxBrb,KAAK+Y,gBAChBQ,IAAYvZ,KAAK+Y,eAAe/Q,SAASuR,QAChD+B,EAA4C,OAAxBtb,KAAK+Y,gBACJ,EAAI/Y,KAAK+Y,eAAe/Q,SAASgT,SACtDO,EAAwC,OAAxBvb,KAAK+Y,gBACG/Y,KAAK+Y,eAAe5P,MAAMoS,aAClDC,EAAW,CACbN,QAAS,EACTC,YAAQ9d,GAGV,SAASoe,EAAUR,EAAOpB,GACxB,IAAIqB,EAASD,EAAMC,OACnBzB,EAASyB,GAAQ/B,YAAc,GAC/BuC,EAAgBR,EAAQ,EAAGD,EAAME,OAAQtB,GAG3C,SAAS6B,EAAgBR,EAAQS,EAAYC,EAAU/B,GACrD,IAAIgC,EAAMpC,EAASyB,GACf/I,EAAUiH,EAAoB8B,GAAQY,UAAUH,EAAYC,GAC5DG,EAAO/f,SAASggB,eAAe7J,GACnC,GAAI0H,EAAW,CACb,IAAIoC,EAAOjgB,SAASC,cAAc,QAIlC,OAHAggB,EAAKpC,UAAYA,EACjBoC,EAAKze,YAAYue,QACjBF,EAAIre,YAAYye,GAGlBJ,EAAIre,YAAYue,GAGlB,IAAIG,EAAKZ,EAAkBa,EAAKD,EAAK,EACrC,GAAIX,EACFW,EAAK,EACLC,EAAK3C,EAAQ5f,YACR,IAAKyhB,EAEV,OAGF,IAAK,IAAI3hB,EAAIwiB,EAAIxiB,EAAIyiB,EAAIziB,IAAK,CAC5B,IAAIgX,EAAQ8I,EAAQ9f,GAChBuhB,EAAQvK,EAAMuK,MACdL,EAAMlK,EAAMkK,IACZwB,EAAcf,GAAkB3hB,IAAM4hB,EACtCe,EAAmBD,EAAa,YAAc,GAmBlD,GAjBIpc,KAAK+Y,gBACP/Y,KAAK+Y,eAAeuD,oBAAoB/C,EAAS7f,EAAG+f,EACZwB,EAAMC,QAI3CE,GAAWH,EAAMC,SAAWE,EAAQF,OAQvCQ,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQF,EAAME,SANtC,OAAZC,GACFM,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQK,EAASL,QAG3DM,EAAUR,IAKRA,EAAMC,SAAWN,EAAIM,OACvBQ,EAAgBT,EAAMC,OAAQD,EAAME,OAAQP,EAAIO,OAChC,YAAckB,OACzB,CACLX,EAAgBT,EAAMC,OAAQD,EAAME,OAAQK,EAASL,OACrC,kBAAoBkB,GACpC,IAAK,IAAIE,EAAKtB,EAAMC,OAAS,EAAGsB,EAAK5B,EAAIM,OAAQqB,EAAKC,EAAID,IACxD9C,EAAS8C,GAAI1C,UAAY,mBAAqBwC,EAEhDZ,EAAUb,EAAK,gBAAkByB,GAEnCjB,EAAUR,EAGRQ,GACFM,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQK,EAASL,QAI7D,gBAEE,IAAKnb,KAAKsZ,cACR,OAIF,IAuBImD,EAAaC,EAvBblD,EAAUxZ,KAAKwZ,QACfC,EAAWzZ,KAAKyZ,SAChBL,EAAsBpZ,KAAKoZ,oBAC3BuD,GAAsB,EAG1B,IAAK,IAAIjjB,EAAI,EAAGqhB,EAAMvB,EAAQ5f,OAAQF,EAAIqhB,EAAKrhB,IAAK,CAClD,IAAIgX,EAAQ8I,EAAQ9f,GAChBuhB,EAAQjI,KAAKC,IAAI0J,EAAoBjM,EAAMuK,MAAMC,QACrD,IAAK,IAAIrc,EAAIoc,EAAOL,EAAMlK,EAAMkK,IAAIM,OAAQrc,GAAK+b,EAAK/b,IAAK,CACzD,IAAIgd,EAAMpC,EAAS5a,GACnBgd,EAAI1C,YAAcC,EAAoBva,GACtCgd,EAAIhC,UAAY,GAElB8C,EAAqBjM,EAAMkK,IAAIM,OAAS,EAGd,OAAxBlb,KAAK+Y,gBAA4B/Y,KAAK+Y,eAAe6D,SAO7B,OAAxB5c,KAAK+Y,iBACP0D,EAAczc,KAAK+Y,eAAe0D,YAAYzc,KAAKuZ,UAAY,KAC/DmD,EAAqB1c,KAAK+Y,eAAgC,mBACxD/Y,KAAK+Y,eAAe2D,kBAAkB1c,KAAKuZ,UAAmB,MAGlEvZ,KAAKwZ,QAAUxZ,KAAK6c,eAAeJ,EAAaC,GAChD1c,KAAK8c,cAAc9c,KAAKwZ,UAG1B,iBAAiBP,GAEf,GAA0B,IAAtBA,EAAWrf,OACb,OAGF,IAAIwf,EAAsBpZ,KAAKoZ,oBAC3BK,EAAWzZ,KAAKyZ,SAChB2B,EAAU,KACVI,EAAW,CACbN,QAAS,EACTC,YAAQ9d,GAGV,SAASoe,EAAUR,EAAOpB,EAAW1Y,GACnC,IAAI+Z,EAASD,EAAMC,OACnBzB,EAASyB,GAAQ/B,YAAc,GAC/BuC,EAAgBR,EAAQ,EAAGD,EAAME,OAAQtB,EAAW1Y,GAGtD,SAASua,EAAgBR,EAAQS,EAAYC,EAAU/B,EAAW1Y,GAChE,IAAI0a,EAAMpC,EAASyB,GACf/I,EAAUiH,EAAoB8B,GAAQY,UAAUH,EAAYC,GAC5DG,EAAO/f,SAASggB,eAAe7J,GACnC,GAAI0H,EAAW,CACb,IAAIoC,EAAOjgB,SAASC,cAAc,QAKlC,OAJAggB,EAAKpC,UAAYA,EACjBhgB,OAAOyT,OAAO2O,EAAK9a,MAAOA,GAC1B8a,EAAKze,YAAYue,QACjBF,EAAIre,YAAYye,GAGlBJ,EAAIre,YAAYue,GAGlB,IAAIG,EAAK,EACLC,EAAKlD,EAAWrf,OAEpB,IAAK,IAAIF,EAAIwiB,EAAIxiB,EAAIyiB,EAAIziB,IAAK,CAC5B,IAAIqjB,EAAY9D,EAAWvf,GACvBuhB,EAAQ8B,EAAU9B,MAClBL,EAAMmC,EAAUnC,IAChByB,EAAkB,GAgBtB,GAbKjB,GAAWH,EAAMC,SAAWE,EAAQF,OASvCQ,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQF,EAAME,OACtC,CAAE/Z,gBAAiB2b,EAAUC,WAR7B,OAAZ5B,GACFM,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQK,EAASL,OACzC,CAAE/Z,gBAAiB2b,EAAUC,UAG/CvB,EAAUR,IAMRA,EAAMC,SAAWN,EAAIM,OACvBQ,EAAgBT,EAAMC,OAAQD,EAAME,OAAQP,EAAIO,OAChC,YAAckB,EACd,CAAEjb,gBAAiB2b,EAAUC,cACxC,CACLtB,EAAgBT,EAAMC,OAAQD,EAAME,OAAQK,EAASL,OACrC,kBAAoBkB,EACpB,CAAEjb,gBAAiB2b,EAAUC,UAC7C,IAAK,IAAIT,EAAKtB,EAAMC,OAAS,EAAGsB,EAAK5B,EAAIM,OAAQqB,EAAKC,EAAID,IACxD9C,EAAS8C,GAAI1C,UAAY,mBAAqBwC,EAC9CxiB,OAAOyT,OACLmM,EAAS8C,GAAIpb,MAAO,CAAEC,gBAAiB2b,EAAUC,UAErDvB,EAAUb,EAAK,gBAAkByB,EACvB,CAAEjb,gBAAiB2b,EAAUC,UAEzC5B,EAAUR,EAGRQ,GACFM,EAAgBN,EAAQF,OAAQE,EAAQD,OAAQK,EAASL,QAI7D,mBAGE,IAAKnb,KAAKsZ,cACR,OAIF,IAAIL,EAAajZ,KAAKiZ,WAClBQ,EAAWzZ,KAAKyZ,SAChBL,EAAsBpZ,KAAKoZ,oBAC3BuD,GAAsB,EAG1B,IAAK,IAAIjjB,EAAI,EAAGqhB,EAAM9B,EAAWrf,OAAQF,EAAIqhB,EAAKrhB,IAAK,CACrD,IAAIqjB,EAAY9D,EAAWvf,GACvBuhB,EAAQjI,KAAKC,IAAI0J,EAAoBI,EAAU9B,MAAMC,QACzD,IAAK,IAAIrc,EAAIoc,EAAOL,EAAMmC,EAAUnC,IAAIM,OAAQrc,GAAK+b,EAAK/b,IAAK,CAC7D,IAAIgd,EAAMpC,EAAS5a,GACnBgd,EAAI1C,YAAcC,EAAoBva,GACtCgd,EAAIhC,UAAY,GAChBgC,EAAI1a,MAAMC,gBAAkB,KAE9Bub,EAAqBI,EAAUnC,IAAIM,OAAS,EAI9C,MAAM+B,EAAcjd,KAAK+Y,eAAemE,cAAcld,KAAKuZ,SACrD4D,EAAmB,GACnBC,EAAe,GACfC,EAAc,GACpBrd,KAAKkZ,eAAetU,QAAQ,EAAGuD,OAAM6U,cACnC,MAAM7B,EAAS8B,EAAY5Q,QAAQlE,IACnB,IAAZgT,IACFgC,EAAiBjjB,KAAK+iB,EAAY5Q,QAAQlE,IAC1CiV,EAAaljB,KAAKiO,EAAKvO,QACvByjB,EAAYnjB,KAAK8iB,MAGrB,MAAMxD,EAAUxZ,KAAK6c,eAAeM,EAAkBC,GACtDpd,KAAKiZ,WAAaO,EAAQja,IAAI,CAACmR,EAAOxP,KAAU,IAC3CwP,EACHsM,QAASK,EAAYnc,MAKvBlB,KAAKsd,iBAAiBtd,KAAKiZ,YAU7B,aACE,IAAI4C,EAAM7b,KAAK2Y,aACX4E,EAAkB,KAEtB1B,EAAI2B,iBAAiB,YAAcC,IACjC,GAAIzd,KAAKgZ,sBAAwBhZ,KAAK0Z,oBAQpC,OAPA1Z,KAAK0Z,oBAAoBgE,gBAAe,QACf,qBAAbC,UACNA,SAASC,KAAK,2BAChBL,IACF3gB,aAAa2gB,GACbA,EAAkB,OAKtB,IAAI3C,EAAMiB,EAAIgC,cAAc,iBAC5B,GAAKjD,EAAL,CAGA,GAAwB,qBAAb+C,WACNA,SAASC,KAAK,yBAA0B,CAK3C,IAAIE,EAAYL,EAAIxgB,SAAW4e,EAK/B,IAJwB,qBAAb8B,UAA4BA,SAASC,KAAK,cACnDE,EAAYA,GAC+B,SADlB1e,OAAO2e,iBAAiBnD,GAC/CoD,iBAAiB,qBAEjBF,EAAW,CACb,IAAIG,EAAYpC,EAAIqC,wBAChBhgB,EAAI8U,KAAKC,IAAI,GAAIwK,EAAIU,MAAQF,EAAUG,KAAOH,EAAU/K,QAC5D0H,EAAIzZ,MAAMid,KAAW,IAAJlgB,GAASmgB,QAAQ,GAAK,KAG3CzD,EAAI0D,UAAUxP,IAAI,aAGpB+M,EAAI2B,iBAAiB,UAAW,KAC9B,GAAIxd,KAAKgZ,sBAAwBhZ,KAAK0Z,oBAYpC,YAXwB,qBAAbiE,UACNA,SAASC,KAAK,yBAQjB5d,KAAK0Z,oBAAoBgE,gBAAe,GAPxCH,EAAkBjgB,WAAW,KACvB0C,KAAK0Z,qBACP1Z,KAAK0Z,oBAAoBgE,gBAAe,GAE1CH,EAAkB,MACjB7E,KAOP,IAAIkC,EAAMiB,EAAIgC,cAAc,iBACvBjD,IAGmB,qBAAb+C,UACNA,SAASC,KAAK,2BACjBhD,EAAIzZ,MAAMid,IAAM,IAElBxD,EAAI0D,UAAUC,OAAO,cCtb3B,KAASC,oBAAoBC,UAAY,oDAEzC,IAAIC,GAAiB,QACjBC,GAAW,uCACXC,IAAc,EACdC,GAAsB,IACtBC,GAAY,IACZC,GAAY,GAGD,QACb5hB,KAAM,cACNiK,WAAY,CACVC,WACA2X,iBAGF5lB,KAAM,KAAM,CACVoK,KAAM,KACNwL,aAAc,KACd1C,QAAS,KACT2S,SAAS,EACTC,cAAc,EACd3G,UAAU,EACV4G,eAAgB,KAChBC,YAAa,KACbC,UAAW,KACXC,WAAY,KACZC,eAAgB,KAChBxN,WAAY,EACZuG,QAAS,KACTkH,gBAAiB,KAEnBxW,SAAU,CACR,YACE,OAAOhJ,KAAKof,YAAcpf,KAAKof,YAAY1L,SAAW,GAExD,aACE,IAAI+L,EAAM,IAAI,kBAAwB,cAAe,IACrD,OAAO,KAASC,OAAO1f,KAAM,aAAcyf,KAG/CE,MAAO,CACL,aACiC,kBAApB3f,KAAK+R,aACd/R,KAAK+R,WAAa6N,SAAS5f,KAAK+R,aAGlC/V,SAAS6jB,uBAAuB,QAAQ7f,KAAK+R,WAAa,GAAG+N,mBAGjE,UACE9f,KAAKgP,aAAehP,KAAK6D,OAAOC,OAAOkL,aACvChP,KAAKsM,QAAUtM,KAAK6D,OAAOC,OAAOwI,SAEpC,gBAEE,GADAtM,KAAK+f,gBACD/f,KAAKgP,cAAgBhP,KAAKsM,QAAS,CACrC,IAAIiF,QAAY6C,GAAcpU,KAAKgP,aAAchP,KAAKsM,SACtD,IACEtM,KAAKggB,KAAK,CAACzO,QACX,MAAMhV,GACN2C,QAAQ8E,IAAIzH,SAGdyD,KAAKkf,cAAe,GAGxBza,QAAS,CAEP,gBACEzE,KAAKigB,KAAO,eACZ,IAAI7F,EAAYpa,KAAKiV,MAAMiL,gBAC3BlgB,KAAKuf,eAAiB,IAAI,qBAC1Bvf,KAAK+Y,eAAiB,IAAI,wBAAkB,CAC1CoH,YAAangB,KAAKuf,iBAEpBvf,KAAKqf,UAAY,IAAI,gBAAsB,CACzCjF,UAAWA,EACX+F,YAAangB,KAAKuf,eAClBxG,eAAgB/Y,KAAK+Y,eACrBkH,KAAMjgB,KAAKigB,KACXG,eAAgB,EAChBC,cAAe,IAGjB,MAAMnH,EAAiB,CACrB,CACE/Q,KAAM,WACN6U,QAAS,WAGP/D,EAAa,CACjB,CACE,CACEgC,MAAO,CAAEC,OAAQ,GAAIC,OAAQ,GAC7BP,IAAK,CAAEM,OAAQ,GAAIC,OAAQ,IAC3B6B,QAAS,UAEX,CACE/B,MAAO,CAAEC,OAAQ,GAAIC,OAAQ,IAC7BP,IAAK,CAAEM,OAAQ,GAAIC,OAAQ,GAC3B6B,QAAS,OAEX,CACE/B,MAAO,CAAEC,OAAQ,GAAIC,OAAQ,IAC7BP,IAAK,CAAEM,OAAQ,GAAIC,OAAQ,IAC3B6B,QAAS,UAKfhd,KAAKqf,UAAUiB,uBACb,SACE3H,EAAcE,EAAWC,EAAUE,GAAuB,GACxD,OAAO,IAAI,GAA0B,CACnCL,eACAC,SAAU5Y,KAAK4Y,SACfC,YACAC,WACAC,eACE/Y,KAAKugB,qBAAuB,KAAOvgB,KAAK+Y,eAC1CC,sBACEhZ,KAAKugB,sBAA+BvH,EACtCC,WAAYA,EAAWJ,IAAc,GACrCK,eAAgBA,GAAkB,MAG1ClZ,KAAKuf,eAAeiB,UAAUxgB,KAAKqf,WACnCrf,KAAKsf,WAAa,IAAI,iBAAuB,CAC3Ca,YAAangB,KAAKuf,iBAEpBvf,KAAKuf,eAAekB,WAAWzgB,KAAKsf,aAGtC,KAAMxb,GACJ,OAAI9D,KAAKmf,eACAnf,KAAK0gB,QAAQrc,KAAK,KACvB,OAAOrE,KAAKggB,KAAKlc,MAIrB9D,KAAKmf,eAAiB,KAAS7N,YAAY,CACzCC,IAAKzN,EAAOyN,IACZoP,aAAcjC,GACdkC,QAASjC,GACTkC,WAAYjC,KAGd5e,KAAKmf,eAAe2B,WAAcC,IAChC/gB,KAAKoK,SAAS2W,EAAaC,OAASD,EAAaE,QAG5CjhB,KAAKmf,eAAezjB,QAAQ2I,KAAK+a,IAUtC,OATApf,KAAKof,YAAcA,EACnBpf,KAAKqf,UAAU6B,YAAY9B,GAC3Bpf,KAAKuf,eAAe2B,YAAY9B,GAChCpf,KAAKsf,WAAW6B,WAAW,CAACC,YAAahC,EAAYgC,cACrDphB,KAAKqhB,WAAWC,OAChBthB,KAAKqf,UAAUkC,kBAAoB,KACnCvhB,KAAKwhB,YAAYpC,GACjBpf,KAAK+Y,eAAemI,YAAY9B,GAChCpf,KAAK+Y,eAAe0I,eACbrC,GACLsC,IACF,IAEIC,EAFAzkB,EAAUwkB,GAAaA,EAAUxkB,QACjC+iB,EAAOjgB,KAAKigB,KAKd0B,EAFED,aAAqB,KAASE,oBAEV3B,EAAKhiB,IAAI,qBAAsB,KACnD,kCACOyjB,aAAqB,KAASG,oBAEjB5B,EAAKhiB,IAAI,qBAAsB,KACnD,qBACOyjB,aAAqB,KAASI,4BACjB7B,EAAKhiB,IAAI,4BAA6B,KAC1D,+BAEoBgiB,EAAKhiB,IAAI,gBAAiB,KAC9C,4CAGJ0jB,EAAoBtd,KAAK0d,IACvB/hB,KAAKzD,MAAMwlB,EAAK,CAAE7kB,cAEpB8C,KAAKqhB,WAAWC,WAIpB,QACE,IAAIU,EAAehmB,SAASimB,eAAe,gBAE3C,GADAD,EAAa3lB,aAAa,SAAU,SAC/B2D,KAAKmf,eACR,OAAOxjB,QAAQC,UAEjB,IAAIF,EAAUsE,KAAKmf,eAAe+C,UAQlC,OAPAliB,KAAKmf,eAAiB,KAElBnf,KAAKof,cACPpf,KAAKof,YAAc,KACnBpf,KAAKqf,UAAU6B,YAAY,MAC3BlhB,KAAKuf,eAAe2B,YAAY,KAAM,OAEjCxlB,GAGTa,MAAO,SAAsBW,EAASilB,GACpC,IAAIlC,EAAOjgB,KAAKigB,KACZmC,EAAe,CAACnC,EAAKhiB,IAAI,qBAC3B,CAAEokB,QAAS,KAASA,SAAW,IAC7BC,MAAO,KAASA,OAAS,KAC3B,2CAEEH,IACFC,EAAaloB,KACX+lB,EAAKhiB,IAAI,gBAAiB,CAAEf,QAASilB,EAASjlB,SAC5C,yBACAilB,EAASI,MACXH,EAAaloB,KACX+lB,EAAKhiB,IAAI,cAAe,CAAEskB,MAAOJ,EAASI,OACxC,sBAEAJ,EAASK,UACXJ,EAAaloB,KACX+lB,EAAKhiB,IAAI,aAAc,CAAEgW,KAAMkO,EAASK,UACtC,mBAEFL,EAASM,YACXL,EAAaloB,KACX+lB,EAAKhiB,IAAI,aAAc,CAAEykB,KAAMP,EAASM,YACtC,qBAKV,IAAIT,EAAehmB,SAASimB,eAAe,gBACvCU,EAAe3mB,SAASimB,eAAe,gBACvCW,EAAc5mB,SAASimB,eAAe,cAC1CD,EAAaa,gBAAgB,UAC7BF,EAAaxJ,YAAcjc,EAC3B0lB,EAAYE,QAAU,WACpBd,EAAa3lB,aAAa,SAAU,SAGtC,IAAI0mB,EAAgB/mB,SAASimB,eAAe,iBACxCe,EAAiBhnB,SAASimB,eAAe,iBACzCgB,EAAiBjnB,SAASimB,eAAe,iBAC7Ce,EAAeF,QAAU,WACvBC,EAAcF,gBAAgB,UAC9BG,EAAe3mB,aAAa,SAAU,QACtC4mB,EAAeJ,gBAAgB,UAC/BE,EAAc5hB,MAAM+R,OAAS6P,EAAcG,aAAe,MAE5DD,EAAeH,QAAU,WACvBC,EAAc1mB,aAAa,SAAU,QACrC2mB,EAAeH,gBAAgB,UAC/BI,EAAe5mB,aAAa,SAAU,SAExC2mB,EAAeH,gBAAgB,UAC/BI,EAAe5mB,aAAa,SAAU,QACtCV,QAAQ8B,IAAI2kB,GAAc/d,KAAK,SAAU8e,GACvCJ,EAAc1kB,MAAQ8kB,EAAMpY,KAAK,SAIrC,SAAUqY,GACR,IAAIC,EAAUrQ,KAAKsQ,MAAc,IAARF,IAErBC,EAAUrjB,KAAKqhB,WAAWgC,SAAWE,MAAMF,MAC7CrjB,KAAKqhB,WAAWgC,QAAUA,IAI9B,OAAQG,GACN,IAAIC,EAAWzjB,KAAKqf,UAAUqE,aAC9B,GACED,GAAYA,EAAW5E,IAAqBR,QAAQ,GACpDoF,EAAWzQ,KAAK2Q,KAAgB,GAAXF,GAAiB,GACtCA,EAAWzQ,KAAK4Q,IAAI7E,GAAW0E,WACtBD,GAASC,EAAW1E,IAC/B/e,KAAKqf,UAAUkC,kBAAoBkC,EACnCzjB,KAAKwf,gBAAgB,GAAGjF,iBAAiB,CAAC,CAACpS,KAAM,KAAM6U,QAAS,UAGlE,QAASwG,GACP,IAAIC,EAAWzjB,KAAKqf,UAAUqE,aAC9B,GACED,GAAYA,EAAW5E,IAAqBR,QAAQ,GACpDoF,EAAWzQ,KAAK6Q,MAAiB,GAAXJ,GAAiB,GACvCA,EAAWzQ,KAAKC,IAAI6L,GAAW2E,WACtBD,GAASC,EAAW3E,IAC/B9e,KAAKqf,UAAUkC,kBAAoBkC,GAGrC,SAAUjiB,GACR,IAAIyS,EAAOzS,EAAOvE,OAAOkY,MAAM,GAC/B,GAAIlB,EAAM,CACR,IAAI1C,EAAM8D,IAAIC,gBAAgBrB,GAC9BjU,KAAKggB,KAAK,CAACzO,UAIf,kBACE,MAAMyD,EAAOhV,KAAKiV,MAAM6O,aACxB9O,EAAKrH,SAGP,kBAAmBoW,GACjB/jB,KAAKsY,cAAgByL,EAAOC,gBClZkN,MCQhP,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,GAAiB,QAchC,IAAkB,GAAW,CAAChf,OAAA,KAAKwC,UAAA,KAAQvC,OAAA,KAAKG,aAAA,KAAWC,WAAA,KAAS8I,SAAA,KAAMrH,QAAA,KAAMuC,qBAAA,KAAkBwN,QAAA,KAAKC,SAAA,OCjCvG,IAAI,GAAS,WAAa,IAAI/W,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,YAAY,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,eAAe,GAAG,gBAAgB,GAAG,MAAQ,SAAS,CAAEN,EAAkB,eAAEI,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,GAAG,mBAAmB,OAAO,iBAAiB,IAAIwF,MAAM,CAACxH,MAAO0B,EAAO,IAAEuD,SAAS,SAAUwC,GAAM/F,EAAIkkB,IAAIne,GAAK7D,WAAW,QAAQ,CAAC9B,EAAG,iBAAiBA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,WAAW,CAACN,EAAIU,GAAG,qCAAqCN,EAAG,SAAS,CAACJ,EAAIU,GAAG,eAAe,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,WAAW,CAACN,EAAIU,GAAG,mCAAmCN,EAAG,SAAS,CAACJ,EAAIU,GAAG,sCAAsC,IAAI,GAAGV,EAAIY,MAAM,GAAGR,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,YAAY,CAAC8F,IAAI,YAAYnF,MAAM,CAACC,OAAmB,SAAXhB,EAAIkkB,KAAgB5jB,MAAM,CAAC,OAASN,EAAImkB,SAAS,eAAiBnkB,EAAIokB,eAAe,eAAiBpkB,EAAImZ,gBAAgB3X,GAAG,CAAC,UAAYxB,EAAIqkB,eAAejkB,EAAG,SAAS,CAACK,YAAY,OAAOM,MAAM,CAACC,OAAmB,SAAXhB,EAAIkkB,KAAgB5jB,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIiB,GAAIjB,EAAU,OAAE,SAASskB,EAAM3qB,GAAG,MAAO,CAACyG,EAAG,KAAK,CAACxB,IAAIjF,EAAE8G,YAAY,UAAU,CAACL,EAAG,KAAK,CAACJ,EAAIU,GAAGV,EAAI+B,GAAGuiB,EAAM9a,UAAUxJ,EAAIiB,GAAIqjB,EAAW,MAAE,SAAS3B,EAAK9nB,GAAG,MAAO,CAACuF,EAAG,KAAK,CAACxB,IAAI/D,GAAG,CAACmF,EAAIU,GAAG,mBAAmBV,EAAI+B,GAAG4gB,GAAM,wBAAwB,OAAO,IAAI,IAAI,GAAGviB,EAAG,sBAAsB,CAACK,YAAY,OAAOH,MAAM,CAAC,QAAU,GAAG,IAAM,GAAG,MAAQ,QAAQ,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIuY,YAAY,GAAGnY,EAAG,sBAAsB,CAACE,MAAM,CAAC,QAAU,GAAG,IAAM,GAAG,MAAQ,GAAG,MAAQ,OAAOwF,MAAM,CAACxH,MAAO0B,EAAY,SAAEuD,SAAS,SAAUwC,GAAM/F,EAAIwY,SAASzS,GAAK7D,WAAW,aAAa,CAAC9B,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIwS,SAAS,OAASxS,EAAIukB,kBAAkB/iB,GAAG,CAAC,UAAYxB,EAAIwkB,oBAAoB,YAAcxkB,EAAIykB,iBAAiB,gBAAkBzkB,EAAIykB,qBAAqB,IAAI,IACzxD,GAAkB,GCDlB,GAAS,WAAa,IAAIzkB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACK,YAAY,iBAAiBH,MAAM,CAAC,KAAO,GAAG,KAAO,KAAK,CAACF,EAAG,WAAW,CAACK,YAAY,OAAOiG,YAAY1G,EAAI2G,GAAG,CAAC,CAAC/H,IAAI,QAAQgI,GAAG,WAAW,MAAO,CAAC5G,EAAIU,GAAG,gDAAgDgkB,OAAM,KAAQ5e,MAAM,CAACxH,MAAO0B,EAAiB,cAAEuD,SAAS,SAAUwC,GAAM/F,EAAI2kB,cAAc5e,GAAK7D,WAAW,mBAAmB9B,EAAG,eAAe,CAACJ,EAAIU,GAAG,iCAAiCN,EAAG,SAAS,CAACK,YAAY,OAAOe,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAI4kB,aAAa5kB,EAAI4kB,eAAe,CAAC5kB,EAAIU,GAAGV,EAAI+B,GAAG/B,EAAI6kB,iBAAiB,GAAK7kB,EAAI4kB,YAAgyB5kB,EAAIY,KAAvxBR,EAAG,SAAS,CAACE,MAAM,CAAC,QAAU,GAAG,MAAQ,KAAK,CAACF,EAAG,oBAAoB,CAACE,MAAM,CAAC,MAAQN,EAAI8kB,sBAAsBhf,MAAM,CAACxH,MAAO0B,EAAmB,gBAAEuD,SAAS,SAAUwC,GAAM/F,EAAI+kB,gBAAgBhf,GAAK7D,WAAW,oBAAoBlC,EAAIiB,GAAIjB,EAAY,SAAE,SAAS4F,EAAQjM,GAAG,OAAOyG,EAAG,cAAc,CAACxB,IAAIjF,EAAE2G,MAAM,CAAC,MAAQ,KAAK,CAAEN,EAAiB,cAAEI,EAAG,qBAAqB,CAACK,YAAY,QAAQ,CAACL,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQsF,EAAQtE,OAAOE,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOzB,EAAIglB,gBAAgBpf,KAAWE,MAAM,CAACxH,MAAOsH,EAAc,OAAErC,SAAS,SAAUwC,GAAM/F,EAAIoX,KAAKxR,EAAS,SAAUG,IAAM7D,WAAW,qBAAqB,GAAGlC,EAAIY,KAAKR,EAAG,sBAAsB,CAACW,MAAM,CAAC,wBAAyBf,EAAI2kB,gBAAgB,CAAC3kB,EAAIU,GAAG,eAAeV,EAAI+B,GAAG6D,EAAQqf,MAAM,iBAAiB,KAAK,IAAI,GAAajlB,EAAe,YAAEI,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAKN,EAAIiB,GAAIjB,EAAY,SAAE,SAAS4F,EAAQjM,GAAG,OAAOyG,EAAG,cAAc,CAACxB,IAAIjF,EAAE2G,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,qBAAqB,CAACK,YAAY,QAAQ,CAACL,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQsF,EAAQtE,QAAQ,CAACtB,EAAIU,GAAG,iBAAiB,IAAI,GAAGN,EAAG,sBAAsB,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQsF,EAAQtE,OAAOwE,MAAM,CAACxH,MAAOsH,EAAY,KAAErC,SAAS,SAAUwC,GAAM/F,EAAIoX,KAAKxR,EAAS,OAAQG,IAAM7D,WAAW,mBAAmB,GAAG9B,EAAG,qBAAqB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIklB,cAActf,EAAQqf,SAAS,CAAC7kB,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,iBAAiB,MAAQ,mBAAmB,CAACN,EAAIU,GAAG,iDAAiD,IAAI,IAAI,KAAK,GAAGV,EAAIY,KAAKR,EAAG,iBAAiB,CAACA,EAAG,eAAe,CAACK,YAAY,OAAOH,MAAM,CAAC,MAAQ,eAAe,MAAQN,EAAImlB,eAAe,KAAO,GAAG,OAAS,GAAG,QAAU,GAAG,cAAc,YAAY3jB,GAAG,CAAC,eAAexB,EAAIolB,YAAYtf,MAAM,CAACxH,MAAO0B,EAAkB,eAAEuD,SAAS,SAAUwC,GAAM/F,EAAIqlB,eAAetf,GAAK7D,WAAW,qBAAqB,IAAI,IACn/E,GAAkB,G,wECgFP,IACb9E,KAAM,cACNyL,MAAO,CACLT,KAAMkd,OACNC,MAAO5a,MACPwa,eAAgBxa,MAChB6a,YAAazc,QACb0c,OAAQ9a,OAEVtR,KAAM,KAAM,CACVmZ,SAAU,GACV6S,eAAgB,KAChBN,gBAAiB,KACjBJ,eAAe,EACfe,oBAAoB,EACpBd,aAAa,IAEf3b,SAAU,CACR,uBACE,OAAI2H,OAAO+U,UAAU1lB,KAAK8kB,mBAAqB9kB,KAAK0kB,cAC3C1kB,KAAKuS,SAASvS,KAAK8kB,iBAAiBzjB,MAEtC,WAET,cACE,OAAIrB,KAAK2kB,YACA,YAEF,eAGXhF,MAAO,CACL,KAAMgG,GACsB,IAAtB3lB,KAAKslB,MAAM1rB,QACb,OACGgsB,IAAI,MACJA,IAAI,MACJC,QAAQF,EAAK3lB,KAAK8lB,kBAGzB,MAAOC,GAEL/lB,KAAKuS,SAAWwT,EAAKxmB,IAAI,CAAComB,EAAKK,KAC7B,MAAO,CACLhB,KAAMW,EACNtkB,MAAOrB,KAAKwlB,OAAOQ,IAAO,SAC1BpJ,QAAQ,MAKd,YAAa+I,GACX3lB,KAAKylB,mBAAqBE,GAE5B,cAAeA,GACTA,GACF3lB,KAAKuS,SAAS3N,QAAQqhB,GAAMA,EAAGrJ,QAAS,GACxC5c,KAAK+kB,kBACL/kB,KAAKylB,oBAAqB,IAE1BzlB,KAAKwF,MAAM,eACXxF,KAAKylB,oBAAqB,GAE5BzlB,KAAK8kB,gBAAkB,MAEzB,gBAAiBoB,GACVlmB,KAAK0kB,gBACR1kB,KAAKuS,SAAS3N,QAAQqhB,GAAMA,EAAGrJ,QAAS,GACpCjM,OAAO+U,UAAUQ,KACnBlmB,KAAKuS,SAAS2T,GAAKtJ,QAAS,GAE9B5c,KAAK+kB,oBAGT,YAAaxpB,GACPA,GACFyE,KAAK+kB,oBAIXtgB,QAAS,CACP,gBAAiBxF,EAAKxE,GACpBA,EAAOrB,KAAK+sB,WAAWvhB,QAAQwhB,IAC7BlnB,QAAQ8E,IAAIoiB,EAAO5M,YAIvB,aACE,GAAIxZ,KAAKolB,eAAexrB,OAAS,EAAG,CAClC,IAAIysB,EAAgBrmB,KAAKuS,SAAShT,IAAI+W,GAAKA,EAAEjV,OACzCilB,EAAWtmB,KAAKwlB,OAAOvd,OAAO5G,IAA2C,IAAlCglB,EAAcha,QAAQhL,IAAe,IAAM,SAClFklB,EAAa,CAACvB,KAAMhlB,KAAKolB,eAAgBxI,QAAQ,EAAMvb,MAAOilB,GAClEtmB,KAAKuS,SAASrY,KAAKqsB,GACnBvmB,KAAK+kB,gBAAgBwB,GACrBvmB,KAAKolB,eAAiB,KAI1B,cAAeoB,GACbxmB,KAAKuS,SAAWvS,KAAKuS,SAAStK,OAAOtC,GAAWA,EAAQqf,OAASwB,GACjExmB,KAAK+kB,mBAGP,gBAAiBpf,QACCtI,IAAZsI,GAA0BA,EAAQiX,OAGpC5c,KAAKwF,MAAM,YAAaxF,KAAKuS,SAAStK,OAAOqO,GAAKA,EAAEsG,SAFpD5c,KAAKwF,MAAM,kBAAmBG,EAAQqf,SC1LsM,M,yBCQhP,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,MAAiB,QAiBhC,IAAkB,GAAW,CAAC/f,OAAA,KAAKC,QAAA,KAAM4I,aAAA,QAAaE,WAAA,QAAW4I,aAAA,KAAU9P,QAAA,KAAMC,QAAA,KAAMC,YAAA,KAAUwB,mBAAA,KAAgBC,iBAAA,OAAiBC,kBAAA,KAAe+d,WAAA,KAAQrY,cAAA,O,oDCjClJ,SAASsY,GACdhU,EACAiU,EAAa,CACXC,SAAS,EACTC,aAAa,EACbC,aAAY,EACZC,YAAW,IAIb,IAAI/rB,EAAI0X,EAAIrF,OACTuD,QAAQ,gBAAiB,IACzBA,QAAQ,4BAA6B,IAExC,OAAO,KAAW5V,GAAG0rB,UAAUC,GAAYK,MAGtC,SAASC,GAAcC,GAC5B,IAAIlsB,EAAIksB,EACLtW,QAAQ,aAAc,IACtBA,QAAQ,iBAAkB,MAC1BzD,MAAM,KAAKlF,OAAOkf,GAAKA,EAAEvtB,QAAU,GACtC,OAAO,KAASwtB,gBAAgBpsB,GAAGuE,IAAI4nB,GAAKA,EAAE5T,eAGzC,SAAS8T,GAAiBC,GAC/B,IAAIC,EAAcD,EAAU1tB,OACxB2Y,EAAW,GACXiV,EAAgBF,EAAU/nB,IAAIgP,GAAOmY,GAAUnY,IACnD,IAAK,IAAIvS,KAAYwrB,EAAe,CAClC,IAAIC,EAAQR,GAAajrB,GACzB,IAAK,IAAI4J,KAAQ6hB,EAAO,CACtB,IAAIC,EAAUnV,EAAShT,IAAI0mB,GAAMA,EAAGrgB,MAAMyG,QAAQzG,IACjC,IAAb8hB,EACFnV,EAASrY,KAAK,CACZ0L,OACA+hB,GAAI,EACJC,IAAK5U,KAAK6U,MAAMN,GAAe,EAAIC,EAAcvf,OAAOsG,GAAOA,EAAI8E,SAASzN,IAAOhM,WAGrF2Y,EAASmV,GAASC,IAAM,GAI9B,IAAK,MAAMhiB,KAAW4M,EACpB5M,EAAQmiB,MAAQniB,EAAQgiB,GAAKhiB,EAAQiiB,IAEvC,OAAOrV,EAGF,SAASwV,IAAqB,KACnC5f,EAAI,YACJ6f,EAAc,OAEd,IAAIC,EAAY9f,EAAKgF,MAAM,MAAMlF,OAAOjN,GAAKA,EAAEpB,OAAS,IAAI2F,IAAK,CAACvE,EAAGtB,KACnE,MAAO,CACLwuB,OAAQxuB,EACRgZ,IAAK1X,EAAEqS,OACPoa,MAAOR,GAAaP,GAAU1rB,OAG9BmtB,EAAUH,GAA4BX,GAAgBY,EAAU1oB,IAAIvE,GAAKA,EAAE0X,MAC/E,IAAK,IAAIwU,KAAYe,EAAW,CAC9Bf,EAASY,MAAQ,EACjB,IAAIM,EAASlB,EAASO,MAAMloB,IAAIqG,GAAQshB,EAASO,MAAMxf,OAAOkf,GAAKA,IAAMvhB,GAAMhM,QAC3EstB,EAASO,MAAM7tB,SAEjBstB,EAASY,MAAQZ,EAASO,MACvBloB,IAAI,CAAC4nB,EAAGztB,KACP,IAAIguB,EAAUS,EAAQ5oB,IAAI4nB,GAAKA,EAAEvhB,MAAMyG,QAAQ8a,GAC3CkB,GAAuB,IAAbX,EAAkB,EAAIS,EAAQT,GAASE,IACrD,OAAOQ,EAAO1uB,GAAK2uB,IAEpBC,OAAO,CAAClb,EAAGsJ,IAAMtJ,EAAIsJ,GAExBwQ,EAASY,OAASZ,EAASO,MAAM7tB,QAMrC,IAAIa,EAASwtB,EACVhgB,OAAOjN,GAAKA,EAAEysB,MAAM7tB,OAAS,GAAKoB,EAAEysB,MAAM7tB,OAAS,KAAOoB,EAAE0X,IAAIW,SAAS,OAAUrY,EAAE0X,IAAIW,SAAS,MAClGoD,KAAK,CAACrJ,EAAGsJ,IAAMA,EAAEoR,MAAQ1a,EAAE0a,OAE3BrR,KAAK,CAACrJ,EAAGsJ,IAAMtJ,EAAE8a,OAASxR,EAAEwR,QAE/B,OAAOztB,EC1FT,IAAI,GAAS,WAAa,IAAIsF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAAEN,EAAe,YAAEI,EAAG,YAAY,CAACK,YAAY,WAAWH,MAAM,CAAC,KAAO,GAAG,MAAQ,KAAK,CAACF,EAAG,SAAS,CAACS,YAAY,CAAC,OAAS,QAAQP,MAAM,CAAC,iBAAiB,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAIkY,aAAa,CAAC9X,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,gCAAgC,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAImY,YAAY,CAAC/X,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,+BAA+B,GAAGN,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,SAAWN,EAAIgS,WAAW,GAAGxQ,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIgS,YAAY,KAAK,CAAC5R,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,uBAAuB,GAAGN,EAAG,QAAQ,CAAC4B,WAAW,CAAC,CAAC5E,KAAK,QAAQ6E,QAAQ,UAAU3D,MAAO0B,EAAc,WAAEkC,WAAW,eAAezB,YAAY,oBAAoBH,MAAM,CAAC,KAAO,OAAO,MAAQ,IAAI,KAAO,KAAK6B,SAAS,CAAC,MAASnC,EAAc,YAAGwB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOvE,OAAOkF,YAAqBpC,EAAIgS,WAAWvQ,EAAOvE,OAAOoB,WAAU0B,EAAIU,GAAG,MAAMV,EAAI+B,GAAG/B,EAAIoY,WAAW,YAAYhY,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,GAAG,SAAWN,EAAIgS,YAAYhS,EAAIoY,WAAW5W,GAAG,CAAC,MAAQ,SAASC,GAAQzB,EAAIgS,YAAY,KAAK,CAAC5R,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,wBAAwB,IAAI,GAAIV,EAAkB,eAAEI,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,IAAIkB,GAAG,CAAC,MAAQxB,EAAIqY,kBAAkB,CAACjY,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIU,GAAG,sBAAsB,GAAGV,EAAIY,MAAM,GAAGZ,EAAIY,KAAKR,EAAG,QAAQ,CAAC8F,IAAI,eAAezF,YAAY,SAASH,MAAM,CAAC,KAAO,QAAQkB,GAAG,CAAC,OAASxB,EAAIsY,YAAatY,EAAIokB,iBAAmBpkB,EAAIqf,YAAajf,EAAG,WAAW,CAACE,MAAM,CAAC,iBAAiB,GAAG,QAAQ,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,WAAWkB,GAAG,CAAC,MAAQxB,EAAIqY,kBAAkB,CAACjY,EAAG,SAAS,CAACJ,EAAIU,GAAG,qBAAqBV,EAAIU,GAAG,6BAA6B,IAAI,GAAGV,EAAIY,KAAKR,EAAG,eAAe,CAACK,YAAY,gBAAgBW,MAAM,CAAEpB,EAAIwoB,kBAAmBloB,MAAM,CAAC,GAAK,iBAAiB,CAACF,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACJ,EAAIU,GAAG,4BAA4B,GAAGN,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACJ,EAAIU,GAAG,8BAA8B,IAAI,GAAGN,EAAG,SAAS,CAACA,EAAG,MAAM,CAAC8F,IAAI,kBAAkB5F,MAAM,CAAC,GAAK,oBAAoB,CAACF,EAAG,MAAM,CAAC8F,IAAI,YAAYzF,YAAY,YAAYH,MAAM,CAAC,GAAK,cAAcF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,MAAM,CAACK,YAAY,aAAaL,EAAG,MAAM,CAACK,YAAY,cAAcL,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,OAAS,SAAS,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,qBAAqB,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,kBAAkBF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACN,EAAIU,GAAG,4CAA4CN,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,kBAAkB,CAACN,EAAIU,GAAG,8CAA8CN,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,sBAAsB,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,eAAe,CAACN,EAAIU,GAAG,mCAAmCN,EAAG,MAAM,CAACK,YAAY,cAAcL,EAAG,WAAW,CAACE,MAAM,CAAC,GAAK,gBAAgB,OAAS,OAAO,SAAW,mBAAmB,IACv7F,GAAkB,GCuEtB,KAASme,oBAAoBC,UAAY,oDAEzC,IAAI,GAAiB,QACjB,GAAW,uCACX,IAAc,EACd,GAAsB,IACtB,GAAY,IACZ,GAAY,GAGD,QACbthB,KAAM,YACNyL,MAAO,CACLuI,OAAQkU,OACRnM,eAAgBxO,MAChByZ,eAAgBrb,SAElB1P,KAAM,KAAM,CACV+lB,eAAgB,KAChBC,YAAa,KACbC,UAAW,KACXC,WAAY,KACZC,eAAgB,KAChBxN,WAAY,EACZwW,iBAAkB,CAChBC,KAAM,EACNpK,IAAK,EACL3Q,QAAS,UAGbzE,SAAU,CACR,YACE,OAAOhJ,KAAKof,YAAcpf,KAAKof,YAAY1L,SAAW,GAExD,aACE,IAAI+L,EAAM,IAAI,kBAAwB,cAAe,IACrD,OAAO,KAASC,OAAO1f,KAAM,aAAcyf,KAG/CE,MAAO,CACL,aACiC,kBAApB3f,KAAK+R,aACd/R,KAAK+R,WAAa6N,SAAS5f,KAAK+R,aAGlC/V,SAAS6jB,uBAAuB,QAAQ7f,KAAK+R,WAAa,GAAG+N,kBAG/D,SACE9f,KAAKggB,KAAK,CAACzO,IAAKvR,KAAKmR,UAGvB,iBACEnR,KAAKqf,UAAUoJ,aAAapkB,KAAK,KAC/B,IAAK,IAAI3K,EAAI,EAAGA,EAAIsG,KAAKmY,YAAaze,EAAG,CACvC,MAAMgvB,EAAW1oB,KAAKqf,UAAUsJ,YAAYjvB,GACxCgvB,EAASE,YACXF,EAASE,UAAU1P,eAAiBlZ,KAAKkZ,eACzCwP,EAASE,UAAUrO,yBAM7B,UACEva,KAAKigB,KAAO,eACZ,IAAI7F,EAAYpa,KAAKiV,MAAMiL,gBAC3BlgB,KAAKuf,eAAiB,IAAI,qBAC1Bvf,KAAK+Y,eAAiB,IAAI,wBAAkB,CAC1CoH,YAAangB,KAAKuf,iBAEpBvf,KAAKqf,UAAY,IAAI,gBAAsB,CACzCjF,UAAWA,EACX+F,YAAangB,KAAKuf,eAClBxG,eAAgB/Y,KAAK+Y,eACrBkH,KAAMjgB,KAAKigB,KACXG,eAAgB,EAChBC,cAAe,IAGjBrgB,KAAKqf,UAAUiB,uBACb,CAAC3H,EAAcE,EAAWC,EAAUE,GAAuB,KAC3D,OAAO,IAAI,GAA0B,CACnCL,eACAC,SAAU5Y,KAAKqf,UAAUzG,SACzBC,YACAC,WACAC,eACE/Y,KAAKqf,UAAUkB,qBACX,KAAOvgB,KAAKqf,UAAUtG,eAC5BC,sBACEhZ,KAAKqf,UAAUkB,sBAA+BvH,EAChDC,WAAY,GACZC,eAAgBlZ,KAAKkZ,gBAAkB,MAG3ClZ,KAAKuf,eAAeiB,UAAUxgB,KAAKqf,WACnCrf,KAAKsf,WAAa,IAAI,iBAAuB,CAC3Ca,YAAangB,KAAKuf,iBAEpBvf,KAAKuf,eAAekB,WAAWzgB,KAAKsf,YAMpCtf,KAAKiV,MAAMiL,gBAAgB1C,iBAAiB,QAAS/gB,IACnDuD,KAAKuoB,iBAAiBC,KAAO/rB,EAAMosB,QAAU,KAC7C7oB,KAAKuoB,iBAAiBnK,IAAM3hB,EAAMqsB,QAAU,QAGhDrkB,QAAS,CACP,KAAMX,GACJ,OAAI9D,KAAKmf,eACAnf,KAAK0gB,QAAQrc,KAAK,KACvB,OAAOrE,KAAKggB,KAAKlc,MAIrB9D,KAAKmf,eAAiB,KAAS7N,YAAY,CACzCC,IAAKzN,EAAOyN,IACZoP,aAAc,GACdC,QAAS,GACTC,WAAY,KAGd7gB,KAAKmf,eAAe2B,WAAcC,IAChC/gB,KAAKoK,SAAS2W,EAAaC,OAASD,EAAaE,QAG5CjhB,KAAKmf,eAAezjB,QAAQ2I,KAAK+a,IAUtC,OATApf,KAAKof,YAAcA,EACnBpf,KAAKqf,UAAU6B,YAAY9B,GAC3Bpf,KAAKuf,eAAe2B,YAAY9B,GAChCpf,KAAKsf,WAAW6B,WAAW,CAACC,YAAahC,EAAYgC,cACrDphB,KAAKqhB,WAAWC,OAChBthB,KAAKqf,UAAUkC,kBAAoB,KACnCvhB,KAAK+Y,eAAemI,YAAY9B,GAChCpf,KAAK+Y,eAAe0I,eACpBzhB,KAAKwF,MAAM,YAAa4Z,GACjBA,GACLsC,IACF,IAEIC,EAFAzkB,EAAUwkB,GAAaA,EAAUxkB,QACjC+iB,EAAOjgB,KAAKigB,KAKd0B,EAFED,aAAqB,KAASE,oBAEV3B,EAAKhiB,IAAI,qBAAsB,KACnD,kCACOyjB,aAAqB,KAASG,oBAEjB5B,EAAKhiB,IAAI,qBAAsB,KACnD,qBACOyjB,aAAqB,KAASI,4BACjB7B,EAAKhiB,IAAI,4BAA6B,KAC1D,+BAEoBgiB,EAAKhiB,IAAI,gBAAiB,KAC9C,4CAGJ0jB,EAAoBtd,KAAK0d,IACvB/hB,KAAKzD,MAAMwlB,EAAK,CAAE7kB,cAEpB8C,KAAKqhB,WAAWC,WAIpB,QACE,IAAIU,EAAehmB,SAASimB,eAAe,gBAE3C,GADAD,EAAa3lB,aAAa,SAAU,SAC/B2D,KAAKmf,eACR,OAAOxjB,QAAQC,UAEjB,IAAIF,EAAUsE,KAAKmf,eAAe+C,UAQlC,OAPAliB,KAAKmf,eAAiB,KAElBnf,KAAKof,cACPpf,KAAKof,YAAc,KACnBpf,KAAKqf,UAAU6B,YAAY,MAC3BlhB,KAAKuf,eAAe2B,YAAY,KAAM,OAEjCxlB,GAGTa,MAAO,SAAsBW,EAASilB,GACpC,IAAIlC,EAAOjgB,KAAKigB,KACZmC,EAAe,CAACnC,EAAKhiB,IAAI,qBAC3B,CAAEokB,QAAS,KAASA,SAAW,IAC7BC,MAAO,KAASA,OAAS,KAC3B,2CAEEH,IACFC,EAAaloB,KACX+lB,EAAKhiB,IAAI,gBAAiB,CAAEf,QAASilB,EAASjlB,SAC5C,yBACAilB,EAASI,MACXH,EAAaloB,KACX+lB,EAAKhiB,IAAI,cAAe,CAAEskB,MAAOJ,EAASI,OACxC,sBAEAJ,EAASK,UACXJ,EAAaloB,KACX+lB,EAAKhiB,IAAI,aAAc,CAAEgW,KAAMkO,EAASK,UACtC,mBAEFL,EAASM,YACXL,EAAaloB,KACX+lB,EAAKhiB,IAAI,aAAc,CAAEykB,KAAMP,EAASM,YACtC,qBAKV,IAAIT,EAAehmB,SAASimB,eAAe,gBACvCU,EAAe3mB,SAASimB,eAAe,gBACvCW,EAAc5mB,SAASimB,eAAe,cAC1CD,EAAaa,gBAAgB,UAC7BF,EAAaxJ,YAAcjc,EAC3B0lB,EAAYE,QAAU,WACpBd,EAAa3lB,aAAa,SAAU,SAGtC,IAAI0mB,EAAgB/mB,SAASimB,eAAe,iBACxCe,EAAiBhnB,SAASimB,eAAe,iBACzCgB,EAAiBjnB,SAASimB,eAAe,iBAC7Ce,EAAeF,QAAU,WACvBC,EAAcF,gBAAgB,UAC9BG,EAAe3mB,aAAa,SAAU,QACtC4mB,EAAeJ,gBAAgB,UAC/BE,EAAc5hB,MAAM+R,OAAS6P,EAAcG,aAAe,MAE5DD,EAAeH,QAAU,WACvBC,EAAc1mB,aAAa,SAAU,QACrC2mB,EAAeH,gBAAgB,UAC/BI,EAAe5mB,aAAa,SAAU,SAExC2mB,EAAeH,gBAAgB,UAC/BI,EAAe5mB,aAAa,SAAU,QACtCV,QAAQ8B,IAAI2kB,GAAc/d,KAAK,SAAU8e,GACvCJ,EAAc1kB,MAAQ8kB,EAAMpY,KAAK,SAIrC,SAAUqY,GACR,IAAIC,EAAUrQ,KAAKsQ,MAAc,IAARF,IAErBC,EAAUrjB,KAAKqhB,WAAWgC,SAAWE,MAAMF,MAC7CrjB,KAAKqhB,WAAWgC,QAAUA,IAI9B,OAAQG,GACN,IAAIC,EAAWzjB,KAAKqf,UAAUqE,aAC9B,GACED,GAAYA,EAAW,IAAqBpF,QAAQ,GACpDoF,EAAWzQ,KAAK2Q,KAAgB,GAAXF,GAAiB,GACtCA,EAAWzQ,KAAK4Q,IAAI,GAAWH,WACtBD,GAASC,EAAW,IAC/BzjB,KAAKqf,UAAUkC,kBAAoBkC,GAGrC,QAASD,GACP,IAAIC,EAAWzjB,KAAKqf,UAAUqE,aAC9B,GACED,GAAYA,EAAW,IAAqBpF,QAAQ,GACpDoF,EAAWzQ,KAAK6Q,MAAiB,GAAXJ,GAAiB,GACvCA,EAAWzQ,KAAKC,IAAI,GAAWwQ,WACtBD,GAASC,EAAW,IAC/BzjB,KAAKqf,UAAUkC,kBAAoBkC,GAGrC,SAAUjiB,GACR,IAAIyS,EAAOzS,EAAOvE,OAAOkY,MAAM,GAC/B,GAAIlB,EAAM,CACR,IAAI1C,EAAM8D,IAAIC,gBAAgBrB,GAC9BjU,KAAKggB,KAAK,CAACzO,UAIf,kBACE,MAAMyD,EAAOhV,KAAKiV,MAAM6O,aACxB9O,EAAKrH,WCnWuO,M,mCCS9O,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,MAAiB,QAWhC,IAAkB,GAAW,CAAC1I,OAAA,KAAK8jB,cAAA,KAAW7jB,QAAA,KAAMiJ,SAAA,KAAMrH,QAAA,KAAMY,WAAA,KAAQG,SAAA,UCyDzD,QACb1K,KAAM,cACNiK,WAAY,CAEV4hB,aACAhK,gBACAiK,gBAEF7vB,KAAM,KAAM,CACVoK,KAAM,KACNwL,aAAc,KACdoQ,YAAa,KACb9S,QAAS,KACT4X,SAAU,KACV5L,QAAS,KACT4Q,SAAU,KACV3Q,UAAU,EACV0L,IAAK,QACLkF,OAAQ,KACR5W,SAAU,GACV2G,eAAgB,KAChBiL,gBAAgB,EAChBG,iBAAkB,CAChB,SACA,OACA,SACA,OACA,QACA,OACA,WAGJtb,SAAU,CACR,YACE,OAAOhJ,KAAKof,YAAcpf,KAAKof,YAAY1L,SAAW,IAG1D,UACE1T,KAAKgP,aAAehP,KAAK6D,OAAOC,OAAOkL,aACvChP,KAAKsM,QAAUtM,KAAK6D,OAAOC,OAAOwI,SAEpC,gBACE,GAAItM,KAAKgP,cAAgBhP,KAAKsM,QAAS,CACrC,IAAIiF,QAAY6C,GAAcpU,KAAKgP,aAAchP,KAAKsM,SACtD,IACEtM,KAAKkkB,SAAW3S,EAChB,MAAMhV,GACN2C,QAAQ8E,IAAIzH,SAGdyD,KAAKmkB,gBAAiB,GAG1B1f,QAAS,CACP,kBAAmBsf,GACjB/jB,KAAKof,YAAc2E,EACnB/jB,KAAKsY,cAAgByL,EAAOC,aAC5BhkB,KAAKkpB,eAAiBlpB,KAAKopB,gBAC3BppB,KAAKuS,SAAWvS,KAAKqpB,cAAcrpB,KAAKkpB,SAAS,KAGnD,sBACE,IAAI5V,EAAQ,GACZ,IAAK,IAAI5Z,EAAI,EAAGA,EAAIsG,KAAKmY,UAAWze,IAAK,CACvC,IAAIuY,QAAajS,KAAKof,YAAYpN,QAAQtY,GACtCyO,QAAa8J,EAAKC,iBACtBoB,EAAQA,EAAQ,SAAWnL,EAAKiK,MAAM7S,IAAIjB,GAAKA,EAAEoU,KAAK3H,KAAK,UAG7D,GAAqB,OAAjB/K,KAAKsY,QACP,MAAO,CAAChF,GACH,CACL,IAAIgW,EAAYtpB,KAAKsY,QAAQ/Y,IAAIvE,GAAKA,EAAEuO,OACxC,OAAOvJ,KAAKupB,eAAejW,EAAOgW,KAItC,sBAAuB/W,GACrB,OAAOvS,KAAKkpB,SAAS3pB,IAAIiqB,IACvB,IAAIvB,EAAYuB,EAAQrc,MAAM,KAE1Bsc,EAAU,IAAI/e,MAAMud,EAAUruB,QAkClC,OAjCAquB,EAAUrjB,QAAQ,CAACsiB,EAAUgB,KAC3B,IAAIwB,EAAQ,GACRhX,EAAMwU,EAAS3T,cAAc3C,QAAQ,WAAY,KAClDA,QAAQ,MAAO,IAElB2B,EAAS3N,QAAQe,IACX+M,EAAIW,SAAS1N,GACf+jB,EAAM/jB,GAAW,EAEjB+jB,EAAM/jB,GAAW,EAEnB,IAAI2f,EAAQ3f,EAAQwH,MAAM,KAC1BmY,EAAM1gB,QAAQogB,IACRtS,EAAIW,SAAS2R,KACf0E,EAAM/jB,IAAY,EAAI2f,EAAM1rB,YAIlC,IAAI+vB,EAAQ,QACRC,EAAW,EACXC,EAAQ,EACZtX,EAAS3N,QAAQe,IACX+jB,EAAM/jB,GAAWikB,IACnBA,EAAWF,EAAM/jB,GACjBgkB,EAAQhkB,GAEVkkB,GAASH,EAAM/jB,KAEb+M,EAAIhC,MAAM,2BACZmZ,GAAS,GAEXJ,EAAQvB,GAAU,CAAChB,WAAUwC,QAAOC,QAAOE,QAAO3B,YAE7CuB,KAIX,oBAAqBlX,GACnB,IAAI+S,EAAQ/S,EAAShT,IAAI+W,GAAGA,EAAE0O,MAC1B8E,EAAoB9pB,KAAK+pB,sBAAsBzE,GAClD/lB,IAAIiqB,IACH,IAAIlT,EAAItD,KAAK4Q,IAAI5Q,KAAK2Q,KAAsB,GAAjB6F,EAAQ5vB,QAA8B,EAAf0rB,EAAM1rB,QACxD,OAAO4vB,EAAQ/S,KAAK,CAACrJ,EAAGsJ,IAAMA,EAAEmT,MAAQzc,EAAEyc,OAAOvqB,MAAM,EAAGgX,GAAGG,KAAK,CAACrJ,EAAGsJ,IAAMtJ,EAAE8a,OAASxR,EAAEwR,UAEvF8B,EAAoBhqB,KAAY,QAAI8pB,EAAkBxqB,MAAM,GAAI,GAAKwqB,EACzE9pB,KAAKkZ,eAAiB,GAAGrF,UAAUmW,EAAiBzqB,IAAIiqB,IACtD,OAAOA,EAAQjqB,IAAImjB,IACjB,IAAIuH,EAAa3E,EAAMjZ,QAAQqW,EAAKiH,OACpC,MAAO,CACL3M,SAA0B,IAAhBiN,EAAqB,OAAQ1X,EAAS+S,EAAMjZ,QAAQqW,EAAKiH,QAAQtoB,MAC3E8G,KAAMua,EAAKwE,SAAStW,QAAQ,WAAY,IAAIvD,OAC5Csc,MAAOjH,EAAKiH,SAEb1hB,OAAOjN,IAAiC,IAA5BsqB,EAAMjZ,QAAQrR,EAAE2uB,WAGjC3pB,KAAKkqB,cAAcF,IAGrB,iBAAkBG,GAEdnqB,KAAKkZ,oBADiB7b,IAApB8sB,EACoB,GAEAnqB,KAAKkZ,eAAejR,OAAOmiB,GAAMA,EAAGT,QAAUQ,IAIxE,cAAelC,GACb,IAAIqB,EAAatpB,KAAY,QAAIA,KAAKsY,QAAQ/Y,IAAIvE,GAAKA,EAAEuO,OAAS,CAAC,WACnEvJ,KAAKmpB,OAASlB,EAAU1oB,IAAI,CAAC8qB,EAAK3wB,KAChC,MAAO,CACL6P,MAAO+f,EAAU5vB,GACjB4wB,MAAOD,EAAI9qB,IAAIvE,GAAKA,EAAEksB,SAAStW,QAAQ,WAAY,KAAKA,QAAQ,MAAO,IAAIvD,YAKjF,gBAAiBiG,GACf,IAAI2U,EACJ,GAAqB,OAAjBjoB,KAAKsY,QACP2P,EAAY,CAACF,GAAoB,CAAC5f,KAAMmL,EAAM,UACzC,CACL,IAAIiX,EAAYjX,EAAMhU,MAAM,GACxBiT,EAAW8U,GAAgBkD,GAAW9T,KAAK,CAACrJ,EAAGsJ,IAAMA,EAAEoR,MAAQ1a,EAAE0a,OAAOxoB,MAAM,EAAG,IACrF2oB,EAAYsC,EAAUhrB,IAAI4I,GAAQ4f,GAAoB,CAAC5f,OAAMggB,QAAS5V,KAExE,OAAO0V,GAGT,cAAeuC,GACb,IAAIlX,EAAQkX,EAAQ5Z,QAAQ,WAAY,KACpC6B,EAAe,2BAA6BgY,KAAKnX,GACjDoX,EAAkBpX,EAAMlI,OAAO,iBAC/Buf,EAAarX,EAAMhU,MAAMmT,EAAavR,MAAQuR,EAAa,GAAG7Y,OAAQ8wB,GACtEE,EAAa,GACjBD,EAAWja,MAAM,YAAY9L,QAASjH,IACpC,IAAIktB,EAAKD,EAAWrrB,IAAI3B,GAAKA,EAAEktB,MAAMze,QAAQ1O,IACjC,IAARktB,EACFD,EAAW1wB,KAAK,CAAC4wB,KAAMntB,EAAG4Y,MAAO,IAEjCqU,EAAWC,GAAItU,UAGnB,IAAIwU,EAAYH,EAAWnU,KAAK,CAACrJ,EAAGsJ,IAAMA,EAAEH,MAAQnJ,EAAEmJ,OAAO,GAAGuU,KAC5DvY,EAAWoY,EACZxd,MAAM4d,GACNxrB,IAAI+W,GAAKA,EAAEjJ,OAAOkG,eAClBtL,OAAOqO,GAAKA,EAAE1c,OAAS,GACvB2F,IAAI+W,GAAKoQ,GAAUpQ,EAAE1F,QAAQ,iBAAkB,IAAIzD,MAAM,KAAKlF,OAAOkf,GAAKA,EAAE9Z,OAAOzT,OAAS,GAAGmR,KAAK,OACvG,OAAOwH,GAGT,eAAgBe,EAAOgW,GACrB,IAEI0B,EAFAC,EAAe3B,EAAU1vB,OACzBsxB,EAAe,GAEnB,IAAK,IAAIxxB,EAAI,EAAGA,EAAIuxB,EAAcvxB,IAAK,CACrC,IAAIyxB,EAAW7B,EAAU5vB,GAAGyT,MAAM,KAAK5N,IAAIvE,GAAKA,EAAEowB,eAC9C3a,EAAU0a,EAAS5rB,IAAI8rB,IACzB,OAAOA,EAAGle,MAAM,IAAIpC,KAAK,iBACxBA,KAAK,eACJugB,EAAQ,IAAIjb,OAAO,GAAII,GACvBC,EAAQ4C,EAAM5C,MAAM4a,GACpB5a,GACFsa,EAAata,EAAMxP,MAAQwP,EAAM,GAAG9W,OACpCsxB,EAAahxB,KAAKoZ,EAAMwI,UAAU,EAAGkP,IACrC1X,EAAQA,EAAMwI,UAAUkP,IAExBA,GAAc,EAMlB,OAHoB,IAAhBA,GACFE,EAAahxB,KAAKoZ,GAEb4X,KChTkO,M,yBCQ3O,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIa,MAAiB,QAchC,IAAkB,GAAW,CAAClmB,OAAA,KAAKwC,UAAA,KAAQtC,QAAA,KAAME,aAAA,KAAWC,WAAA,KAASyB,QAAA,KAAMuC,qBAAA,KAAkBwN,QAAA,KAAKC,SAAA,KAAMyU,eAAA,OCxBxG,OAAI3F,IAAI,QAER,IAAI4F,GAAS,IAAI,OAAO,CACtBjtB,KAAM,UACNktB,KAAM,oBACNC,OAAQ,CA8BN,CACEnnB,KAAM,IACNpH,KAAM,SACNoD,UAAWorB,OAUjBH,GAAOI,WAAW,CAACC,EAAIC,EAAMC,KAC3B,MAAMC,EAAcH,EAAGI,QAAQC,KAAK3nB,GAAQA,EAAK4nB,KAAKH,aAClDA,EACFtoB,EAAaF,IACNA,EAGHuoB,IAFAA,EAAK,yBAA2BF,EAAGtnB,QAMvCwnB,MAIW,U,aCtEf,OAAInG,IAAI,SAEO,WAAI,QAAKwG,MAAM,CAC5BjjB,MAAO,CACL3F,KAAM,KACN4F,kBAAkB,GAEpBijB,UAAW,CACT,QAASljB,EAAO3F,GACd2F,EAAM3F,KAAOA,GAEf,uBAAwB2F,GACtBA,EAAMC,kBAAoBD,EAAMC,mBAGpCkjB,QAAS,CACPnpB,QAASgG,GAAS,KAChB,OAAOA,EAAM3F,OAGjBwG,QAAS,CACP,eAAe,OAACzC,GAAS/D,GACvB+D,EAAO,UAAW/D,O,aCrBxB,OAAIoiB,IAAI,SAEO,WAAI,QAAQ,CACzB2G,MAAO,CACLC,SAAU,SCPP,MAAMC,GAAiB,CAC5BC,OAAQ,0CACRC,WAAY,2BACZC,YAAa,kCACbC,UAAW,WACXC,cAAe,uBACfC,kBAAmB,eACnBC,MAAO,uC,UCKT,OAAIC,OAAOC,eAAgB,EAE3B,mBAAuBT,IAEvB,IAAI,OAAI,CACNjB,OAAA,GACA2B,SACAC,WACAttB,OAAQutB,GAAKA,EAAEC,KACdC,OAAO,S,+KCrBVlyB,EAAOD,QAAU,IAA0B,yB,2DCA3C,yBAA+f,EAAG,G,kCCAlgB,yBAA6f,EAAG,G,gFCAhgB,yBAAqhB,EAAG,G,kCCAxhB,yBAAkhB,EAAG,G,kCCArhB,yBAAqhB,EAAG,G,kCCAxhB,yBAA0hB,EAAG,G,mBCA7hBC,EAAOD,QAAU,82D,yDCAjB,yBAA4hB,EAAG,G","file":"js/app.f4f48f07.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"pdfjsWorker\":\"pdfjsWorker\"}[chunkId]||chunkId) + \".\" + {\"pdfjsWorker\":\"54d3daa0\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/paperlax-reader/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/google.1cdc8fce.svg\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeywordList.vue?vue&type=style&index=0&id=0787166c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeywordList.vue?vue&type=style&index=0&id=0787166c&scoped=true&lang=css&\"","var map = {\n\t\"./google.png\": \"cebc\",\n\t\"./google.svg\": \"0895\",\n\t\"./logo.svg\": \"9b19\",\n\t\"./style.css\": \"7d05\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"1771\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=7f1e49e1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=7f1e49e1&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=style&index=0&id=11b2bdc6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=style&index=0&id=11b2bdc6&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAuth.vue?vue&type=style&index=0&id=b4d6d81a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAuth.vue?vue&type=style&index=0&id=b4d6d81a&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionView.vue?vue&type=style&index=0&id=45bebed2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionView.vue?vue&type=style&index=0&id=45bebed2&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n","import mod from \"-!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=b1bcf7c0&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-content',[_c('v-container',{staticClass:\"fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"8\",\"md\":\"4\"}},[_c('v-card',{staticClass:\"pa-5\"},[_c('div',{staticClass:\"ma-10\"},[_c('h1',[_vm._v(\"PaperLax\")]),_c('h3',[_vm._v(\"Sign in to enjoy all features\")])]),(!_vm.showUI)?_c('div',{staticStyle:{\"margin-top\":\"20%\"}},[_c('h2',[_vm._v(\"Signing in\")]),_c('v-progress-circular',{staticClass:\"ma-5 pa-5\",attrs:{\"width\":5,\"size\":100,\"color\":\"blue\",\"indeterminate\":\"\"}}),_c('h2',[_vm._v(\"Explore and Discover\")]),_c('h3',[_vm._v(\"by standing on the shoulders of giants\")])],1):_vm._e(),(!_vm.isSignedIn)?_c('div',{class:{hidden: !_vm.showUI}},[_c('div',_vm._l((_vm.OauthProviders),function(auth,index){return _c('div',{key:index,attrs:{\"xs12\":\"\"}},[_c('button',{staticClass:\"signin-button\",style:({'background-color': auth.backgroundColor, color: auth.textColor}),on:{\"click\":function($event){return _vm.signIn(auth.provider)}}},[(auth.image)?_c('img',{staticClass:\"button-icon\",attrs:{\"width\":\"24\",\"src\":require('@/assets/' + auth.image)}}):_c('i',{staticClass:\"button-icon\",class:auth.icon,style:({color: auth.iconColor})}),_c('div',[_vm._v(\"Sign in with \"+_vm._s(auth.name))])])])}),0),_c('div',{staticClass:\"strike\"},[_c('span',[_vm._v(\"or\")])]),_c('div',[_c('div',{staticClass:\"email-form\"},[_c('div',[_c('label',[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],attrs:{\"type\":\"text\",\"label\":\"Email*\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('div',[_c('label',[_vm._v(\"Password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"label\":\"Password*\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})])]),_c('div',[_c('div',{staticClass:\"pa-5\"},[_c('v-btn',{staticClass:\"signin-button\",on:{\"click\":function($event){return _vm.signIn()}}},[_vm._v(\"\\n                      Sign in with Email\\n                    \")])],1)])])]):_vm._e()])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as firebase from 'firebase/app'\nimport 'firebase/auth'\n\nconst AuthProviders = {\n  email: firebase.auth.EmailAuthProvider,\n  google: firebase.auth.GoogleAuthProvider\n}\n\nexport function fetchUserInfo (firebaseUser) {\n  return {\n    uid: firebaseUser.uid,\n    name: firebaseUser.displayName,\n    email: firebaseUser.email,\n    photo: firebaseUser.photoURL,\n    isNew: firebaseUser.metadata.lastSignInTime === firebaseUser.metadata.creationTime\n  }\n}\n\nexport function signInWithRedirect (providerName = 'google') {\n  let AuthProvider = AuthProviders[providerName] || AuthProviders.google\n  return firebase.auth().signInWithRedirect(new AuthProvider())\n}\n\nexport function signInWithPopup (providerName = 'google') {\n  let AuthProvider = AuthProviders[providerName] || AuthProviders.google\n  return firebase.auth().signInWithPopup(new AuthProvider())\n}\n\nexport function signOut () {\n  return firebase.auth().signOut()\n}\n\nexport function getUser () {\n  let currentUser = firebase.auth().currentUser\n  if (currentUser) {\n    return fetchUserInfo(currentUser)\n  }\n  return null\n}\n\nexport function requestUserInfo (callback) {\n  return firebase.auth().onAuthStateChanged(user => {\n    let authUser = null\n    if (user) {\n      authUser = fetchUserInfo(user)\n    }\n    callback(authUser)\n  })\n}\n\nexport function onUserSignIn (callback) {\n  return requestUserInfo(callback)\n}\n","<template>\n  <v-app>\n    <v-content>\n      <v-container\n        class=\"fill-height\"\n        fluid\n      >\n        <v-row\n          align=\"center\"\n          justify=\"center\"\n        >\n          <v-col\n            cols=\"12\"\n            sm=\"8\"\n            md=\"4\"\n          >\n            <v-card class=\"pa-5\">\n              <div class=\"ma-10\">\n                <h1>PaperLax</h1>\n                <h3>Sign in to enjoy all features</h3>\n              </div>\n              <div v-if=\"!showUI\" style=\"margin-top: 20%;\">\n                <h2>Signing in</h2>\n                <v-progress-circular\n                  :width=\"5\"\n                  :size=\"100\"\n                  color=\"blue\"\n                  class=\"ma-5 pa-5\"\n                  indeterminate\n                ></v-progress-circular>\n                <h2>Explore and Discover</h2>\n                <h3>by standing on the shoulders of giants</h3>\n              </div>\n              <div :class=\"{hidden: !showUI}\" v-if=\"!isSignedIn\">\n                <div>\n                  <div xs12 v-for=\"(auth, index) in OauthProviders\" :key=\"index\">\n                    <button  :style=\"{'background-color': auth.backgroundColor, color: auth.textColor}\" class=\"signin-button\" @click=\"signIn(auth.provider)\">\n                      <img v-if=\"auth.image\" width=\"24\" class=\"button-icon\" :src=\"require('@/assets/' + auth.image)\" />\n                      <i v-else class=\"button-icon\" :class=\"auth.icon\" :style=\"{color: auth.iconColor}\"></i>\n                      <div>Sign in with {{auth.name}}</div>\n                    </button>\n                  </div>\n                </div>\n                <div class=\"strike\">\n                  <span>or</span>\n                </div>\n                <div>\n                  <div class=\"email-form\">\n                    <div>\n                      <label>Email</label>\n                      <input type=\"text\" label=\"Email*\" v-model=\"email\">\n                    </div>\n                    <div>\n                      <label>Password</label>\n                      <input type=\"password\" label=\"Password*\" v-model=\"password\">\n                    </div>\n                  </div>\n                  <div>\n                    <div class=\"pa-5\">\n                      <v-btn class=\"signin-button\" @click=\"signIn()\">\n                        Sign in with Email\n                      </v-btn>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport { signOut } from '@/Firebase/auth'\nimport * as firebase from 'firebase/app'\n// TODO: allow signup with Email\nexport default {\n  data: () => ({\n    email: null,\n    password: null,\n    isSignedIn: false,\n    user: null,\n    showUI: false,\n    OauthProviders: [\n      {\n        name: 'Google',\n        image: 'google.png',\n        iconColor: '#4285F4',\n        backgroundColor: '#fafafa',\n        textColor: '#555',\n        provider: new firebase.auth.GoogleAuthProvider()\n      },\n      {\n        name: 'Facebook',\n        icon: 'fab fa-facebook',\n        textColor: '#fff',\n        backgroundColor: '#3b5998',\n        provider: new firebase.auth.FacebookAuthProvider()\n      }\n    ]\n  }),\n  created () {\n    if (this.$route.params.action === 'signout') {\n      console.log('signout')\n      signOut()\n      this.isSignedIn = false\n      this.showUI = true\n    } else {\n      let redirectURL = this.$route.query.redirect || '/'\n      firebase.auth().getRedirectResult().then(result => {\n        this.user = result.user\n        if (this.user) {\n          this.isSignedIn = true\n          this.$router.push({path: redirectURL})\n        } else {\n          this.isSignedIn = false\n          this.showUI = true\n        }\n      }).catch(error => {\n        // TODO: check if email account exists, like the same email have been used by multiple social media\n        console.log(error)\n      })\n    }\n  },\n  methods: {\n    signIn (provider) {\n      if (provider === undefined) {\n        if (this.email && this.password) {\n          firebase.auth().signInWithEmailAndPassword(this.email, this.password).catch(error => {\n            console.log(error)\n          })\n        } else {\n          document.querySelectorAll('input').forEach(elm => {\n            elm.style.border = '1px solid red'\n          })\n        }\n      } else {\n        firebase.auth().signInWithRedirect(provider)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.hidden {\n  display: none;\n}\n\n.signin-button {\n  background-color: #eee;\n  padding: 10px;\n  margin: 1em;\n  width: 210px;\n\n  vertical-align: middle;\n  font-weight: bold;\n  text-transform: none;\n  box-shadow: 1px 2px #eee;\n}\n\n.signin-button > div {\n  margin-left: 0px;\n  vertical-align: middle;\n  line-height: 24px;\n  padding: auto 0;\n}\n\n.signin-button i {\n  font-size: 1.6em;\n  vertical-align: middle;\n  margin-right: 0.5em;\n}\n\n.button-icon {\n  float: left;\n}\n\n.email-form {\n  text-align: left;\n  max-width: 260px;\n  margin: 0 auto;\n}\n\n.email-form div {\n  margin: 1em;\n}\n\n.email-form input {\n  border: 1px solid #ccc;\n  width: 100%;\n  padding: 0.5em;\n}\n\n.strike {\n  display: block;\n  text-align: center;\n  overflow: hidden;\n  white-space: nowrap;\n  margin: 2em;\n}\n\n.strike > span {\n  position: relative;\n  display: inline-block;\n  font-size: 1.5em;\n}\n\n.strike > span:before,\n.strike > span:after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  width: 9999px;\n  height: 1px;\n  background: #ccc;\n}\n\n.strike > span:before {\n  right: 100%;\n  margin-right: 15px;\n}\n\n.strike > span:after {\n  left: 100%;\n  margin-left: 15px;\n}\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAuth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAuth.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAuth.vue?vue&type=template&id=b4d6d81a&scoped=true&\"\nimport script from \"./UserAuth.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAuth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserAuth.vue?vue&type=style&index=0&id=b4d6d81a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4d6d81a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VBtn,VCard,VCol,VContainer,VContent,VProgressCircular,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('NavigationDrawer',{attrs:{\"temporary\":true}}),_c('v-content',[_c('AppBar'),_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"align-top\":\"\",\"justify-center\":\"\",\"pa-3\":\"\"}},[_c('v-flex',{staticClass:\"pa-1\",attrs:{\"xs2\":\"\"}},[_c('v-card',{staticClass:\"pa-2\",attrs:{\"flat\":\"\"}},[_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('export')}}},[_c('v-icon',{attrs:{\"color\":\"primary\",\"title\":\"export\"}},[_vm._v(\"mdi-export\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"primary\",\"title\":\"settings\"}},[_vm._v(\"mdi-settings\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"green\"}},[_vm._v(\"mdi-share-variant\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"green\"}},[_vm._v(\"mdi-star-outline\")])],1)],1),_c('v-card-title',[_vm._v(\"\\n              \"+_vm._s(_vm.collection.name)+\"\\n            \")]),_c('v-card-text',{staticClass:\"text-left\"},[_vm._v(\"\\n              \"+_vm._s(_vm.collection.description)+\"\\n            \")])],1),_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-title',_vm._l((_vm.keywords),function(keyword,index){return _c('v-list',{key:index,staticClass:\"pa-0\"},[_c('v-list-item',[_c('v-checkbox',{attrs:{\"label\":keyword.word,\"value\":keyword.word},model:{value:(_vm.selectedKeywords),callback:function ($$v) {_vm.selectedKeywords=$$v},expression:\"selectedKeywords\"}})],1)],1)}),1)],1)],1),_c('v-flex',{staticClass:\"pa-1\",attrs:{\"xs7\":\"\"}},[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.selectPdfFiles}},[_c('v-icon',{attrs:{\"title\":\"add papers\"}},[_vm._v(\"mdi-plus\")]),_vm._v(\"Add Paper\\n            \")],1),_c('v-spacer'),_c('v-text-field',{attrs:{\"single-line\":\"\",\"hide-details\":\"\",\"label\":\"Search\",\"append-icon\":\"mdi-search\"}})],1),_c('PdfImporter',{ref:\"PdfImporter\"}),_c('PaperList',{ref:\"PaperList\",on:{\"viewPaper\":_vm.viewPaper}})],1),_c('v-flex',{staticClass:\"pa-1\",attrs:{\"xs3\":\"\"}},[_c('v-tabs',{attrs:{\"background-color\":\"#eee\"}},[_c('v-tab',{staticClass:\"pa-2\",attrs:{\"to\":\"#references\"},on:{\"click\":function($event){_vm.activeTab='references'}}},[_vm._v(\"References\")]),_c('v-tab',{staticClass:\"pa-2\",attrs:{\"to\":\"#authors\"},on:{\"click\":function($event){_vm.activeTab='authors'}}},[_vm._v(\"Authors\")])],1),_vm._l((_vm.references),function(reference,index){return _c('div',{key:index,staticClass:\"ref-list\"},[_c('div',[_vm._v(_vm._s(reference.origin)+\" \")]),_c('span',[_vm._v(\"(\"+_vm._s(reference.nCitedBys)+\") | Google Scholar\")])])})],2)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app-bar',{staticClass:\"app-header\",attrs:{\"app\":\"\",\"clipped-left\":\"\",\"flat\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":_vm.toggleDrawer}}),_c('v-toolbar-title',[_vm._v(\"PaperLax\")]),_c('v-layout',{staticStyle:{\"margin-left\":\"2em\"},attrs:{\"flat\":\"\"}},[_c('v-btn',{attrs:{\"text\":\"\"}},[_vm._v(\"Home\")]),_c('v-btn',{attrs:{\"text\":\"\"}},[_vm._v(\"Explore\")])],1),_c('v-spacer'),_c('UserMenu')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.currUser)?_c('v-btn',{attrs:{\"text\":\"\",\"small\":\"\",\"to\":\"/auth/signin\"}},[_vm._v(\"Sign In\")]):_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"large\":\"\",\"icon\":\"\"}},on),[(!_vm.currUser.photo)?_c('v-icon',{key:\"icon\",attrs:{\"large\":\"\",\"color\":\"grey darken-2\"}},[_vm._v(\"\\n        mdi-account-circle\\n      \")]):_vm._e(),_c('v-avatar',{attrs:{\"size\":\"36px\"}},[_c('img',{attrs:{\"src\":_vm.currUser.photo}})])],1)]}}])},[_c('v-list',[_c('v-subheader',[_vm._v(_vm._s(_vm.currUser.email))]),_c('v-list-item',{attrs:{\"to\":\"/user#collections\"}},[_c('v-list-item-title',[_vm._v(\"My collections\")])],1),_c('v-list-item',{attrs:{\"to\":\"/user/settings\"}},[_c('v-list-item-title',[_vm._v(\"Settings\")])],1),_c('v-list-item',{attrs:{\"to\":\"/help\"}},[_c('v-list-item-title',[_vm._v(\"Help\")])],1),_c('v-list-item',{attrs:{\"to\":\"/auth/signout\"}},[_c('v-list-item-title',[_vm._v(\"Sign out\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-btn v-if=\"!currUser\" text small to=\"/auth/signin\">Sign In</v-btn>\n  <v-menu v-else offset-y>\n    <template v-slot:activator=\"{ on }\">\n      <v-btn v-on=\"on\" large icon>\n        <v-icon v-if=\"!currUser.photo\" large color=\"grey darken-2\" key=\"icon\">\n          mdi-account-circle\n        </v-icon>\n        <v-avatar size=\"36px\">\n          <img :src=\"currUser.photo\">\n        </v-avatar>\n      </v-btn>\n    </template>\n    <v-list>\n      <v-subheader>{{ currUser.email }}</v-subheader>\n      <v-list-item to=\"/user#collections\">\n        <v-list-item-title>My collections</v-list-item-title>\n      </v-list-item>\n      <v-list-item to=\"/user/settings\">\n        <v-list-item-title>Settings</v-list-item-title>\n      </v-list-item>\n      <v-list-item to=\"/help\">\n        <v-list-item-title>Help</v-list-item-title>\n      </v-list-item>\n      <v-list-item to=\"/auth/signout\">\n        <v-list-item-title>Sign out</v-list-item-title>\n      </v-list-item>\n    </v-list>\n  </v-menu>\n\n</template>\n\n<script>\nimport { getUser } from '@/Firebase/auth'\nexport default {\n  name: 'UserMenu',\n  data () {\n    return {\n      currUser: getUser()\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserMenu.vue?vue&type=template&id=0b5c3e06&scoped=true&\"\nimport script from \"./UserMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b5c3e06\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VList,VListItem,VListItemTitle,VMenu,VSubheader})\n","<template>\n  <v-app-bar app clipped-left flat class=\"app-header\">\n    <v-app-bar-nav-icon @click=\"toggleDrawer\"></v-app-bar-nav-icon>\n    <!-- <v-toolbar-side-icon></v-toolbar-side-icon> -->\n    <v-toolbar-title>PaperLax</v-toolbar-title>\n    <v-layout flat style=\"margin-left: 2em;\">\n      <v-btn text>Home</v-btn>\n      <v-btn text>Explore</v-btn>\n    </v-layout>\n\n    <v-spacer></v-spacer>\n    <UserMenu></UserMenu>\n  </v-app-bar>\n</template>\n\n<script>\nimport UserMenu from '@/components/UserMenu'\nexport default {\n  name: 'AppBar',\n  components: {\n    UserMenu\n  },\n  data () {\n    return {\n      user: null\n    }\n  },\n  methods: {\n    toggleDrawer () {\n      this.$store.commit('toggleNavigationDrawer')\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.app-header {\n  border-top: 3px solid rgb(21, 146, 196)!important;\n  border-bottom: 1px solid rgb(21, 146, 196)!important;\n}\n\n.v-btn {\n  padding: 0 2em;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppBar.vue?vue&type=template&id=11b2bdc6&scoped=true&\"\nimport script from \"./AppBar.vue?vue&type=script&lang=js&\"\nexport * from \"./AppBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppBar.vue?vue&type=style&index=0&id=11b2bdc6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11b2bdc6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAppBar,VAppBarNavIcon,VBtn,VLayout,VSpacer,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"app\":\"\",\"temporary\":_vm.isTemporary,\"fixed\":\"\",\"clipped\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('CollectionFilter')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list',[_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},_vm._l((_vm.filters),function(filter,i){return _c('v-list-item',{key:i,on:{\"click\":function($event){return _vm.filterCollection(i)}}},[_c('v-list-item-action',[_c('v-icon',[_vm._v(\"\\n          \"+_vm._s(filter.icon)+\"\\n        \")])],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(filter.text)}})],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-list>\n    <v-list-item-group v-model=\"selected\" color=\"primary\">\n      <v-list-item v-for=\"(filter, i) in filters\" :key=\"i\"\n        @click=\"filterCollection(i)\">\n        <v-list-item-action>\n          <v-icon>\n            {{ filter.icon }}\n          </v-icon>\n        </v-list-item-action>\n        <v-list-item-content>\n          <v-list-item-title v-text=\"filter.text\"></v-list-item-title>\n        </v-list-item-content>\n      </v-list-item>\n    </v-list-item-group>\n  </v-list>\n</template>\n\n<script>\nexport default {\n  name: 'CollectionFilter',\n  data () {\n    return {\n      dialog: false,\n      selected: 0,\n      filters: [\n        { text: 'All Collections', icon: 'mdi-home' },\n        { text: 'My Collections', icon: 'mdi-face' },\n        { text: 'Shared with Me', icon: 'mdi-account-multiple' },\n        { text: 'Watched', icon: 'mdi-bookmark' }\n      ]\n    }\n  },\n  methods: {\n    filterCollection (index) {\n      this.selected = index\n      this.$log.info(this.selected)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.active {\n  color: rgb(21, 146, 196);\n}\n\n.v-list-item {\n  text-align: left;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionFilter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionFilter.vue?vue&type=template&id=7a5ce521&scoped=true&\"\nimport script from \"./CollectionFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionFilter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionFilter.vue?vue&type=style&index=0&id=7a5ce521&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a5ce521\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemGroup,VListItemTitle})\n","<template>\n    <v-navigation-drawer\n    v-model=\"drawer\"\n    app\n    :temporary=\"isTemporary\"\n    fixed\n    clipped\n  >\n  <CollectionFilter />\n  </v-navigation-drawer>\n</template>\n\n<script>\nimport CollectionFilter from '@/components/CollectionFilter'\nexport default {\n  name: 'NavigationDrawer',\n  components: {\n    CollectionFilter\n  },\n  props: {\n    temporary: Boolean,\n    drawerOpen: Boolean\n  },\n  data () {\n    return {\n      drawer: this.drawerOpen\n    }\n  },\n  computed: {\n    isTemporary: function () {\n      return this.temporary\n    }\n  },\n  mounted () {\n    this.$store.subscribe((mutation, state) => {\n      switch(mutation.type) {\n        case 'toggleNavigationDrawer':\n          this.drawer = state.navigationDrawer\n          break\n      }\n    })\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationDrawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavigationDrawer.vue?vue&type=template&id=e12c9d8c&\"\nimport script from \"./NavigationDrawer.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationDrawer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\ninstallComponents(component, {VNavigationDrawer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-list',{attrs:{\"two-line\":\"\"}},[_vm._l((_vm.papers),function(paper,index){return [_c('v-list-item',{key:paper.title,staticStyle:{\"cursor\":\"pointer\"},attrs:{\"ripple\":\"\"}},[_c('div',{staticClass:\"left-icons\"},[_c('v-icon',{attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"primary\",\"title\":\"read PDF\"}},[_vm._v(\"mdi-file\")])],1),_c('v-list-item-content',{on:{\"click\":function($event){return _vm.viewPaper(paper.id)}}},[_c('v-list-item-title',[_c('span',{staticClass:\"dot\",style:('background-color: ' + paper.color)}),_vm._v(\"\\n            \"+_vm._s(paper.title)+\"\\n          \")]),_c('v-list-item-subtitle',{staticClass:\"text--primary\"},[_vm._v(\"\\n            \"+_vm._s(paper.year)+\",\\n            \"+_vm._s(_vm.showAuthorNames(paper.authors))+\"\\n          \")])],1),(paper.uploadProgress)?_c('v-list-item-action',[_c('v-progress-circular',{attrs:{\"rotate\":-90,\"size\":50,\"width\":8,\"value\":paper.uploadProgress,\"color\":\"blue\"}},[_vm._v(\"\\n            \"+_vm._s(paper.uploadProgress)+\"\\n          \")])],1):_vm._e(),_c('div',{staticClass:\"right-icons\"},[_vm._l((_vm.actions),function(action,ai){return [(action.shown)?_c('v-icon',{key:ai,attrs:{\"title\":action.action},on:{\"click\":function($event){return _vm.paperAction(index)}}},[_vm._v(_vm._s(action.icon))]):_vm._e()]})],2)],1),(index + 1 < _vm.papers.length)?_c('v-divider',{key:index}):_vm._e()]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card flat>\n    <v-list two-line>\n      <template v-for=\"(paper, index) in papers\">\n        <v-list-item\n          :key=\"paper.title\"\n          ripple\n          style=\"cursor: pointer\"\n        >\n          <div class=\"left-icons\">\n            <v-icon flat small color=\"primary\" title=\"read PDF\">mdi-file</v-icon>\n          </div>\n          <!-- <v-list-item-action>\n            <v-icon\n              v-if=\"selected.indexOf(index) < 0\"\n              color=\"grey lighten-1\"\n              @click=\"toggle(index)\"\n            >\n              star_border\n            </v-icon>\n            <v-icon\n              v-else\n              color=\"yellow darken-2\"\n              @click=\"toggle(index)\"\n            >\n              star\n            </v-icon>\n          </v-list-item-action> -->\n          <v-list-item-content @click=\"viewPaper(paper.id)\">\n            <v-list-item-title><span class=\"dot\" v-bind:style=\"'background-color: ' + paper.color\"></span>\n              {{ paper.title }}\n            </v-list-item-title>\n            <v-list-item-subtitle class=\"text--primary\">\n              {{ paper.year }},\n              {{ showAuthorNames(paper.authors) }}\n            </v-list-item-subtitle>\n          </v-list-item-content>\n          <v-list-item-action v-if=\"paper.uploadProgress\">\n            <v-progress-circular\n              :rotate=\"-90\"\n              :size=\"50\"\n              :width=\"8\"\n              :value=\"paper.uploadProgress\"\n              color=\"blue\"\n            >\n              {{paper.uploadProgress}}\n            </v-progress-circular>\n          </v-list-item-action>\n          <div class=\"right-icons\">\n            <template v-for=\"(action, ai) in actions\">\n              <v-icon :key=\"ai\" :title=\"action.action\" v-if=\"action.shown\" @click=\"paperAction(index)\">{{action.icon}}</v-icon>\n            </template>\n          </div>\n        </v-list-item>\n        <v-divider\n          v-if=\"index + 1 < papers.length\"\n          :key=\"index\"\n        ></v-divider>\n      </template>\n    </v-list>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: 'PaperList',\n  data () {\n    return {\n      papers: [],\n      paperLoadingStatus: {},\n      actions: [\n        {icon: 'mdi-check', action: 'check', color: 'green', shown: false},\n        {icon: 'mdi-pencil', action: 'edit', color: 'orange', shown: true},\n        {icon: 'mdi-delete', action: 'delete', color: 'red', shown: true}\n      ],\n      value: 10\n    }\n  },\n  methods: {\n    addPaper (paper) {\n      paper.uploadProgress = 0\n      this.papers.push(paper)\n      paper.uploadTask.on('state_changed', snapshot => {\n        let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        paper.uploadProgress = progress.toPrecision(2)\n      })\n    },\n\n    clear () {\n      this.papers = []\n    },\n\n    viewPaper (index) {\n      this.$emit('viewPaper', index)\n    },\n\n    updatePaper (newPaperInfo) {\n      let paper = this.papers.find(p => p.id === newPaperInfo.id)\n      Object.keys(newPaperInfo).forEach(info => {\n        if (paper.hasOwnProperty(info) && info !== 'id') {\n          paper[info] = newPaperInfo[info]\n        }\n      })\n    },\n\n    editPaperInfo (index) {\n      console.log(this.papers[index].id)\n      let paper = this.papers[index]\n      this.$emit('editPaperInfo', paper)\n      this.$emit('viewPaper', index)\n    },\n\n    showAuthorNames (authors) {\n      if (Array.isArray(authors)) {\n        return authors.map(author => author.given + ' ' + author.family).join(', ')\n      }\n    },\n\n    paperAction (action, index) {\n      if (action === 'edit') {\n        this.editPaperInfo(index)\n      } else if (action === 'delete') {\n        this.papers.splice(index, 1)\n        this.$emit('updatePapersInCollection', this.papers.map(p => p.id))\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.hidden {\n  display: none;\n}\n\n.left-icons {\n  margin-right: 1em;\n}\n\n.right-icons {\n  text-align: right;\n  min-width: 3em;\n}\n\n.right-icons i {\n  font-size: 1.2em;\n}\n\n.v-list-item {\n  text-align: left;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaperList.vue?vue&type=template&id=82d3d59c&scoped=true&\"\nimport script from \"./PaperList.vue?vue&type=script&lang=js&\"\nexport * from \"./PaperList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PaperList.vue?vue&type=style&index=0&id=82d3d59c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"82d3d59c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VCard,VDivider,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemSubtitle,VListItemTitle,VProgressCircular})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-title',[_vm._v(\"\\n      All References\\n      \"),_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\",\"outline\":\"\"},on:{\"click\":function($event){return _vm.exportAsJson()}}},[_vm._v(\"\\n        Export\\n      \")]),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.references,\"search\":_vm.search,\"rows-per-page-items\":[10, 15, 25, 50]},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('td',{staticClass:\"subheading\",staticStyle:{\"text-align\":\"left\"},on:{\"mouseenter\":function($event){_vm.hoverId = props.item.id}}},[_vm._v(_vm._s(props.item.title)+\" \"),(props.item.venue)?_c('span',{staticClass:\"caption\"},[_vm._v(\"(\"+_vm._s(props.item.venue)+\")\")]):_vm._e(),(props.item.id == _vm.hoverId)?_c('v-icon',{on:{\"click\":function($event){return _vm.editReference(props.item.id)}}},[_vm._v(\"edit\")]):_vm._e()],1),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.year)),_c('br')]),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(_vm.showAuthorNames(props.item.authorNames))),_c('br')]),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.citedByCount))])]}}])},[_c('v-alert',{attrs:{\"slot\":\"no-results\",\"value\":true,\"color\":\"error\",\"icon\":\"warning\"},slot:\"no-results\"},[_vm._v(\"\\n        Your search for \\\"\"+_vm._s(_vm.search)+\"\\\" found no results.\\n      \")])],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"50%\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Reference Info & Edit\")]),_c('v-card-text',[_vm._v(\"\\n        \"+_vm._s(_vm.selectedReference.origin)+\"\\n      \")]),_c('v-card-text',[_c('v-textarea',{attrs:{\"rows\":\"10\",\"outline\":\"\"},model:{value:(_vm.editedRefInfo),callback:function ($$v) {_vm.editedRefInfo=$$v},expression:\"editedRefInfo\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"flat\":\"flat\"},on:{\"click\":function($event){return _vm.saveRefInfo()}}},[_vm._v(\"\\n          Save\\n        \")]),_c('v-btn',{attrs:{\"flat\":\"flat\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"\\n          Cancel\\n        \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-flex>\n    <v-card flat>\n      <v-card-title>\n        All References\n        <v-btn color=\"primary\" small outline @click=\"exportAsJson()\">\n          Export\n        </v-btn>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"search\"\n          label=\"Search\"\n          single-line\n          hide-details\n        ></v-text-field>\n      </v-card-title>\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"references\"\n        :search=\"search\"\n        :rows-per-page-items=\"[10, 15, 25, 50]\"\n      >\n        <template slot=\"items\" slot-scope=\"props\">\n          <td class=\"subheading\" style=\"text-align: left;\" @mouseenter=\"hoverId = props.item.id\">{{ props.item.title }} <span class=\"caption\" v-if=\"props.item.venue\">({{ props.item.venue }})</span> <v-icon v-if=\"props.item.id == hoverId\" @click=\"editReference(props.item.id)\">edit</v-icon></td>\n          <td class=\"text-xs-right\">{{ props.item.year }}<br /></td>\n          <td class=\"text-xs-right\">{{ showAuthorNames(props.item.authorNames)  }}<br /></td>\n          <td class=\"text-xs-right\">{{ props.item.citedByCount }}</td>\n        </template>\n        <v-alert slot=\"no-results\" :value=\"true\" color=\"error\" icon=\"warning\">\n          Your search for \"{{ search }}\" found no results.\n        </v-alert>\n      </v-data-table>\n    </v-card>\n    <v-dialog\n      v-model=\"dialog\"\n      max-width=\"50%\"\n    >\n      <v-card>\n        <v-card-title class=\"headline\">Reference Info &amp; Edit</v-card-title>\n        <v-card-text>\n          {{selectedReference.origin}}\n        </v-card-text>\n        <v-card-text>\n          <v-textarea\n            rows=\"10\"\n            outline\n            v-model=\"editedRefInfo\"\n\n          ></v-textarea>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"green darken-1\"\n            flat=\"flat\"\n            @click=\"saveRefInfo()\"\n          >\n            Save\n          </v-btn>\n          <v-btn\n            flat=\"flat\"\n            @click=\"dialog = false\"\n          >\n            Cancel\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-flex>\n</template>\n\n<script>\nexport default {\n  name: 'Paper',\n  data () {\n    return {\n      search: '',\n      dialog: false,\n      hoverId: null,\n      selectedReference: {},\n      references: [],\n      editedRefInfo: '',\n      headers: [\n        { text: 'Title', value: 'title', sortable: false },\n        { text: 'Year', value: 'year' },\n        { text: 'Authors', value: 'authorNames' },\n        { text: 'Cited By', value: 'citedByCount' }\n      ]\n    }\n  },\n  methods: {\n    update (paperReferences) {\n      this.references = paperReferences\n    },\n    append (refPaper) {\n      let paperIds = this.references.map(r => r.id)\n      if (paperIds.indexOf(refPaper.id) === -1) {\n        this.references.push(refPaper)\n      } else {\n        let paper = this.references.find(p => p.id === refPaper.id)\n        paper.citedByCount += 1\n      }\n    },\n    showTitle (title) {\n      return (title.length > 64) ? title.slice(0, 63) + ' ...' : title\n    },\n    showAuthorNames (authors) {\n      if (Array.isArray(authors)) {\n        return authors.join(', ')\n      }\n    },\n    editReference (paperId) {\n      console.log(paperId)\n      this.selectedReference = this.references.find(ref => ref.id === paperId)\n      this.dialog = ~this.dialog\n      this.editedRefInfo = this.showRefInfo()\n    },\n    showRefInfo (providedRef, includeOrigin = false) {\n      let ref = providedRef || this.selectedReference\n      if (!ref.title) return\n      let refInfo = {\n        title: ref.title,\n        authorNames: ref.authorNames.join(', '),\n        venue: ref.venue,\n        year: ref.year,\n        publisher: ref.publisher,\n        pages: ref.pages,\n        volume: ref.volume,\n        issue: ref.issue\n      }\n      if (includeOrigin) {\n        refInfo.origin = ref.origin\n      }\n      return JSON.stringify(refInfo, null, 4)\n    },\n    saveRefInfo () {\n      let edited = JSON.parse(this.editedRefInfo)\n      edited.authorNames = edited.authorNames.split(',').map(a => a.trim())\n      this.selectedReference = Object.assign(this.selectedReference, edited)\n      this.dialog = false\n      this.$emit('saveRefInfo', this.selectedReference)\n    },\n    exportAsJson () {\n      let text = this.references.map(ref => this.showRefInfo(ref, true))\n      text = '[' + text.join(', ') + ']'\n      let element = document.createElement('a')\n      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n      element.setAttribute('download', 'references.json')\n      element.style.display = 'none'\n      document.body.appendChild(element)\n      element.click()\n      document.body.removeChild(element)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RefList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RefList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RefList.vue?vue&type=template&id=452b54c2&\"\nimport script from \"./RefList.vue?vue&type=script&lang=js&\"\nexport * from \"./RefList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardActions,VCardText,VCardTitle,VDataTable,VDialog,VFlex,VIcon,VSpacer,VTextField,VTextarea})\n","import * as firebase from 'firebase/app'\nimport { getUser } from './auth'\n\nexport const Account = {\n  register () {\n    let user = getUser()\n    return firebase.firestore().collection('users').doc(user.uid).set(user)\n  },\n\n  getCollections () {\n    return new Promise((resolve, reject) => {\n      Collections.list().then(querySnapshot => {\n        resolve(querySnapshot.docs.map(collSnapshot => ({\n          id: collSnapshot.id,\n          ...collSnapshot.data()\n        })))\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  }\n}\n\nexport const Collections = {\n  add (collection) {\n    const user = getUser()\n    return firebase.firestore().collection('collections').add({\n      ...collection,\n      owner: user.uid\n    })\n  },\n\n  get (collectionId) {\n    return firebase.firestore().doc(`collections/${collectionId}`).get().then(snapshot => {\n      if (snapshot.exists) {\n        return snapshot.data()\n      }\n      throw new Error(`\"${collectionId}\" not found in collections.`)\n    })\n  },\n\n  list () {\n    const user = getUser()\n    return firebase.firestore().collection('collections')\n      .where('owner', '==', user.uid).get()\n  },\n\n  Articles: {\n    add (collectionId, articles) {\n      if (!Array.isArray(articles) && typeof articles === 'object') {\n        articles = [articles]\n      }\n      let collectionRef = firebase.firestore().collection('collections').doc(collectionId)\n      articles.forEach(article => {\n        if (!article.id) return\n        let artDoc = collectionRef.collection('articles').doc(article.id)\n        artDoc.get().then(artSnapshot => {\n          if (artSnapshot.exists) {\n            // if article exist, only update properties that are different\n            let diff = {}\n            for (const [key, value] of Object.entries(artSnapshot.data())) {\n              if (article[key] !== value) {\n                diff[key] = value\n              }\n            }\n            artDoc.update(diff)\n          } else {\n            artDoc.set(article)\n          }\n        })\n      })\n    },\n\n    list (collectionId) {\n      return new Promise((resolve, reject) => {\n        firebase.firestore().collection('collections').doc(collectionId).collection('articles').get()\n          .then(snapshot => {\n            let res = []\n            snapshot.forEach(s => {\n              res.push(s.data())\n            })\n            resolve(res)\n          }).catch(error => {\n            reject(error)\n          })\n      })\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{ref:\"InputFiles\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.loadFiles}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\n\nexport default class ReferenceParser {\n  constructor (method) {\n    if (method === 'rnn') {\n      this.parse = this.classifyByRnn\n    } else if (method === 'anystyle') {\n      this.parse = this.useAnystyle\n    } else {\n      this.parse = this.simplyParse\n    }\n  }\n\n  parseRefStrings (refStrings) {\n    // console.log(refStrings)\n    let refItems = []\n    let refLabelPatterns = [\n      new RegExp(/^\\[(.+)\\]/),\n      new RegExp(/^(\\d{1,2})\\./)\n    ]\n    let labelPattern = null\n    let currentRefItem = ''\n    refStrings.forEach(refText => {\n      if (labelPattern === null) {\n        for (let i = 0; i < refLabelPatterns.length; i++) {\n          let pattern = refLabelPatterns[i]\n          if (refText.match(pattern)) {\n            labelPattern = pattern\n            break\n          }\n        }\n      } else {\n        let match = refText.match(labelPattern)\n        if (match) {\n          if (match[1].match(/^\\d+$/) && match[1] !== 'Online') {\n            if (Number(match[1]) === refItems.length + 2) {\n              refItems.push(currentRefItem)\n              currentRefItem = refText.replace(labelPattern, '')\n            }\n          } else {\n            refItems.push(currentRefItem.trim())\n            currentRefItem = ''\n          }\n        } else {\n          let lastChar = currentRefItem.slice(-1)\n          if (lastChar === ' ' || lastChar === '-') {\n            if (lastChar === '-') {\n              currentRefItem = currentRefItem.slice(0, -1)\n            }\n            currentRefItem += refText\n          } else {\n            currentRefItem += ' ' + refText\n          }\n        }\n      }\n    })\n\n    if (refItems[refItems.length - 1].length > 500) {\n      refItems[refItems.length - 1] = refItems[refItems.length - 1].slice(0, 500)\n    }\n\n    return refItems\n  }\n\n  // simplyParse (refStrings) {\n  //   let refItems = this.parseRefStrings(refStrings)\n\n  //   return new Promise((resolve, reject) => {\n  //   })\n  // }\n\n  useAnystyle (refStrings) {\n    let refItems = this.parseRefStrings(refStrings)\n    let refQuery = refItems.map(rt => '\\'' + rt + '\\'').join('+')\n    return new Promise((resolve, reject) => {\n      axios('/api/anystyle?refs=' + encodeURIComponent(refQuery)).then(res => {\n        console.log(JSON.parse(res.data))\n        resolve({raw: refItems, parsed: JSON.parse(res.data)})\n      }).catch(err => {\n        reject(err)\n      })\n    })\n  }\n\n  classifyByRnn () {\n\n  }\n}\n","import pdfjsLib from 'pdfjs-dist'\nimport RefParser from './RefParser'\n// pdfjsLib.GlobalWorkerOptions.workerSrc = '/vendors~pdfjsWorker.js'\n\n/**\n * Create a PDFLoader to load and parse info from a scholar paper in a PDF file\n */\nexport default class PdfParser {\n  constructor (pdfUrl) {\n    this.pdf = null\n    this.pdfUrl = pdfUrl\n    this.refParser = new RefParser()\n    this.pages = []\n  }\n\n  async load () {\n    if (this.pdf === null) {\n      return await pdfjsLib.getDocument({url: this.pdfUrl}).promise\n    } else {\n      return await this.pdf\n    }\n  }\n\n  /**\n   * Get paper info from PDF metadata. If no info was provided\n   * in metadata, parse pdf content to get the info.\n   */\n  getInfo () {\n    return this.load().then((pdf) => {\n      return pdf.getMetadata()\n    }).then((md) => {\n      let info = md.info\n      let year = (info.CreationDate) ? info.CreationDate.slice(2, 6) : 'unknown'\n      let authors = (info.Author) ? info.Author.replace('and', ',').split(',') : false\n      let title = (info.Title && info.Title.length > 10) ? info.Title : false\n      if (authors && title) {\n        return this.parseInfo({year, authors, title})\n      } else {\n        return this.parseInfo({year})\n      }\n    })\n  }\n\n  getPage (pageNumber) {\n    return new Promise((resolve, reject) => {\n      if (this.pages[pageNumber]) {\n        resolve(this.pages[pageNumber])\n      } else {\n        this.load().then((pdf) => {\n          pdf.getPage(pageNumber).then(page => {\n            this.pages[pageNumber] = page\n            resolve(page)\n          })\n        }).catch(error => {\n          reject(error)\n        })\n      }\n    })\n  }\n\n  /**\n   * parse PDF content to get paper info (title, author, etc.,)\n   */\n  parseInfo (info) {\n    return this.load().then((pdf) => {\n      return pdf.getPage(1)\n    }).then((text) => {\n      return text.getTextContent()\n    }).then((content) => {\n      let items = content.items\n      let paperInfo = {}\n      let abstract = []\n      let keywords = []\n      let abstractStart = false\n      let keywordStart = false\n      for (let i = 0; i < items.length; i++) {\n        let item = items[i]\n        if (item.str.match(/ntroduction$/i)) {\n          break\n        }\n        if (keywordStart && item.str.length > 3) {\n          keywords.push(item.str)\n        }\n        if (item.str.match(/eywords:?$/i) || item.str.match(/^Index Terms$/i)) {\n          abstractStart = false\n          keywordStart = true\n        }\n        if (abstractStart) {\n          abstract.push(item.str)\n        }\n        if (item.str.match(/bstract$/i)) {\n          abstractStart = true\n        }\n      }\n      abstract = abstract.join(' ').replace(/\\s+/g, ' ')\n      keywords = keywords.join('')\n      if (info.title && info.authors) {\n        paperInfo = Object.assign({}, info)\n      } else {\n        const MIN_TITLE_LENGTH = 10\n        const MIN_NAME_LENGTH = 5\n        const MAX_ROWS_PARSE = 30\n        let topRows = items.slice(0, MAX_ROWS_PARSE).filter((item) => item.str.length > MIN_TITLE_LENGTH)\n        let largestText = Math.max(...topRows.map((item) => item.height))\n        let titleRowIndex = items.slice(0, MAX_ROWS_PARSE).map((item) => item.height).indexOf(largestText)\n        let title = items[titleRowIndex].str\n        let authorRowIndex = titleRowIndex + 1\n        let authors = items[authorRowIndex].str\n        if (!authors.includes(',') && !authors.includes('and')) {\n          title += authors\n          authorRowIndex++\n          authors = items[authorRowIndex].str\n        }\n        while (authors.length < MIN_NAME_LENGTH) {\n          authorRowIndex++\n          authors = items[authorRowIndex].str\n        }\n        authors = authors.replace('and', ',').split(',')\n        paperInfo = {title, authors}\n      }\n      paperInfo.abstract = abstract\n      paperInfo.keywords = keywords\n      paperInfo.year = info.year\n      return new Promise((resolve, reject) => {\n        resolve(paperInfo)\n      })\n    })\n  }\n\n  /**\n   * return all text after \"References\"\n   * @param {Array of pdfText Objects} texts\n   */\n  getReferenceTexts (texts) {\n    // console.log(texts)\n    let result = texts\n    for (const [index, item] of texts.entries()) {\n      if (item.str.toLowerCase() === 'eferences' || item.str.toLowerCase() === 'references' || item.str.match(/^\\d+.*references$/i)) {\n        result = texts.slice(index + 1)\n        break\n      }\n    }\n    return result\n  }\n\n  /**\n   * Remove or replace phrases that prevent references to be parsed correctly\n   * @param {Array of pdfText Objects} texts\n   */\n  sanitizeUrl (urlString) {\n    return urlString\n      .replace(/\\[.+\\]/, '')\n      .replace(/'/g, '')\n      .replace(/\\(/g, '')\n      .replace(/\\)/g, '')\n      .replace('- ', '')\n      .replace('&', '')\n  }\n\n  sanitize (texts) {\n    return texts.map((item) => item.str.replace(/\\[(O|o)nline.*\\]/g, 'online'))\n  }\n\n  /**\n   * Get all references from a scholar paper in PDF\n   * TODO: Support papers with more than 2 pages of references\n   */\n  getReferences () {\n    let refText\n    return this.load().then((pdf) => {\n      let refStart = false\n      return pdf.getPage(pdf.numPages).then((text) => {\n        return text.getTextContent()\n      }).then((text) => {\n        refText = this.getReferenceTexts(text.items)\n        refStart = refText.length !== text.items.length\n        if (refStart) {\n          return new Promise((resolve, reject) => {\n            resolve(refText)\n          })\n        } else {\n          // TODO: keep looking up until we found the start of Reference section\n          return pdf.getPage(pdf.numPages - 1)\n        }\n      }).then((text) => {\n        if (!refStart) return text.getTextContent()\n      }).then((text) => {\n        let moreRefText = []\n        if (!refStart) {\n          moreRefText = this.getReferenceTexts(text.items)\n          refText = moreRefText.concat(refText)\n        }\n        // debugger\n        if (!refStart && moreRefText.length === text.items.length) { // this means no references found\n          return new Promise((resolve, reject) => {\n            resolve()\n          })\n        } else {\n          return this.refParser.useAnystyle(refText.map(r => r.str))\n        }\n      }).then((refs) => {\n        return new Promise((resolve, reject) => {\n          resolve(refs)\n        })\n      })\n    })\n  }\n}\n","import * as firebase from 'firebase/app'\n\nexport function getPdfFilePath (collectionId, paperId) {\n  return `PDFs/${collectionId}/${paperId}.pdf`\n}\n\nexport function uploadPdfFile (collectionId, paperId, file) {\n  return firebase.storage().ref()\n    .child(getPdfFilePath(collectionId, paperId))\n    .put(file)\n}\n\nexport function getPdfFileUrl (collectionId, paperId) {\n  return firebase.storage().ref()\n    .child(getPdfFilePath(collectionId, paperId))\n    .getDownloadURL()\n}\n","import xxhash from 'xxhashjs'\n\nexport default function (firstAuthorSurname, year, title) {\n  if (!firstAuthorSurname || !year || !title) {\n    return null\n  }\n  let artTitle = title.replace(/\\s+/g, ' ').trim().toLowerCase()\n  const seed = 0xC\n  const radix = 16\n  const hash =\n    xxhash.h64(artTitle, seed).toString(radix)\n  return `${firstAuthorSurname.toLowerCase()}-${year}-${hash}`\n}\n","<template>\n  <input style=\"display: none\" type=\"file\" ref=\"InputFiles\" multiple @change=\"loadFiles\" />\n</template>\n\n<script>\nimport PdfParser from '@/utils/PdfParser'\nimport { Collections } from '@/Firebase/database'\nimport { uploadPdfFile } from '@/Firebase/storage'\nimport genArtHash from '@/utils/genArtHash'\n\nexport default {\n  name: 'PdfImporter',\n  data () {\n    return {\n      collectionId: null,\n      onFileLoaded: null,\n      onUploadStateChanged: null,\n      storageRef: null\n    }\n  },\n  created () {\n    this.collectionId = this.$route.params.collectionId\n  },\n  methods: {\n    selectFiles () {\n      const elem = this.$refs.InputFiles\n      elem.click()\n    },\n\n    loadFiles ($event) {\n      let files = $event.target.files\n      if (files.length === 0) return\n\n      for (let file of files) {\n        let url = URL.createObjectURL(file)\n        // this.pdfFiles.push(url)\n        let pdf = new PdfParser(url)\n        // getAllPaperInfos.push(pdf.getInfo())\n        // getAllReferences.push(pdf.getReferences())\n        let newPaper\n        let references\n        pdf.getInfo().then(paper => {\n          newPaper = Object.assign({}, paper)\n          newPaper.authors = paper.authors\n            .map(authorName => authorName.trim())\n            .filter(authorName => authorName !== '')\n            .map(authorName => {\n              let name = authorName.split(' ')\n              return {\n                family: name.pop(),\n                given: name\n              }\n            })\n          newPaper.id = genArtHash(newPaper.authors[0].family, newPaper.year, newPaper.title)\n          pdf.getReferences().then(refs => {\n            if (refs.parsed.length > 0) {\n              let paperRefs = refs.parsed\n              references = paperRefs.map((ref, refId) => {\n                let refPaper = {}\n                if (Array.isArray(ref.title)) {\n                  refPaper.title = ref.title[0]\n                  refPaper.authors = (!Array.isArray(ref.author)) ? [''] : ref.author\n                  if (Array.isArray(ref['container-title']) && ref['container-title'].length) {\n                    refPaper.venue = (ref['container-title']) ? ref['container-title'][0].replace(/-/g, '') : ''\n                  }\n                  refPaper.year = Array.isArray(ref.date) ? ref.date[0] : 'unknown'\n                  if (Array.isArray(ref.date)) refPaper.date = ref.date[0]\n                  if (ref.pages) refPaper.pages = (Array.isArray(ref.pages)) ? ref.pages[0] : ref.pages\n                  if (ref.publisher) refPaper.publisher = (Array.isArray(ref.publisher)) ? ref.publisher[0] : ref.publisher\n                  if (ref.volume) refPaper.volume = (Array.isArray(ref.volume)) ? ref.volume[0] : ref.volume\n                  if (ref.issue) refPaper.issue = (Array.isArray(ref.issue)) ? ref.issue[0] : ref.issue\n                  refPaper.origin = refs.raw[refId]\n                  refPaper.id = genArtHash(refPaper.authors[0].family, refPaper.year, refPaper.title)\n                  return refPaper\n                }\n              }).filter(ref => ref !== undefined && ref.id !== null)\n              Collections.Articles.add(this.collectionId, references)\n              newPaper.references = references.map(r => r.id)\n              if (newPaper.id !== null) {\n                Collections.Articles.add(this.collectionId, Object.assign({}, newPaper))\n                let uploadTask = uploadPdfFile(this.collectionId, newPaper.id, file)\n                uploadTask.then(() => {\n                  console.log('uploaded file' + newPaper.id)\n                })\n                newPaper.uploadTask = uploadTask\n                if (typeof this.onFileLoaded === 'function') {\n                  this.onFileLoaded(newPaper)\n                }\n              }\n            }\n          })\n        })\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfImporter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfImporter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PdfImporter.vue?vue&type=template&id=a025e4d8&\"\nimport script from \"./PdfImporter.vue?vue&type=script&lang=js&\"\nexport * from \"./PdfImporter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app>\n    <NavigationDrawer :temporary=\"true\" />\n    <v-content>\n      <AppBar />\n      <v-container\n        fluid\n        fill-height\n      >\n        <v-layout row align-top justify-center pa-3>\n          <v-flex xs2 class=\"pa-1\">\n            <v-card flat class=\"pa-2\">\n              <v-card-actions>\n                <v-btn icon @click=\"$emit('export')\">\n                  <v-icon color=\"primary\" title=\"export\">mdi-export</v-icon>\n                </v-btn>\n                <v-btn icon>\n                  <v-icon color=\"primary\" title=\"settings\">mdi-settings</v-icon>\n                </v-btn>\n                <!-- <v-spacer></v-spacer> -->\n                <v-btn icon>\n                  <v-icon color=\"green\">mdi-share-variant</v-icon>\n                </v-btn>\n                <v-btn icon>\n                  <v-icon color=\"green\">mdi-star-outline</v-icon>\n                </v-btn>\n                <!-- <span class=\"subheading\">1</span> -->\n              </v-card-actions>\n              <v-card-title>\n                {{collection.name}}\n              </v-card-title>\n              <v-card-text class=\"text-left\">\n                {{collection.description}}\n              </v-card-text>\n            </v-card>\n            <v-card flat>\n              <v-card-title>\n                <v-list\n                  class=\"pa-0\"\n                  v-for=\"(keyword, index) in keywords\"\n                  :key=\"index\"\n                >\n                <v-list-item>\n                <v-checkbox v-model=\"selectedKeywords\" :label=\"keyword.word\" :value=\"keyword.word\"></v-checkbox>\n                </v-list-item>\n                </v-list>\n              </v-card-title>\n            </v-card>\n          </v-flex>\n          <v-flex xs7 class=\"pa-1\">\n            <v-toolbar flat>\n              <v-btn small color=\"primary\" @click=\"selectPdfFiles\">\n                <v-icon title=\"add papers\">mdi-plus</v-icon>Add Paper\n              </v-btn>\n              <v-spacer></v-spacer>\n              <v-text-field\n                single-line\n                hide-details\n                label=\"Search\"\n                append-icon=\"mdi-search\"\n              ></v-text-field>\n            </v-toolbar>\n            <PdfImporter ref=\"PdfImporter\" />\n            <PaperList\n              @viewPaper=\"viewPaper\"\n              ref=\"PaperList\"\n            >\n            </PaperList>\n          </v-flex>\n          <v-flex xs3 class=\"pa-1\">\n            <v-tabs background-color=\"#eee\">\n              <v-tab to=\"#references\" class=\"pa-2\" @click=\"activeTab='references'\">References</v-tab>\n              <v-tab to=\"#authors\" class=\"pa-2\" @click=\"activeTab='authors'\">Authors</v-tab>\n            </v-tabs>\n            <div class=\"ref-list\"\n              v-for=\"(reference, index) in references\"\n              :key=\"index\"\n            >\n              <div>{{reference.origin}} </div>\n              <span>({{reference.nCitedBys}}) | Google Scholar</span>\n            </div>\n          </v-flex>\n        </v-layout>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport AppBar from '@/components/AppBar'\nimport NavigationDrawer from '@/components/NavigationDrawer'\nimport PaperList from '@/components/PaperList'\nimport RefList from '@/components/RefList'\nimport { Collections } from '@/Firebase/database'\nimport PdfImporter from '@/components/PdfImporter'\n\nexport default {\n  name: 'CollectionView',\n  components: {\n    AppBar,\n    NavigationDrawer,\n    PaperList,\n    RefList,\n    PdfImporter\n  },\n  data: () => ({\n    activeTab: 'references',\n    localStore: null,\n    collectionId: null,\n    collection: {\n      name: null,\n      description: null\n    },\n    articles: null,\n    references: [],\n    keywords: [],\n    selectedKeywords: []\n  }),\n  created () {\n    this.collectionId = this.$route.params.collectionId\n    Collections.get(this.collectionId).then(collection => {\n      this.collection = collection\n    })\n  },\n  mounted () {\n    this.$refs.PdfImporter.onFileLoaded = (paper, refs) => {\n      this.$refs.PaperList.addPaper(paper)\n    }\n    // this.$refs.PdfImporter.onUploadStateChanged = (progress, paperId) => {\n    //   this.$refs.PaperList.[paperId].status = progress\n    //   console.log(progress, paperId)\n    // }\n    Collections.Articles.list(this.collectionId).then(articles => {\n      // this.references = articles.filter(a => a.origin)\n      this.articles = articles.filter(p => !p.hasOwnProperty('origin'))\n      let keywords = {}\n      this.articles.forEach(a => {\n        a.keywords.replace(/[^a-zA-Z0-9\\s,]/g, '').toLowerCase().split(', ')\n          .filter(k => k.length > 2 && k.length < 32)\n          .forEach(k => {\n            if (keywords.hasOwnProperty(k)) {\n              keywords[k] += 1\n            } else {\n              keywords[k] = 1\n            }\n          })\n      })\n      this.keywords = Object.keys(keywords).map(key => {\n        return {\n          word: key,\n          count: keywords[key]\n        }\n      })\n      this.$refs.PaperList.papers = this.articles\n      let referenceHistogram = {}\n      this.articles.forEach(p => {\n        p.references.forEach(r => {\n          if (referenceHistogram.hasOwnProperty(r)) {\n            referenceHistogram[r] += 1\n          } else {\n            referenceHistogram[r] = 1\n          }\n        })\n      })\n\n      this.references = articles.filter(a => a.hasOwnProperty('origin'))\n        .map(r => {\n          r.nCitedBys = referenceHistogram[r.id]\n          return r\n        })\n        .sort((a, b) => b.nCitedBys - a.nCitedBys)\n        .slice(0, 7)\n    })\n  },\n  methods: {\n    selectPdfFiles () {\n      this.$refs.PdfImporter.selectFiles()\n    },\n    viewPaper (index) {\n      this.$router.push({path: '/reader/' + this.collectionId + '/' + index})\n    }\n  }\n}\n</script>\n\n<style scoped>\n.hidden {\n  display: none;\n}\n\n.text-left {\n  text-align: left;\n}\n\n.ref-list {\n  text-align: left;\n  padding: 1em 2em;\n  background-color: #eee;\n}\n\n.ref-list div {\n  text-align: left;\n  font-size: 0.9em;\n}\n\nul {\n  list-style: none;\n  text-align: left;\n}\n\nul > li  {\n  margin: 0 1em;\n  font-size: 0.6em;\n}\n\n.v-input {\n  margin: 0;\n  padding: 0;\n}\n\n.v-messages {\n  height: 0;\n  display: none;\n}\n\n.v-card-text {\n  text-align: left;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionView.vue?vue&type=template&id=45bebed2&scoped=true&\"\nimport script from \"./CollectionView.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionView.vue?vue&type=style&index=0&id=45bebed2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45bebed2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VBtn,VCard,VCardActions,VCardText,VCardTitle,VCheckbox,VContainer,VContent,VFlex,VIcon,VLayout,VList,VListItem,VSpacer,VTab,VTabs,VTextField,VToolbar})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('NavigationDrawer',{attrs:{\"drawerOpen\":true,\"temporary\":false}}),_c('v-content',[_c('AppBar'),_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"align-top\":\"\",\"justify-center\":\"\"}},[_c('CollectionList',{ref:\"UserCollections\"})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-toolbar',{attrs:{\"flat\":\"\",\"dense\":\"\",\"color\":\"#f5f5f5\"}},[_c('v-toolbar-title',[_vm._v(\"Paper Collections\")]),_c('v-spacer'),_c('v-btn',{staticClass:\"ma-3\",attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.dialog = true}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-plus\")]),_vm._v(\"New Collection\\n    \")],1)],1),_c('v-list',{attrs:{\"two-line\":\"\"}},[_vm._l((_vm.collections),function(collection,index){return [_c('v-list-item',{key:collection.title,staticStyle:{\"cursor\":\"pointer\"},attrs:{\"ripple\":\"\",\"to\":_vm.collectionURL(collection)}},[_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"text--primary\"},[_vm._v(\"\\n            \"+_vm._s(collection.name)+\"\\n          \")]),_c('v-list-item-subtitle',[_vm._v(\"\\n            \"+_vm._s(collection.description)+\"\\n          \")])],1),_c('v-list-item-action',[_c('v-list-item-action-text',[_vm._v(_vm._s(collection.nArticle))])],1)],1),(index + 1 < _vm.collections.length)?_c('v-divider',{key:index}):_vm._e()]})],2),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"60%\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Create new collection\")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"Name\"},model:{value:(_vm.newCollection.title),callback:function ($$v) {_vm.$set(_vm.newCollection, \"title\", $$v)},expression:\"newCollection.title\"}}),_c('v-text-field',{attrs:{\"label\":\"Discription\",\"box\":\"\"},model:{value:(_vm.newCollection.description),callback:function ($$v) {_vm.$set(_vm.newCollection, \"description\", $$v)},expression:\"newCollection.description\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"flat\":\"flat\"},on:{\"click\":function($event){return _vm.createCollection()}}},[_vm._v(\"\\n          Create\\n        \")]),_c('v-btn',{attrs:{\"flat\":\"flat\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"\\n          Cancel\\n        \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-toolbar flat dense color=\"#f5f5f5\">\n      <v-toolbar-title>Paper Collections</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn small color=\"primary\" class=\"ma-3\" @click=\"dialog = true\">\n        <v-icon left>mdi-plus</v-icon>New Collection\n      </v-btn>\n    </v-toolbar>\n    <v-list two-line>\n      <template v-for=\"(collection, index) in collections\">\n        <v-list-item\n          :key=\"collection.title\"\n          ripple\n          style=\"cursor: pointer\"\n          :to=\"collectionURL(collection)\"\n        >\n          <v-list-item-content>\n            <v-list-item-title  class=\"text--primary\">\n              {{ collection.name }}\n            </v-list-item-title>\n            <v-list-item-subtitle>\n              {{ collection.description }}\n            </v-list-item-subtitle>\n          </v-list-item-content>\n          <v-list-item-action>\n            <v-list-item-action-text>{{ collection.nArticle }}</v-list-item-action-text>\n          </v-list-item-action>\n        </v-list-item>\n        <v-divider\n          v-if=\"index + 1 < collections.length\"\n          :key=\"index\"\n        ></v-divider>\n      </template>\n    </v-list>\n    <v-dialog\n      persistent\n      v-model=\"dialog\"\n      max-width=\"60%\"\n    >\n      <v-card>\n        <v-card-title class=\"headline\">Create new collection</v-card-title>\n          <v-card-text>\n          <v-text-field\n            label=\"Name\"\n            v-model=\"newCollection.title\"\n          ></v-text-field>\n          <v-text-field\n            label=\"Discription\"\n            box\n            v-model=\"newCollection.description\"\n          ></v-text-field>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"green darken-1\"\n            flat=\"flat\"\n            @click=\"createCollection()\"\n          >\n            Create\n          </v-btn>\n          <v-btn\n            flat=\"flat\"\n            @click=\"dialog = false\"\n          >\n            Cancel\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { Collections } from '@/Firebase/database'\nimport * as firebase from 'firebase/app'\nimport 'firebase/firestore'\nexport default {\n  name: 'CollectionList',\n  data () {\n    return {\n      dialog: false,\n      collections: [],\n      newCollection: null,\n      actions: [\n        'edit', 'delete'\n      ]\n    }\n  },\n  created () {\n    this.setDefaultsForNewCollection()\n  },\n  methods: {\n    collectionURL (coll) {\n      return '/collection/' + coll.id\n    },\n    createCollection () {\n      this.newCollection.lastUpdated =\n        firebase.firestore.FieldValue.serverTimestamp()\n      Collections.add(this.newCollection).then(() => {\n        this.collections.push(Object.assign({}, this.newCollection))\n        this.setDefaultsForNewCollection()\n        this.dialog = false\n      })\n    },\n    setDefaultsForNewCollection () {\n      this.newCollection = {\n        name: null,\n        description: null,\n        nArticle: 0,\n        public: false\n      }\n    },\n    commitAction (action, index) {\n      if (action === 'edit') {\n        this.$log.info(action, index)\n      } else if (action === 'delete') {\n        this.$log.info(action, index)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.active {\n  color: rgb(21, 146, 196);\n}\n\n.v-list-item {\n  text-align: left;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionList.vue?vue&type=template&id=17044931&scoped=true&\"\nimport script from \"./CollectionList.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionList.vue?vue&type=style&index=0&id=17044931&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17044931\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemActionText } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VDivider,VIcon,VList,VListItem,VListItemAction,VListItemActionText,VListItemContent,VListItemSubtitle,VListItemTitle,VSpacer,VTextField,VToolbar,VToolbarTitle})\n","<template>\n  <v-app>\n    <NavigationDrawer :drawerOpen=\"true\" :temporary=\"false\" />\n    <v-content>\n      <AppBar />\n      <v-container fluid fill-height>\n        <v-layout row align-top justify-center>\n        <CollectionList ref=\"UserCollections\" />\n        </v-layout>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport AppBar from '@/components/AppBar'\nimport NavigationDrawer from '@/components/NavigationDrawer'\nimport CollectionList from '@/components/CollectionList'\nimport { Account } from '@/Firebase/database'\nimport { getUser } from '@/Firebase/auth'\n\nexport default {\n  name: 'UserPage',\n  components: {\n    AppBar,\n    CollectionList,\n    NavigationDrawer\n  },\n  data: () => ({\n    user: null,\n    activeTab: 'paper',\n    localStore: null,\n    collection: {\n      name: 'Progressive visual analysis',\n      description: null\n    }\n  }),\n  created () {\n    this.user = getUser()\n    if (this.user.isNew) {\n      Account.register(this.user)\n    }\n  },\n  mounted () {\n    Account.getCollections().then(collections => {\n      console.log(collections)\n      this.$refs.UserCollections.collections = collections\n    })\n  },\n  methods: {\n    toggleDrawer () {\n      this.drawer = !this.drawer\n    }\n  }\n}\n</script>\n\n<style scoped>\n.hidden {\n  display: none;\n}\n\n.container {\n  max-width: 1280px;\n}\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=7f1e49e1&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=7f1e49e1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f1e49e1\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VContainer,VContent,VLayout})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-content',[_c('v-app-bar',{attrs:{\"dense\":\"\",\"flat\":\"\",\"app\":\"\",\"clipped-left\":\"\",\"clipped-right\":\"\",\"color\":\"#EEE\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',[_vm._v(\"mdi-arrow-left\")])],1),_c('v-flex',{attrs:{\"justify-center\":\"\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.zoomOut()}}},[_c('v-icon',[_vm._v(\"mdi-magnify-minus-outline\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.zoomIn()}}},[_c('v-icon',[_vm._v(\"mdi-magnify-plus-outline\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber<2},on:{\"click\":function($event){_vm.pageNumber-=1}}},[_c('v-icon',[_vm._v(\"mdi-chevron-left\")])],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pageNumber),expression:\"pageNumber\"}],staticClass:\"page-number-input\",attrs:{\"type\":\"text\",\"value\":\"1\",\"size\":\"2\"},domProps:{\"value\":(_vm.pageNumber)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pageNumber=$event.target.value}}}),_vm._v(\" / \"+_vm._s(_vm.pageTotal)+\"\\n        \"),_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber>=_vm.pageTotal},on:{\"click\":function($event){_vm.pageNumber+=1}}},[_c('v-icon',[_vm._v(\"mdi-chevron-right\")])],1)],1),(_vm.allowPdfFile)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.selectLocalFile}},[_c('v-icon',[_vm._v(\"mdi-file-upload\")])],1):_vm._e(),_c('UserMenu')],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('input',{ref:\"LocalPdfFile\",staticClass:\"hidden\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.loadFile}}),_c('div',{ref:\"viewerContainer\",attrs:{\"id\":\"viewerContainer\"}},[_c('div',{ref:\"pdfViewer\",staticClass:\"pdfViewer\",attrs:{\"id\":\"viewer\"}})]),_c('div',{attrs:{\"id\":\"loadingBar\"}},[_c('div',{staticClass:\"progress\"}),_c('div',{staticClass:\"glimmer\"})]),_c('div',{attrs:{\"id\":\"errorWrapper\",\"hidden\":\"true\"}},[_c('div',{attrs:{\"id\":\"errorMessageLeft\"}},[_c('span',{attrs:{\"id\":\"errorMessage\"}}),_c('button',{attrs:{\"id\":\"errorShowMore\"}},[_vm._v(\"\\n            More Information\\n          \")]),_c('button',{attrs:{\"id\":\"errorShowLess\"}},[_vm._v(\"\\n            Less Information\\n          \")])]),_c('div',{attrs:{\"id\":\"errorMessageRight\"}},[_c('button',{attrs:{\"id\":\"errorClose\"}},[_vm._v(\"\\n            Close\\n          \")])]),_c('div',{staticClass:\"clearBoth\"}),_c('textarea',{attrs:{\"id\":\"errorMoreInfo\",\"hidden\":\"true\",\"readonly\":\"readonly\"}})])])],1),_c('v-navigation-drawer',{staticClass:\"pa-2\",attrs:{\"clipped\":\"\",\"app\":\"\",\"width\":\"18%\"}},[_c('PaperOutline',{attrs:{\"outline\":_vm.outline}})],1),_c('v-navigation-drawer',{attrs:{\"clipped\":\"\",\"app\":\"\",\"right\":\"\",\"width\":\"18%\"},model:{value:(_vm.navRight),callback:function ($$v) {_vm.navRight=$$v},expression:\"navRight\"}},[_c('v-tabs',[_c('v-tab',[_vm._v(\"Snippets\")]),_c('v-tab',[_vm._v(\"Comments\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"text-left\",attrs:{\"flat\":\"\"}},[_c('v-card-title',[_vm._v(\"Outline\")]),_c('v-treeview',{attrs:{\"dense\":\"\",\"open-all\":\"\",\"activatable\":\"\",\"items\":_vm.items},scopedSlots:_vm._u([{key:\"label\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('a',{on:{\"click\":function($event){return _vm.select(item.name)}}},[_vm._v(_vm._s(item.name))])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card flat class=\"text-left\">\n  <v-card-title>Outline</v-card-title>\n  <v-treeview dense open-all activatable :items=\"items\">\n    <template slot=\"label\" slot-scope=\"{ item }\">\n      <a @click=\"select(item.name)\">{{ item.name }}</a>\n    </template>\n  </v-treeview>\n  </v-card>\n</template>\n\n<script>\n  export default {\n    props: {\n      outline: Array\n    },\n    computed: {\n      items () {\n        if (!this.outline) return []\n        let itemId = 0\n        return this.outline.map((item, i) => {\n          return {\n            id: itemId++,\n            name: item.title,\n            children: item.items ? item.items.map(child => {return {id: itemId++, name: child.title}}) : [] \n          }\n        })\n      }\n    },\n    methods: {\n      select (active) {\n        console.log(active)\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperOutline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperOutline.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaperOutline.vue?vue&type=template&id=8d0d9b0c&\"\nimport script from \"./PaperOutline.vue?vue&type=script&lang=js&\"\nexport * from \"./PaperOutline.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VCard,VCardTitle,VTreeview})\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getGlobalEventBus } from 'pdfjs-dist/lib/web/ui_utils';\nimport { renderTextLayer } from 'pdfjs-dist/lib/pdf';\n\nconst EXPAND_DIVS_TIMEOUT = 300; // ms\n\n/**\n * @typedef {Object} TextLayerBuilderOptions\n * @property {HTMLDivElement} textLayerDiv - The text layer container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} pageIndex - The page index.\n * @property {PageViewport} viewport - The viewport of the text layer.\n * @property {PDFFindController} findController\n * @property {boolean} enhanceTextSelection - Option to turn on improved\n *   text selection.\n */\n\n/**\n * The text layer builder provides text selection functionality for the PDF.\n * It does this by creating overlay divs over the PDF's text. These divs\n * contain text that matches the PDF text they are overlaying. This object\n * also provides a way to highlight text that is being searched for.\n */\nclass HighlightTextLayerBuilder {\n  constructor({ textLayerDiv, eventBus, pageIndex, viewport,\n                findController = null, enhanceTextSelection = false, \n                highlights = [], highlightTexts = [] }) {\n    this.textLayerDiv = textLayerDiv;\n    this.eventBus = eventBus || getGlobalEventBus();\n    this.textContent = null;\n    this.textContentItemsStr = [];\n    this.textContentStream = null;\n    this.renderingDone = false;\n    this.pageIdx = pageIndex;\n    this.pageNumber = this.pageIdx + 1;\n    this.matches = [];\n    this.viewport = viewport;\n    this.textDivs = [];\n    this.findController = findController;\n    this.textLayerRenderTask = null;\n    this.enhanceTextSelection = enhanceTextSelection;\n    this.highlights = highlights;\n    this.highlightTexts = highlightTexts;\n\n    this._bindMouse();\n  }\n\n  /**\n   * @private\n   */\n  _finishRendering() {\n    this.renderingDone = true;\n\n    if (!this.enhanceTextSelection) {\n      let endOfContent = document.createElement('div');\n      endOfContent.className = 'endOfContent';\n      this.textLayerDiv.appendChild(endOfContent);\n    }\n\n    this.eventBus.dispatch('textlayerrendered', {\n      source: this,\n      pageNumber: this.pageNumber,\n      numTextDivs: this.textDivs.length,\n    });\n  }\n\n  /**\n   * Renders the text layer.\n   *\n   * @param {number} timeout - (optional) wait for a specified amount of\n   *                           milliseconds before rendering\n   */\n  render(timeout = 0) {\n    if (!(this.textContent || this.textContentStream) || this.renderingDone) {\n      return;\n    }\n    this.cancel();\n\n    this.textDivs = [];\n    let textLayerFrag = document.createDocumentFragment();\n    this.textLayerRenderTask = renderTextLayer({\n      textContent: this.textContent,\n      textContentStream: this.textContentStream,\n      container: textLayerFrag,\n      viewport: this.viewport,\n      textDivs: this.textDivs,\n      textContentItemsStr: this.textContentItemsStr,\n      timeout,\n      enhanceTextSelection: this.enhanceTextSelection,\n    });\n    this.textLayerRenderTask.promise.then(() => {\n      this.textLayerDiv.appendChild(textLayerFrag);\n      this._finishRendering();\n      this.updateMatches();\n      this.updateHighlights();\n    }, function (reason) {\n      // Cancelled or failed to render text layer; skipping errors.\n    });\n  }\n\n  /**\n   * Cancel rendering of the text layer.\n   */\n  cancel() {\n    if (this.textLayerRenderTask) {\n      this.textLayerRenderTask.cancel();\n      this.textLayerRenderTask = null;\n    }\n  }\n\n  setTextContentStream(readableStream) {\n    this.cancel();\n    this.textContentStream = readableStream;\n  }\n\n  setTextContent(textContent) {\n    this.cancel();\n    this.textContent = textContent;\n  }\n\n  convertMatches(matches, matchesLength) {\n    let i = 0;\n    let iIndex = 0;\n    let textContentItemsStr = this.textContentItemsStr;\n    let end = textContentItemsStr.length - 1;\n    let queryLen = (this.findController === null || matchesLength ?\n                    0 : this.findController.state.query.length);\n    let ret = [];\n    if (!matches) {\n      return ret;\n    }\n    for (let m = 0, len = matches.length; m < len; m++) {\n      // Calculate the start position.\n      let matchIdx = matches[m];\n\n      // Loop over the divIdxs.\n      while (i !== end && matchIdx >=\n             (iIndex + textContentItemsStr[i].length)) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n\n      if (i === textContentItemsStr.length) {\n        console.error('Could not find a matching mapping');\n      }\n\n      let match = {\n        begin: {\n          divIdx: i,\n          offset: matchIdx - iIndex,\n        },\n      };\n\n      // Calculate the end position.\n      if (matchesLength) { // Multiterm search.\n        matchIdx += matchesLength[m];\n      } else { // Phrase search.\n        matchIdx += queryLen;\n      }\n\n      // Somewhat the same array as above, but use > instead of >= to get\n      // the end position right.\n      while (i !== end && matchIdx >\n             (iIndex + textContentItemsStr[i].length)) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n\n      match.end = {\n        divIdx: i,\n        offset: matchIdx - iIndex,\n      };\n      ret.push(match);\n    }\n\n    return ret;\n  }\n\n  renderMatches(matches) {\n    // Early exit if there is nothing to render.\n    if (matches.length === 0) {\n      return;\n    }\n\n    let textContentItemsStr = this.textContentItemsStr;\n    let textDivs = this.textDivs;\n    let prevEnd = null;\n    let pageIdx = this.pageIdx;\n    let isSelectedPage = (this.findController === null ?\n      false : (pageIdx === this.findController.selected.pageIdx));\n    let selectedMatchIdx = (this.findController === null ?\n                            -1 : this.findController.selected.matchIdx);\n    let highlightAll = (this.findController === null ?\n                        false : this.findController.state.highlightAll);\n    let infinity = {\n      divIdx: -1,\n      offset: undefined,\n    };\n\n    function beginText(begin, className) {\n      let divIdx = begin.divIdx;\n      textDivs[divIdx].textContent = '';\n      appendTextToDiv(divIdx, 0, begin.offset, className);\n    }\n\n    function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n      let div = textDivs[divIdx];\n      let content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);\n      let node = document.createTextNode(content);\n      if (className) {\n        let span = document.createElement('span');\n        span.className = className;\n        span.appendChild(node);\n        div.appendChild(span);\n        return;\n      }\n      div.appendChild(node);\n    }\n\n    let i0 = selectedMatchIdx, i1 = i0 + 1;\n    if (highlightAll) {\n      i0 = 0;\n      i1 = matches.length;\n    } else if (!isSelectedPage) {\n      // Not highlighting all and this isn't the selected page, so do nothing.\n      return;\n    }\n\n    for (let i = i0; i < i1; i++) {\n      let match = matches[i];\n      let begin = match.begin;\n      let end = match.end;\n      let isSelected = (isSelectedPage && i === selectedMatchIdx);\n      let highlightSuffix = (isSelected ? ' selected' : '');\n\n      if (this.findController) {\n        this.findController.updateMatchPosition(pageIdx, i, textDivs,\n                                                begin.divIdx);\n      }\n\n      // Match inside new div.\n      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n        // If there was a previous div, then add the text at the end.\n        if (prevEnd !== null) {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n        }\n        // Clear the divs and set the content until the starting point.\n        beginText(begin);\n      } else {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n      }\n\n      if (begin.divIdx === end.divIdx) {\n        appendTextToDiv(begin.divIdx, begin.offset, end.offset,\n                        'highlight' + highlightSuffix);\n      } else {\n        appendTextToDiv(begin.divIdx, begin.offset, infinity.offset,\n                        'highlight begin' + highlightSuffix);\n        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n          textDivs[n0].className = 'highlight middle' + highlightSuffix;\n        }\n        beginText(end, 'highlight end' + highlightSuffix);\n      }\n      prevEnd = end;\n    }\n\n    if (prevEnd) {\n      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n    }\n  }\n\n  updateMatches() {\n    // Only show matches when all rendering is done.\n    if (!this.renderingDone) {\n      return;\n    }\n\n    // Clear all matches.\n    let matches = this.matches;\n    let textDivs = this.textDivs;\n    let textContentItemsStr = this.textContentItemsStr;\n    let clearedUntilDivIdx = -1;\n\n    // Clear all current matches.\n    for (let i = 0, len = matches.length; i < len; i++) {\n      let match = matches[i];\n      let begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n      for (let n = begin, end = match.end.divIdx; n <= end; n++) {\n        let div = textDivs[n];\n        div.textContent = textContentItemsStr[n];\n        div.className = '';\n      }\n      clearedUntilDivIdx = match.end.divIdx + 1;\n    }\n\n    if (this.findController === null || !this.findController.active) {\n      return;\n    }\n\n    // Convert the matches on the page controller into the match format\n    // used for the textLayer.\n    let pageMatches, pageMatchesLength;\n    if (this.findController !== null) {\n      pageMatches = this.findController.pageMatches[this.pageIdx] || null;\n      pageMatchesLength = (this.findController.pageMatchesLength) ?\n        this.findController.pageMatchesLength[this.pageIdx] || null : null;\n    }\n\n    this.matches = this.convertMatches(pageMatches, pageMatchesLength);\n    this.renderMatches(this.matches);\n  }\n\n  renderHighlights(highlights) {\n    // Early exit if there is nothing to render.\n    if (highlights.length === 0) {\n      return;\n    }\n\n    let textContentItemsStr = this.textContentItemsStr;\n    let textDivs = this.textDivs;\n    let prevEnd = null;\n    let infinity = {\n      divIdx: -1,\n      offset: undefined,\n    };\n\n    function beginText(begin, className, style) {\n      let divIdx = begin.divIdx;\n      textDivs[divIdx].textContent = '';\n      appendTextToDiv(divIdx, 0, begin.offset, className, style);\n    }\n\n    function appendTextToDiv(divIdx, fromOffset, toOffset, className, style) {\n      let div = textDivs[divIdx];\n      let content = textContentItemsStr[divIdx].substring(fromOffset, toOffset);\n      let node = document.createTextNode(content);\n      if (className) {\n        let span = document.createElement('span');\n        span.className = className;\n        Object.assign(span.style, style);\n        span.appendChild(node);\n        div.appendChild(span);\n        return;\n      }\n      div.appendChild(node);\n    }\n\n    let i0 = 0;\n    let i1 = highlights.length;\n\n    for (let i = i0; i < i1; i++) {\n      let highlight = highlights[i];\n      let begin = highlight.begin;\n      let end = highlight.end;\n      let highlightSuffix = '';\n\n      // Highlight inside new div.\n      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n        // If there was a previous div, then add the text at the end.\n        if (prevEnd !== null) {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset,\n                          { backgroundColor: highlight.bgColor });\n        }\n        // Clear the divs and set the content until the starting point.\n        beginText(begin);\n      } else {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset,\n                        { backgroundColor: highlight.bgColor });\n      }\n\n      if (begin.divIdx === end.divIdx) {\n        appendTextToDiv(begin.divIdx, begin.offset, end.offset,\n                        'highlight' + highlightSuffix,\n                        { backgroundColor: highlight.bgColor });\n      } else {\n        appendTextToDiv(begin.divIdx, begin.offset, infinity.offset,\n                        'highlight begin' + highlightSuffix,\n                        { backgroundColor: highlight.bgColor });\n        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n          textDivs[n0].className = 'highlight middle' + highlightSuffix;\n          Object.assign(\n            textDivs[n0].style, { backgroundColor: highlight.bgColor})\n        }\n        beginText(end, 'highlight end' + highlightSuffix,\n                  { backgroundColor: highlight.bgColor });\n      }\n      prevEnd = end;\n    }\n\n    if (prevEnd) {\n      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n    }\n  }\n\n  updateHighlights() {\n    // console.log('updateHighlights =>', 'renderingDone:', this.renderingDone, 'pageIdx:', this.pageIdx, 'highlightTexts:', this.highlightTexts)\n    // Only show highlights when all rendering is done.\n    if (!this.renderingDone) {\n      return;\n    }\n\n    // Clear all highlights.\n    let highlights = this.highlights;\n    let textDivs = this.textDivs;\n    let textContentItemsStr = this.textContentItemsStr;\n    let clearedUntilDivIdx = -1;\n\n    // Clear all current highlights.\n    for (let i = 0, len = highlights.length; i < len; i++) {\n      let highlight = highlights[i];\n      let begin = Math.max(clearedUntilDivIdx, highlight.begin.divIdx);\n      for (let n = begin, end = highlight.end.divIdx; n <= end; n++) {\n        let div = textDivs[n];\n        div.textContent = textContentItemsStr[n];\n        div.className = '';\n        div.style.backgroundColor = null;\n      }\n      clearedUntilDivIdx = highlight.end.divIdx + 1;\n    }\n\n    // get highlight text matches and convert to divIdx and offset\n    const pageContent = this.findController._pageContents[this.pageIdx]\n    const matchPageOffsets = []\n    const matchLengths = []\n    const matchColors = []\n    this.highlightTexts.forEach(({ text, bgColor }) => {\n      const offset = pageContent.indexOf(text)\n      if (offset !== -1) {\n        matchPageOffsets.push(pageContent.indexOf(text))\n        matchLengths.push(text.length)\n        matchColors.push(bgColor)\n      }\n    })\n    const matches = this.convertMatches(matchPageOffsets, matchLengths)\n    this.highlights = matches.map((match, index) => ({\n      ...match,\n      bgColor: matchColors[index]\n    }))\n    // const bothHighlights = [ ...this.highlights, ...matchedHighlights ]\n\n    // this.renderHighlights(bothHighlights);\n    this.renderHighlights(this.highlights)\n  }\n\n  /**\n   * Improves text selection by adding an additional div where the mouse was\n   * clicked. This reduces flickering of the content if the mouse is slowly\n   * dragged up or down.\n   *\n   * @private\n   */\n  _bindMouse() {\n    let div = this.textLayerDiv;\n    let expandDivsTimer = null;\n\n    div.addEventListener('mousedown', (evt) => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        this.textLayerRenderTask.expandTextDivs(true);\n        if ((typeof PDFJSDev === 'undefined' ||\n             !PDFJSDev.test('FIREFOX || MOZCENTRAL')) &&\n            expandDivsTimer) {\n          clearTimeout(expandDivsTimer);\n          expandDivsTimer = null;\n        }\n        return;\n      }\n\n      let end = div.querySelector('.endOfContent');\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === 'undefined' ||\n          !PDFJSDev.test('FIREFOX || MOZCENTRAL')) {\n        // On non-Firefox browsers, the selection will feel better if the height\n        // of the `endOfContent` div is adjusted to start at mouse click\n        // location. This avoids flickering when the selection moves up.\n        // However it does not work when selection is started on empty space.\n        let adjustTop = evt.target !== div;\n        if (typeof PDFJSDev === 'undefined' || PDFJSDev.test('GENERIC')) {\n          adjustTop = adjustTop && window.getComputedStyle(end).\n            getPropertyValue('-moz-user-select') !== 'none';\n        }\n        if (adjustTop) {\n          let divBounds = div.getBoundingClientRect();\n          let r = Math.max(0, (evt.pageY - divBounds.top) / divBounds.height);\n          end.style.top = (r * 100).toFixed(2) + '%';\n        }\n      }\n      end.classList.add('active');\n    });\n\n    div.addEventListener('mouseup', () => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        if (typeof PDFJSDev === 'undefined' ||\n            !PDFJSDev.test('FIREFOX || MOZCENTRAL')) {\n          expandDivsTimer = setTimeout(() => {\n            if (this.textLayerRenderTask) {\n              this.textLayerRenderTask.expandTextDivs(false);\n            }\n            expandDivsTimer = null;\n          }, EXPAND_DIVS_TIMEOUT);\n        } else {\n          this.textLayerRenderTask.expandTextDivs(false);\n        }\n        return;\n      }\n\n      let end = div.querySelector('.endOfContent');\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === 'undefined' ||\n          !PDFJSDev.test('FIREFOX || MOZCENTRAL')) {\n        end.style.top = '';\n      }\n      end.classList.remove('active');\n    });\n  }\n}\n\nexport {\n  HighlightTextLayerBuilder\n};","<template>\r\n  <v-app>\r\n    <v-content>\r\n      <v-app-bar dense flat app clipped-left clipped-right color=\"#EEE\">\r\n        <v-btn icon @click=\"$router.go(-1)\">\r\n          <v-icon>mdi-arrow-left</v-icon>\r\n        </v-btn>\r\n        <v-flex justify-center>\r\n          <v-btn icon @click=\"zoomOut()\">\r\n            <v-icon>mdi-magnify-minus-outline</v-icon>\r\n          </v-btn>\r\n          <v-btn icon @click=\"zoomIn()\">\r\n            <v-icon>mdi-magnify-plus-outline</v-icon>\r\n          </v-btn>\r\n          <v-btn icon :disabled=\"pageNumber<2\" @click=\"pageNumber-=1\">\r\n            <v-icon>mdi-chevron-left</v-icon>\r\n          </v-btn>\r\n          <input type=\"text\" value=\"1\" size=\"2\" v-model=\"pageNumber\" class=\"page-number-input\"/> / {{pageTotal}}\r\n          <v-btn icon :disabled=\"pageNumber>=pageTotal\" @click=\"pageNumber+=1\">\r\n            <v-icon>mdi-chevron-right</v-icon>\r\n          </v-btn>\r\n        </v-flex>\r\n        <v-btn icon v-if=\"allowPdfFile\" @click=\"selectLocalFile\">\r\n          <v-icon>mdi-file-upload</v-icon>\r\n        </v-btn>\r\n        <UserMenu></UserMenu>\r\n      </v-app-bar>\r\n      <v-container fluid>\r\n        <input type=\"file\" class=\"hidden\" ref=\"LocalPdfFile\" @change=\"loadFile\" />\r\n        <div id=\"viewerContainer\" ref=\"viewerContainer\">\r\n          <div id=\"viewer\" ref=\"pdfViewer\" class=\"pdfViewer\"></div>\r\n        </div>\r\n        <div id=\"loadingBar\">\r\n          <div class=\"progress\"></div>\r\n          <div class=\"glimmer\"></div>\r\n        </div>\r\n        <div id=\"errorWrapper\" hidden=\"true\">\r\n          <div id=\"errorMessageLeft\">\r\n            <span id=\"errorMessage\"></span>\r\n            <button id=\"errorShowMore\">\r\n              More Information\r\n            </button>\r\n            <button id=\"errorShowLess\">\r\n              Less Information\r\n            </button>\r\n          </div>\r\n          <div id=\"errorMessageRight\">\r\n            <button id=\"errorClose\">\r\n              Close\r\n            </button>\r\n          </div>\r\n          <div class=\"clearBoth\"></div>\r\n          <textarea id=\"errorMoreInfo\" hidden=\"true\" readonly=\"readonly\"></textarea>\r\n        </div>\r\n        <!-- <PdfViewer ref=\"PdfViewer\" :class=\"{hidden: loading}\" /> -->\r\n      </v-container>\r\n    </v-content>\r\n        <v-navigation-drawer\r\n      clipped\r\n      app\r\n      width=\"18%\"\r\n      class=\"pa-2\"\r\n    >\r\n    <PaperOutline :outline=\"outline\" />\r\n    </v-navigation-drawer>\r\n    <v-navigation-drawer\r\n      clipped\r\n      app\r\n      right\r\n      width=\"18%\"\r\n      v-model=\"navRight\"\r\n    >\r\n      <v-tabs>\r\n        <v-tab>Snippets</v-tab>\r\n        <v-tab>Comments</v-tab>\r\n      </v-tabs>\r\n    </v-navigation-drawer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport UserMenu from '@/components/UserMenu'\r\nimport PaperOutline from '@/components/PaperOutline'\r\n// import PdfViewer from '@/components/PdfViewer'\r\nimport { getPdfFileUrl } from '@/Firebase/storage'\r\nimport pdfjsLib from 'pdfjs-dist'\r\nimport * as pdfjsViewer from 'pdfjs-dist/web/pdf_viewer.js'\r\nimport 'pdfjs-dist/web/pdf_viewer.css'\r\nimport { PDFFindController } from 'pdfjs-dist/lib/web/pdf_find_controller.js'\r\nimport { HighlightTextLayerBuilder } from '@/utils/HighlightTextLayerBuilder.js'\r\n\r\npdfjsLib.GlobalWorkerOptions.workerSrc = '../../node_modules/pdfjs-dist/build/pdf.worker.js'\r\n\r\nlet MAX_IMAGE_SIZE = 1024 * 1024 * 8\r\nlet CMAP_URL = '../../node_modules/pdfjs-dist/cmaps/'\r\nlet CMAP_PACKED = true\r\nlet DEFAULT_SCALE_DELTA = 1.1\r\nlet MIN_SCALE = 0.25\r\nlet MAX_SCALE = 10.0\r\nlet DEFAULT_SCALE_VALUE = 'auto'\r\n\r\nexport default {\r\n  name: 'PaperReader',\r\n  components: {\r\n    UserMenu,\r\n    PaperOutline\r\n    // PdfViewer\r\n  },\r\n  data: () => ({\r\n    user: null,\r\n    collectionId: null,\r\n    paperId: null,\r\n    loading: true,\r\n    allowPdfFile: false,\r\n    navRight: true,\r\n    pdfLoadingTask: null,\r\n    pdfDocument: null,\r\n    pdfViewer: null,\r\n    pdfHistory: null,\r\n    pdfLinkService: null,\r\n    pageNumber: 1,\r\n    outline: null,\r\n    highlightLayers: []\r\n  }),\r\n  computed: {\r\n    pageTotal () {\r\n      return this.pdfDocument ? this.pdfDocument.numPages : 1;\r\n    },\r\n    loadingBar () {\r\n      let bar = new pdfjsViewer.ProgressBar('#loadingBar', {})\r\n      return pdfjsLib.shadow(this, 'loadingBar', bar)\r\n    }\r\n  },\r\n  watch: {\r\n    pageNumber () {\r\n      if (typeof this.pageNumber === 'string') {\r\n        this.pageNumber = parseInt(this.pageNumber)\r\n      }\r\n      // this.pdfViewer.currentPageNumber = this.pageNumber\r\n      document.getElementsByClassName('page')[this.pageNumber - 1].scrollIntoView()\r\n    }\r\n  },\r\n  created () {\r\n    this.collectionId = this.$route.params.collectionId\r\n    this.paperId = this.$route.params.paperId\r\n  },\r\n  async mounted () {\r\n    this.initPdfViewer()\r\n    if (this.collectionId && this.paperId) {\r\n      let url = await getPdfFileUrl(this.collectionId, this.paperId)\r\n      try {\r\n        this.open({url})\r\n      } catch(error) {\r\n        console.log(error)\r\n      }\r\n    } else {\r\n      this.allowPdfFile = true\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    initPdfViewer () {\r\n      this.l10n = pdfjsViewer.NullL10n\r\n      let container = this.$refs.viewerContainer\r\n      this.pdfLinkService = new pdfjsViewer.PDFLinkService()\r\n      this.findController = new PDFFindController({\r\n        linkService: this.pdfLinkService\r\n      })\r\n      this.pdfViewer = new pdfjsViewer.PDFViewer({\r\n        container: container,\r\n        linkService: this.pdfLinkService,\r\n        findController: this.findController,\r\n        l10n: this.l10n,\r\n        useOnlyCssZoom: 0,\r\n        textLayerMode: 1\r\n        // currentScaleValue: DEFAULT_SCALE_VALUE\r\n      })\r\n      const highlightTexts = [\r\n        {\r\n          text: 'Abstract',\r\n          bgColor: 'orange'\r\n        }\r\n      ];\r\n      const highlights = [ // pages\r\n        [ // highlights per page\r\n          {\r\n            begin: { divIdx: 21, offset: 4 },\r\n            end: { divIdx: 21, offset: 16 },\r\n            bgColor: 'yellow'\r\n          },\r\n          {\r\n            begin: { divIdx: 22, offset: 32 },\r\n            end: { divIdx: 23, offset: 8 },\r\n            bgColor: 'red'\r\n          },\r\n          {\r\n            begin: { divIdx: 24, offset: 64 },\r\n            end: { divIdx: 28, offset: 32 },\r\n            bgColor: 'blue'\r\n          }\r\n        ]\r\n      ];\r\n      let self = this\r\n      this.pdfViewer.createTextLayerBuilder =\r\n        function (\r\n          textLayerDiv, pageIndex, viewport, enhanceTextSelection = false)  {\r\n            return new HighlightTextLayerBuilder({\r\n              textLayerDiv,\r\n              eventBus: this.eventBus,\r\n              pageIndex,\r\n              viewport,\r\n              findController:\r\n                this.isInPresentationMode ? null : this.findController,\r\n              enhanceTextSelection:\r\n                this.isInPresentationMode ? false : enhanceTextSelection,\r\n              highlights: highlights[pageIndex] || [],\r\n              highlightTexts: highlightTexts || []\r\n            })\r\n          }\r\n      this.pdfLinkService.setViewer(this.pdfViewer)\r\n      this.pdfHistory = new pdfjsViewer.PDFHistory({\r\n        linkService: this.pdfLinkService\r\n      })\r\n      this.pdfLinkService.setHistory(this.pdfHistory)\r\n    },\r\n\r\n    open (params) {\r\n      if (this.pdfLoadingTask) {\r\n        return this.close().then(() => {\r\n          return this.open(params)\r\n        })\r\n      }\r\n\r\n      this.pdfLoadingTask = pdfjsLib.getDocument({\r\n        url: params.url,\r\n        maxImageSize: MAX_IMAGE_SIZE,\r\n        cMapUrl: CMAP_URL,\r\n        cMapPacked: CMAP_PACKED\r\n      })\r\n\r\n      this.pdfLoadingTask.onProgress = (progressData) => {\r\n        this.progress(progressData.loaded / progressData.total)\r\n      }\r\n\r\n      return this.pdfLoadingTask.promise.then(pdfDocument => {\r\n        this.pdfDocument = pdfDocument\r\n        this.pdfViewer.setDocument(pdfDocument)\r\n        this.pdfLinkService.setDocument(pdfDocument)\r\n        this.pdfHistory.initialize({fingerprint: pdfDocument.fingerprint})\r\n        this.loadingBar.hide()\r\n        this.pdfViewer.currentScaleValue = 1.25\r\n        this.showOutline(pdfDocument)\r\n        this.findController.setDocument(pdfDocument)\r\n        this.findController._extractText()\r\n        return pdfDocument\r\n      }, (exception) => {\r\n        let message = exception && exception.message\r\n        let l10n = this.l10n\r\n        let loadingErrorMessage\r\n\r\n        if (exception instanceof pdfjsLib.InvalidPDFException) {\r\n          // change error message also for other builds\r\n          loadingErrorMessage = l10n.get('invalid_file_error', null,\r\n            'Invalid or corrupted PDF file.')\r\n        } else if (exception instanceof pdfjsLib.MissingPDFException) {\r\n          // special message for missing PDFs\r\n          loadingErrorMessage = l10n.get('missing_file_error', null,\r\n            'Missing PDF file.')\r\n        } else if (exception instanceof pdfjsLib.UnexpectedResponseException) {\r\n          loadingErrorMessage = l10n.get('unexpected_response_error', null,\r\n            'Unexpected server response.')\r\n        } else {\r\n          loadingErrorMessage = l10n.get('loading_error', null,\r\n            'An error occurred while loading the PDF.')\r\n        }\r\n\r\n        loadingErrorMessage.then(msg => {\r\n          this.error(msg, { message })\r\n        })\r\n        this.loadingBar.hide()\r\n      })\r\n    },\r\n\r\n    close () {\r\n      let errorWrapper = document.getElementById('errorWrapper')\r\n      errorWrapper.setAttribute('hidden', 'true')\r\n      if (!this.pdfLoadingTask) {\r\n        return Promise.resolve()\r\n      }\r\n      let promise = this.pdfLoadingTask.destroy()\r\n      this.pdfLoadingTask = null\r\n\r\n      if (this.pdfDocument) {\r\n        this.pdfDocument = null\r\n        this.pdfViewer.setDocument(null)\r\n        this.pdfLinkService.setDocument(null, null)\r\n      }\r\n      return promise\r\n    },\r\n\r\n    error: function pdfViewError(message, moreInfo) {\r\n      let l10n = this.l10n;\r\n      let moreInfoText = [l10n.get('error_version_info',\r\n        { version: pdfjsLib.version || '?',\r\n          build: pdfjsLib.build || '?', },\r\n        'PDF.js v{{version}} (build: {{build}})')]\r\n\r\n      if (moreInfo) {\r\n        moreInfoText.push(\r\n          l10n.get('error_message', { message: moreInfo.message },\r\n            'Message: {{message}}'))\r\n        if (moreInfo.stack) {\r\n          moreInfoText.push(\r\n            l10n.get('error_stack', { stack: moreInfo.stack },\r\n              'Stack: {{stack}}'))\r\n        } else {\r\n          if (moreInfo.filename) {\r\n            moreInfoText.push(\r\n              l10n.get('error_file', { file: moreInfo.filename },\r\n                'File: {{file}}'))\r\n          }\r\n          if (moreInfo.lineNumber) {\r\n            moreInfoText.push(\r\n              l10n.get('error_line', { line: moreInfo.lineNumber },\r\n                'Line: {{line}}'))\r\n          }\r\n        }\r\n      }\r\n\r\n      let errorWrapper = document.getElementById('errorWrapper')\r\n      let errorMessage = document.getElementById('errorMessage')\r\n      let closeButton = document.getElementById('errorClose')\r\n      errorWrapper.removeAttribute('hidden')\r\n      errorMessage.textContent = message\r\n      closeButton.onclick = function() {\r\n        errorWrapper.setAttribute('hidden', 'true')\r\n      }\r\n\r\n      let errorMoreInfo = document.getElementById('errorMoreInfo')\r\n      let moreInfoButton = document.getElementById('errorShowMore')\r\n      let lessInfoButton = document.getElementById('errorShowLess')\r\n      moreInfoButton.onclick = function() {\r\n        errorMoreInfo.removeAttribute('hidden')\r\n        moreInfoButton.setAttribute('hidden', 'true')\r\n        lessInfoButton.removeAttribute('hidden')\r\n        errorMoreInfo.style.height = errorMoreInfo.scrollHeight + 'px'\r\n      };\r\n      lessInfoButton.onclick = function() {\r\n        errorMoreInfo.setAttribute('hidden', 'true')\r\n        moreInfoButton.removeAttribute('hidden')\r\n        lessInfoButton.setAttribute('hidden', 'true')\r\n      };\r\n      moreInfoButton.removeAttribute('hidden')\r\n      lessInfoButton.setAttribute('hidden', 'true')\r\n      Promise.all(moreInfoText).then(function (parts) {\r\n        errorMoreInfo.value = parts.join('\\n')\r\n      })\r\n    },\r\n\r\n    progress (level) {\r\n      let percent = Math.round(level * 100)\r\n      // Updating the bar if value increases.\r\n      if (percent > this.loadingBar.percent || isNaN(percent)) {\r\n        this.loadingBar.percent = percent\r\n      }\r\n    },\r\n\r\n    zoomIn (ticks) {\r\n      let newScale = this.pdfViewer.currentScale\r\n      do {\r\n        newScale = (newScale * DEFAULT_SCALE_DELTA).toFixed(2)\r\n        newScale = Math.ceil(newScale * 10) / 10\r\n        newScale = Math.min(MAX_SCALE, newScale)\r\n      } while (--ticks && newScale < MAX_SCALE)\r\n      this.pdfViewer.currentScaleValue = newScale\r\n      this.highlightLayers[0].updateHighlights([{text: 'P4', bgColor: 'red'}])\r\n    },\r\n\r\n    zoomOut (ticks) {\r\n      let newScale = this.pdfViewer.currentScale\r\n      do {\r\n        newScale = (newScale / DEFAULT_SCALE_DELTA).toFixed(2)\r\n        newScale = Math.floor(newScale * 10) / 10\r\n        newScale = Math.max(MIN_SCALE, newScale)\r\n      } while (--ticks && newScale > MIN_SCALE)\r\n      this.pdfViewer.currentScaleValue = newScale\r\n    },\r\n\r\n    loadFile ($event) {\r\n      let file = $event.target.files[0]\r\n      if (file) {\r\n        let url = URL.createObjectURL(file)\r\n        this.open({url})\r\n      }\r\n    },\r\n\r\n    selectLocalFile () {\r\n      const elem = this.$refs.LocalPdfFile\r\n      elem.click()\r\n    },\r\n\r\n    async showOutline (pdfDoc) {\r\n      this.outline = await pdfDoc.getOutline()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.page-number-input {\r\n  width: 2.5em;\r\n  line-height: 15px;\r\n  text-align: right;\r\n  padding-right: 0.25em;\r\n  border: 1px solid #aaa;\r\n  margin-right: 0.5em;\r\n}\r\n\r\n.pdfViewer .page {\r\n  border-image: none;\r\n  border: 1px solid #ccc;\r\n  margin: 0.5em auto;\r\n}\r\n\r\n.viewerContainer {\r\n  margin: auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperReader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperReader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaperReader.vue?vue&type=template&id=2e916ebb&\"\nimport script from \"./PaperReader.vue?vue&type=script&lang=js&\"\nexport * from \"./PaperReader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PaperReader.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VApp,VAppBar,VBtn,VContainer,VContent,VFlex,VIcon,VNavigationDrawer,VTab,VTabs})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-content',[_c('v-app-bar',{attrs:{\"flat\":\"\",\"app\":\"\",\"clipped-left\":\"\",\"clipped-right\":\"\",\"color\":\"#EEE\"}},[(_vm.highlightTexts)?_c('v-tabs',{attrs:{\"centered\":\"\",\"background-color\":\"#EEE\",\"icons-and-text\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tabs-slider'),_c('v-tab',{attrs:{\"href\":\"#tab-1\"}},[_vm._v(\"\\n          Full Text\\n          \"),_c('v-icon',[_vm._v(\"mdi-file\")])],1),_c('v-tab',{attrs:{\"href\":\"#tab-2\"}},[_vm._v(\"\\n          Focused\\n          \"),_c('v-icon',[_vm._v(\"mdi-format-list-bulleted-square\")])],1)],1):_vm._e()],1),_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('PdfViewer',{ref:\"PdfViewer\",class:{hidden: _vm.tab != 'tab-1'},attrs:{\"pdfUrl\":_vm.paperUrl,\"allowLocalFile\":_vm.allowLocalFile,\"highlightTexts\":_vm.highlightTexts},on:{\"pdfLoaded\":_vm.onPdfLoaded}}),_c('v-card',{staticClass:\"pa-2\",class:{hidden: _vm.tab != 'tab-2'},attrs:{\"flat\":\"\"}},[_vm._l((_vm.quotes),function(quote,i){return [_c('ul',{key:i,staticClass:\"quotes\"},[_c('h3',[_vm._v(_vm._s(quote.title))]),_vm._l((quote.lines),function(line,j){return [_c('li',{key:j},[_vm._v(\"\\n              \"+_vm._s(line)+\"\\n            \")])]})],2)]})],2)],1)],1),_c('v-navigation-drawer',{staticClass:\"pa-2\",attrs:{\"clipped\":\"\",\"app\":\"\",\"width\":\"18%\"}},[_c('PaperOutline',{attrs:{\"outline\":_vm.outline}})],1),_c('v-navigation-drawer',{attrs:{\"clipped\":\"\",\"app\":\"\",\"right\":\"\",\"width\":\"18%\"},model:{value:(_vm.navRight),callback:function ($$v) {_vm.navRight=$$v},expression:\"navRight\"}},[_c('KeywordList',{attrs:{\"terms\":_vm.keywords,\"colors\":_vm.hightlightColors},on:{\"highlight\":_vm.highlightByKeywords,\"unhighlight\":_vm.removeHighlights,\"updateHighlight\":_vm.removeHighlights}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"text-left pa-5\",attrs:{\"flat\":\"\",\"tile\":\"\"}},[_c('v-switch',{staticClass:\"ma-1\",scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(\"\\n      Auto Highlight By Keywords\\n      \")]},proxy:true}]),model:{value:(_vm.autoHighlight),callback:function ($$v) {_vm.autoHighlight=$$v},expression:\"autoHighlight\"}}),_c('v-card-title',[_vm._v(\"\\n    Topics / Keywords\\n    \"),_c('v-icon',{staticClass:\"ml-3\",on:{\"click\":function($event){_vm.editKeyword=!_vm.editKeyword}}},[_vm._v(_vm._s(_vm.keywordIcon))])],1),(!_vm.editKeyword)?_c('v-list',{attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"color\":_vm.selectedKeywordColor},model:{value:(_vm.selectedKeyword),callback:function ($$v) {_vm.selectedKeyword=$$v},expression:\"selectedKeyword\"}},_vm._l((_vm.keywords),function(keyword,i){return _c('v-list-item',{key:i,attrs:{\"dense\":\"\"}},[(_vm.autoHighlight)?_c('v-list-item-action',{staticClass:\"mr-2\"},[_c('v-checkbox',{attrs:{\"color\":keyword.color},on:{\"change\":function($event){return _vm.updateHighlight(keyword)}},model:{value:(keyword.active),callback:function ($$v) {_vm.$set(keyword, \"active\", $$v)},expression:\"keyword.active\"}})],1):_vm._e(),_c('v-list-item-content',{class:{'keywords-no-checkbox': !_vm.autoHighlight}},[_vm._v(\"\\n          \"+_vm._s(keyword.term)+\"\\n        \")])],1)}),1)],1):_vm._e(),(_vm.editKeyword)?_c('v-list',{attrs:{\"dense\":\"\"}},_vm._l((_vm.keywords),function(keyword,i){return _c('v-list-item',{key:i,attrs:{\"dense\":\"\"}},[_c('v-list-item-action',{staticClass:\"mr-1\"},[_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":keyword.color}},[_vm._v(\"mdi-square\")])],1)],1),_c('v-list-item-content',[_c('v-text-field',{attrs:{\"color\":keyword.color},model:{value:(keyword.term),callback:function ($$v) {_vm.$set(keyword, \"term\", $$v)},expression:\"keyword.term\"}})],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.removeKeyword(keyword.term)}}},[_c('v-icon',{attrs:{\"color\":\"grey lighten-1\",\"title\":\"remove keyword\"}},[_vm._v(\"\\n            mdi-close-circle\\n          \")])],1)],1)],1)}),1):_vm._e(),_c('v-card-actions',[_c('v-text-field',{staticClass:\"mt-5\",attrs:{\"label\":\"Add Keywords\",\"items\":_vm.suggestedTerms,\"flat\":\"\",\"filled\":\"\",\"rounded\":\"\",\"append-icon\":\"mdi-plus\"},on:{\"click:append\":_vm.addKeyword},model:{value:(_vm.newKeywordTerm),callback:function ($$v) {_vm.newKeywordTerm=$$v},expression:\"newKeywordTerm\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card\n    class=\"text-left pa-5\"\n    flat\n    tile\n  >\n    <v-switch v-model=\"autoHighlight\" class=\"ma-1\">\n      <template v-slot:label>\n        Auto Highlight By Keywords\n        <!-- <v-progress-circular \n          :indeterminate=\"highlightInProcess\"\n          :value=\"0\"\n          class=\"ml-1\"\n          size=\"24\"\n        >\n        </v-progress-circular> -->\n      </template>\n    </v-switch>\n    <v-card-title>\n      Topics / Keywords\n      <v-icon @click=\"editKeyword=!editKeyword\" class=\"ml-3\">{{keywordIcon}}</v-icon>\n    </v-card-title>\n    <v-list rounded dense v-if=\"!editKeyword\">\n      <v-list-item-group v-model=\"selectedKeyword\" :color=\"selectedKeywordColor\">\n        <v-list-item v-for=\"(keyword, i) in keywords\" :key=\"i\" dense>\n          <v-list-item-action v-if=\"autoHighlight\" class=\"mr-2\">\n            <v-checkbox\n              v-model=\"keyword.active\"\n              :color=\"keyword.color\"\n              @change=\"updateHighlight(keyword)\"\n            ></v-checkbox>\n          </v-list-item-action>\n          <v-list-item-content :class=\"{'keywords-no-checkbox': !autoHighlight}\">\n            {{keyword.term}}\n          </v-list-item-content>\n        </v-list-item>\n      </v-list-item-group>\n    </v-list>\n    <v-list dense v-if=\"editKeyword\">\n      <v-list-item v-for=\"(keyword, i) in keywords\" :key=\"i\" dense>\n        <v-list-item-action class=\"mr-1\">\n          <v-btn icon>\n            <v-icon :color=\"keyword.color\">mdi-square</v-icon>\n          </v-btn>\n        </v-list-item-action>\n        <v-list-item-content>\n          <v-text-field\n            v-model=\"keyword.term\"\n            :color=\"keyword.color\"\n          ></v-text-field>\n        </v-list-item-content>\n        <v-list-item-action>\n          <v-btn icon @click=\"removeKeyword(keyword.term)\">\n            <v-icon color=\"grey lighten-1\" title=\"remove keyword\">\n              mdi-close-circle\n            </v-icon>\n          </v-btn>\n        </v-list-item-action>\n      </v-list-item>\n    </v-list>\n    <v-card-actions>\n      <v-text-field\n        label=\"Add Keywords\"\n        v-model=\"newKeywordTerm\"\n        :items=\"suggestedTerms\"\n        flat\n        filled\n        rounded\n        class=\"mt-5\"\n        append-icon=\"mdi-plus\"\n        @click:append=\"addKeyword\"\n      ></v-text-field>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport retext from 'retext'\nimport retextPos from 'retext-pos'\nimport retextKeywords from 'retext-keywords'\n\nexport default {\n  name: 'KeywordList',\n  props: {\n    text: String,\n    terms: Array,\n    suggestedTerms: Array,\n    highlighted: Boolean,\n    colors: Array\n  },\n  data: () => ({\n    keywords: [],\n    newKeywordTerm: null,\n    selectedKeyword: null,\n    autoHighlight: false,\n    highlightInProcess: false,\n    editKeyword: false\n  }),\n  computed: {\n    selectedKeywordColor () {\n      if (Number.isInteger(this.selectedKeyword) && !this.autoHighlight) {\n        return this.keywords[this.selectedKeyword].color \n      }\n      return '#FFFFFF'\n    },\n    keywordIcon () {\n      if (this.editKeyword) {\n        return 'mdi-check'\n      }\n      return 'mdi-pencil'\n    }\n  },\n  watch: {\n    text (val) {\n      if (this.terms.length === 0) {\n        retext()\n          .use(retextPos)\n          .use(retextKeywords)\n          .process(val, this.extractKeywords)\n      }\n    },\n    terms (vals) {\n\n      this.keywords = vals.map((val, ki) => {\n        return {\n          term: val,\n          color: this.colors[ki] || 'yellow',\n          active: true\n        }\n      })\n\n    },\n    highlighted (val) {\n      this.highlightInProcess = val\n    },\n    autoHighlight (val) {\n      if (val) {\n        this.keywords.forEach(kw => kw.active = true)\n        this.updateHighlight()\n        this.highlightInProcess = true\n      } else {\n        this.$emit('unhighlight')\n        this.highlightInProcess = false\n      }\n      this.selectedKeyword = null\n    },\n    selectedKeyword (idx) {\n      if (!this.autoHighlight) {\n        this.keywords.forEach(kw => kw.active = false)\n        if (Number.isInteger(idx)) {\n          this.keywords[idx].active = true\n        }\n        this.updateHighlight()\n      }      \n    },\n    editKeyword (e) {\n      if(!e) {\n        this.updateHighlight()\n      }\n    }\n  },\n  methods: {\n    extractKeywords (err, result) {\n      result.data.keyphrases.forEach(phrase => {\n        console.log(phrase.matches)\n      })\n    },\n\n    addKeyword () {\n      if (this.newKeywordTerm.length > 2) {\n        let keywordColors = this.keywords.map(k => k.color)\n        let newColor = this.colors.filter(color => keywordColors.indexOf(color) === -1)[0] || 'yellow'\n        let newKeyword = {term: this.newKeywordTerm, active: true, color: newColor}\n        this.keywords.push(newKeyword)\n        this.updateHighlight(newKeyword)\n        this.newKeywordTerm = ''\n      }\n    },\n\n    removeKeyword (keywordTerm) {\n      this.keywords = this.keywords.filter(keyword => keyword.term !== keywordTerm)\n      this.updateHighlight()\n    },\n\n    updateHighlight (keyword) {\n      if (keyword !== undefined && !keyword.active) {\n        this.$emit('updateHighlight', keyword.term)\n      } else {\n        this.$emit('highlight', this.keywords.filter(k => k.active))\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.keywords-no-checkbox {\n  margin-left: 1em;\n}\n\n.v-btn {\n  text-transform: none;\n}\n\n</style>\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeywordList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KeywordList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KeywordList.vue?vue&type=template&id=0787166c&scoped=true&\"\nimport script from \"./KeywordList.vue?vue&type=script&lang=js&\"\nexport * from \"./KeywordList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./KeywordList.vue?vue&type=style&index=0&id=0787166c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0787166c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardTitle,VCheckbox,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemGroup,VSwitch,VTextField})\n","import compromise from 'compromise'\nimport stopword from 'stopword'\n\nexport function normalize (\n  str, \n  normalizer = {\n    plurals: true,\n    parentheses: true,\n    possessives:true,\n    honorifics:true\n  }\n) {\n  // remove citations [*], and : ; {} [] '- '\n  let s = str.trim()\n    .replace(/\\[[\\d\\w.]+\\]/g, '')\n    .replace(/(:|;|\\[|\\]|\\{|\\}|\"|'|- )/g, '')\n\n  return compromise(s).normalize(normalizer).out()\n}\n\nexport function extractWords (sentence) {\n  let s = sentence\n    .replace(/\\d+\\.*\\d+/g, '')\n    .replace(/(\\w+|\\d+)(\\.)/g, '$1')\n    .split(' ').filter(w => w.length >= 3)\n  return stopword.removeStopwords(s).map(w => w.toLowerCase())\n}\n\nexport function calcWordMetrics (documents) {\n  let numDocument = documents.length\n  let keywords = []\n  let documentTexts = documents.map(doc => normalize(doc))\n  for (let document of documentTexts) {\n    let words = extractWords(document)\n    for (let word of words) {\n      let wordIdx = keywords.map(kw => kw.word).indexOf(word)\n      if (wordIdx === -1) {\n        keywords.push({\n          word,\n          tf: 1,\n          idf: Math.log10(numDocument / (1 + documentTexts.filter(doc => doc.includes(word)).length))\n        })\n      } else {\n        keywords[wordIdx].tf += 1\n      }\n    }\n  }\n  for (const keyword of keywords) {\n    keyword.tfidf = keyword.tf * keyword.idf\n  }\n  return keywords\n}\n\nexport function calcSentenceMetrics ({\n  text,\n  wordMetrics = null\n}) {\n  let sentences = text.split('. ').filter(s => s.length > 20).map( (s, i) => {\n    return {\n      docIdx: i,\n      str: s.trim(),\n      words: extractWords(normalize(s))\n    }\n  })\n  let metrics = wordMetrics ? wordMetrics : calcWordMetrics(sentences.map(s => s.str))\n  for (let sentence of sentences) {\n    sentence.tfidf = 0\n    let tfVals = sentence.words.map(word => sentence.words.filter(w => w === word).length)\n    if (sentence.words.length) {\n\n      sentence.tfidf = sentence.words\n        .map((w, i) => {\n          let wordIdx = metrics.map(w => w.word).indexOf(w)\n          let idfVal = (wordIdx === -1) ? 0 : metrics[wordIdx].idf\n          return tfVals[i] * idfVal\n        })\n        .reduce((a, b) => a + b)\n        \n      sentence.tfidf /= sentence.words.length\n    }\n  }\n  // if (!k) {\n  //   k = Math.ceil(sentences.length * 0.1)\n  // }\n  let result = sentences\n    .filter(s => s.words.length > 5 && s.words.length < 20 && !s.str.includes('{')  && !s.str.includes('}'))\n    .sort((a, b) => b.tfidf - a.tfidf)\n    // .slice(0, k)\n    .sort((a, b) => a.docIdx - b.docIdx)\n\n  return result\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[(_vm.pdfDocument)?_c('v-toolbar',{staticClass:\"controls\",attrs:{\"flat\":\"\",\"dense\":\"\"}},[_c('v-flex',{staticStyle:{\"margin\":\"auto\"},attrs:{\"justify-center\":\"\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.zoomOut()}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-magnify-minus-outline\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.zoomIn()}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-magnify-plus-outline\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber<2},on:{\"click\":function($event){_vm.pageNumber-=1}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-chevron-left\")])],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pageNumber),expression:\"pageNumber\"}],staticClass:\"page-number-input\",attrs:{\"type\":\"text\",\"value\":\"1\",\"size\":\"2\"},domProps:{\"value\":(_vm.pageNumber)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pageNumber=$event.target.value}}}),_vm._v(\" / \"+_vm._s(_vm.pageTotal)+\"\\n      \"),_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.pageNumber>=_vm.pageTotal},on:{\"click\":function($event){_vm.pageNumber+=1}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-chevron-right\")])],1)],1),(_vm.allowLocalFile)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.selectLocalFile}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-file-upload\")])],1):_vm._e()],1):_vm._e(),_c('input',{ref:\"LocalPdfFile\",staticClass:\"hidden\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.loadFile}}),(_vm.allowLocalFile && !_vm.pdfDocument)?_c('v-layout',{attrs:{\"justify-center\":\"\",\"ma-10\":\"\"}},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.selectLocalFile}},[_c('v-icon',[_vm._v(\"mdi-file-upload\")]),_vm._v(\" Open Local File\\n      \")],1)],1):_vm._e(),_c('v-btn-toggle',{staticClass:\"float-buttons\",style:([_vm.floatButtonStyle]),attrs:{\"id\":\"float-button\"}},[_c('v-btn',[_c('v-icon',[_vm._v(\"mdi-format-align-left\")])],1),_c('v-btn',[_c('v-icon',[_vm._v(\"mdi-format-align-center\")])],1)],1),_c('v-flex',[_c('div',{ref:\"viewerContainer\",attrs:{\"id\":\"viewerContainer\"}},[_c('div',{ref:\"pdfViewer\",staticClass:\"pdfViewer\",attrs:{\"id\":\"viewer\"}})]),_c('div',{attrs:{\"id\":\"loadingBar\"}},[_c('div',{staticClass:\"progress\"}),_c('div',{staticClass:\"glimmer\"})]),_c('div',{attrs:{\"id\":\"errorWrapper\",\"hidden\":\"true\"}},[_c('div',{attrs:{\"id\":\"errorMessageLeft\"}},[_c('span',{attrs:{\"id\":\"errorMessage\"}}),_c('button',{attrs:{\"id\":\"errorShowMore\"}},[_vm._v(\"\\n          More Information\\n        \")]),_c('button',{attrs:{\"id\":\"errorShowLess\"}},[_vm._v(\"\\n          Less Information\\n        \")])]),_c('div',{attrs:{\"id\":\"errorMessageRight\"}},[_c('button',{attrs:{\"id\":\"errorClose\"}},[_vm._v(\"\\n          Close\\n        \")])]),_c('div',{staticClass:\"clearBoth\"}),_c('textarea',{attrs:{\"id\":\"errorMoreInfo\",\"hidden\":\"true\",\"readonly\":\"readonly\"}})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card flat>\r\n    <v-toolbar flat dense class=\"controls\" v-if=\"pdfDocument\">\r\n      <v-flex justify-center style=\"margin: auto;\">\r\n        <v-btn icon @click=\"zoomOut()\">\r\n          <v-icon color=\"white\">mdi-magnify-minus-outline</v-icon>\r\n        </v-btn>\r\n        <v-btn icon @click=\"zoomIn()\">\r\n          <v-icon color=\"white\">mdi-magnify-plus-outline</v-icon>\r\n        </v-btn>\r\n        <v-btn icon :disabled=\"pageNumber<2\" @click=\"pageNumber-=1\">\r\n          <v-icon color=\"white\">mdi-chevron-left</v-icon>\r\n        </v-btn>\r\n        <input type=\"text\" value=\"1\" size=\"2\" v-model=\"pageNumber\" class=\"page-number-input\"/> / {{pageTotal}}\r\n        <v-btn icon :disabled=\"pageNumber>=pageTotal\" @click=\"pageNumber+=1\">\r\n          <v-icon color=\"white\">mdi-chevron-right</v-icon>\r\n        </v-btn>\r\n      </v-flex>\r\n        <v-btn icon v-if=\"allowLocalFile\" @click=\"selectLocalFile\">\r\n          <v-icon color=\"white\">mdi-file-upload</v-icon>\r\n        </v-btn>\r\n    </v-toolbar>\r\n    <input type=\"file\" class=\"hidden\" ref=\"LocalPdfFile\" @change=\"loadFile\" />\r\n    <v-layout justify-center v-if=\"allowLocalFile && !pdfDocument\" ma-10>\r\n        <v-btn color=\"primary\"  @click=\"selectLocalFile\">\r\n          <v-icon>mdi-file-upload</v-icon> Open Local File\r\n        </v-btn>\r\n    </v-layout>\r\n    <v-btn-toggle :style=\"[floatButtonStyle]\" id=\"float-button\" class=\"float-buttons\">\r\n      <v-btn>\r\n        <v-icon>mdi-format-align-left</v-icon>\r\n      </v-btn>\r\n      <v-btn>\r\n        <v-icon>mdi-format-align-center</v-icon>\r\n      </v-btn>\r\n    </v-btn-toggle>\r\n    <v-flex>\r\n      <div id=\"viewerContainer\" ref=\"viewerContainer\">\r\n        <div id=\"viewer\" ref=\"pdfViewer\" class=\"pdfViewer\"></div>\r\n      </div>\r\n      <div id=\"loadingBar\">\r\n        <div class=\"progress\"></div>\r\n        <div class=\"glimmer\"></div>\r\n      </div>\r\n      <div id=\"errorWrapper\" hidden=\"true\">\r\n        <div id=\"errorMessageLeft\">\r\n          <span id=\"errorMessage\"></span>\r\n          <button id=\"errorShowMore\">\r\n            More Information\r\n          </button>\r\n          <button id=\"errorShowLess\">\r\n            Less Information\r\n          </button>\r\n        </div>\r\n        <div id=\"errorMessageRight\">\r\n          <button id=\"errorClose\">\r\n            Close\r\n          </button>\r\n        </div>\r\n        <div class=\"clearBoth\"></div>\r\n        <textarea id=\"errorMoreInfo\" hidden=\"true\" readonly=\"readonly\"></textarea>\r\n      </div>\r\n    </v-flex>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport pdfjsLib from 'pdfjs-dist'\r\nimport * as pdfjsViewer from 'pdfjs-dist/web/pdf_viewer.js'\r\nimport 'pdfjs-dist/web/pdf_viewer.css'\r\nimport { PDFFindController } from 'pdfjs-dist/lib/web/pdf_find_controller.js'\r\nimport { HighlightTextLayerBuilder } from '@/utils/HighlightTextLayerBuilder.js'\r\npdfjsLib.GlobalWorkerOptions.workerSrc = '../../node_modules/pdfjs-dist/build/pdf.worker.js'\r\n\r\nlet MAX_IMAGE_SIZE = 1024 * 1024 * 8\r\nlet CMAP_URL = '../../node_modules/pdfjs-dist/cmaps/'\r\nlet CMAP_PACKED = true\r\nlet DEFAULT_SCALE_DELTA = 1.1\r\nlet MIN_SCALE = 0.25\r\nlet MAX_SCALE = 10.0\r\n// let DEFAULT_SCALE_VALUE = 'auto'\r\n\r\nexport default {\r\n  name: 'PDfViewer',\r\n  props: {\r\n    pdfUrl: String,\r\n    highlightTexts: Array,\r\n    allowLocalFile: Boolean,\r\n  },\r\n  data: () => ({\r\n    pdfLoadingTask: null,\r\n    pdfDocument: null,\r\n    pdfViewer: null,\r\n    pdfHistory: null,\r\n    pdfLinkService: null,\r\n    pageNumber: 1,\r\n    floatButtonStyle: {\r\n      left: 0,\r\n      top: 0,\r\n      display: 'none'\r\n    }\r\n  }),\r\n  computed: {\r\n    pageTotal () {\r\n      return this.pdfDocument ? this.pdfDocument.numPages : 1;\r\n    },\r\n    loadingBar () {\r\n      let bar = new pdfjsViewer.ProgressBar('#loadingBar', {})\r\n      return pdfjsLib.shadow(this, 'loadingBar', bar)\r\n    }\r\n  },\r\n  watch: {\r\n    pageNumber () {\r\n      if (typeof this.pageNumber === 'string') {\r\n        this.pageNumber = parseInt(this.pageNumber)\r\n      }\r\n      // this.pdfViewer.currentPageNumber = this.pageNumber\r\n      document.getElementsByClassName('page')[this.pageNumber - 1].scrollIntoView()\r\n    },\r\n\r\n    pdfUrl () {\r\n      this.open({url: this.pdfUrl})\r\n    },\r\n\r\n    highlightTexts () {\r\n      this.pdfViewer.pagesPromise.then(() => {\r\n        for (let i = 0; i < this.pageTotal; ++i) {\r\n          const pageView = this.pdfViewer.getPageView(i)\r\n          if (pageView.textLayer) {\r\n            pageView.textLayer.highlightTexts = this.highlightTexts\r\n            pageView.textLayer.updateHighlights()\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.l10n = pdfjsViewer.NullL10n\r\n    let container = this.$refs.viewerContainer\r\n    this.pdfLinkService = new pdfjsViewer.PDFLinkService()\r\n    this.findController = new PDFFindController({\r\n      linkService: this.pdfLinkService\r\n    })\r\n    this.pdfViewer = new pdfjsViewer.PDFViewer({\r\n      container: container,\r\n      linkService: this.pdfLinkService,\r\n      findController: this.findController,\r\n      l10n: this.l10n,\r\n      useOnlyCssZoom: 0,\r\n      textLayerMode: 1\r\n      // currentScaleValue: DEFAULT_SCALE_VALUE\r\n    })\r\n    this.pdfViewer.createTextLayerBuilder =\r\n      (textLayerDiv, pageIndex, viewport, enhanceTextSelection = false) => {\r\n      return new HighlightTextLayerBuilder({\r\n        textLayerDiv,\r\n        eventBus: this.pdfViewer.eventBus,\r\n        pageIndex,\r\n        viewport,\r\n        findController:\r\n          this.pdfViewer.isInPresentationMode\r\n            ? null : this.pdfViewer.findController,\r\n        enhanceTextSelection:\r\n          this.pdfViewer.isInPresentationMode ? false : enhanceTextSelection,\r\n        highlights: [],\r\n        highlightTexts: this.highlightTexts || []\r\n      })\r\n    }\r\n    this.pdfLinkService.setViewer(this.pdfViewer)\r\n    this.pdfHistory = new pdfjsViewer.PDFHistory({\r\n      linkService: this.pdfLinkService\r\n    })\r\n    this.pdfLinkService.setHistory(this.pdfHistory)\r\n    // document.querySelectorAll('.pdfViewer').forEach(tl => {\r\n    //   tl.addEventListener('click', function(evt){\r\n    //     console.log(window.getSelection().toString())\r\n    //   })\r\n    // })\r\n    this.$refs.viewerContainer.addEventListener('click', event => {\r\n      this.floatButtonStyle.left = event.clientX + 'px'\r\n      this.floatButtonStyle.top = event.clientY + 'px'\r\n    })\r\n  },\r\n  methods: {\r\n    open (params) {\r\n      if (this.pdfLoadingTask) {\r\n        return this.close().then(() => {\r\n          return this.open(params)\r\n        })\r\n      }\r\n\r\n      this.pdfLoadingTask = pdfjsLib.getDocument({\r\n        url: params.url,\r\n        maxImageSize: MAX_IMAGE_SIZE,\r\n        cMapUrl: CMAP_URL,\r\n        cMapPacked: CMAP_PACKED\r\n      })\r\n\r\n      this.pdfLoadingTask.onProgress = (progressData) => {\r\n        this.progress(progressData.loaded / progressData.total)\r\n      }\r\n\r\n      return this.pdfLoadingTask.promise.then(pdfDocument => {\r\n        this.pdfDocument = pdfDocument\r\n        this.pdfViewer.setDocument(pdfDocument)\r\n        this.pdfLinkService.setDocument(pdfDocument)\r\n        this.pdfHistory.initialize({fingerprint: pdfDocument.fingerprint})\r\n        this.loadingBar.hide()\r\n        this.pdfViewer.currentScaleValue = 1.25\r\n        this.findController.setDocument(pdfDocument)\r\n        this.findController._extractText()\r\n        this.$emit('pdfLoaded', pdfDocument)\r\n        return pdfDocument\r\n      }, (exception) => {\r\n        let message = exception && exception.message\r\n        let l10n = this.l10n\r\n        let loadingErrorMessage\r\n\r\n        if (exception instanceof pdfjsLib.InvalidPDFException) {\r\n          // change error message also for other builds\r\n          loadingErrorMessage = l10n.get('invalid_file_error', null,\r\n            'Invalid or corrupted PDF file.')\r\n        } else if (exception instanceof pdfjsLib.MissingPDFException) {\r\n          // special message for missing PDFs\r\n          loadingErrorMessage = l10n.get('missing_file_error', null,\r\n            'Missing PDF file.')\r\n        } else if (exception instanceof pdfjsLib.UnexpectedResponseException) {\r\n          loadingErrorMessage = l10n.get('unexpected_response_error', null,\r\n            'Unexpected server response.')\r\n        } else {\r\n          loadingErrorMessage = l10n.get('loading_error', null,\r\n            'An error occurred while loading the PDF.')\r\n        }\r\n\r\n        loadingErrorMessage.then(msg => {\r\n          this.error(msg, { message })\r\n        })\r\n        this.loadingBar.hide()\r\n      })\r\n    },\r\n\r\n    close () {\r\n      let errorWrapper = document.getElementById('errorWrapper')\r\n      errorWrapper.setAttribute('hidden', 'true')\r\n      if (!this.pdfLoadingTask) {\r\n        return Promise.resolve()\r\n      }\r\n      let promise = this.pdfLoadingTask.destroy()\r\n      this.pdfLoadingTask = null\r\n\r\n      if (this.pdfDocument) {\r\n        this.pdfDocument = null\r\n        this.pdfViewer.setDocument(null)\r\n        this.pdfLinkService.setDocument(null, null)\r\n      }\r\n      return promise\r\n    },\r\n\r\n    error: function pdfViewError(message, moreInfo) {\r\n      let l10n = this.l10n;\r\n      let moreInfoText = [l10n.get('error_version_info',\r\n        { version: pdfjsLib.version || '?',\r\n          build: pdfjsLib.build || '?', },\r\n        'PDF.js v{{version}} (build: {{build}})')]\r\n\r\n      if (moreInfo) {\r\n        moreInfoText.push(\r\n          l10n.get('error_message', { message: moreInfo.message },\r\n            'Message: {{message}}'))\r\n        if (moreInfo.stack) {\r\n          moreInfoText.push(\r\n            l10n.get('error_stack', { stack: moreInfo.stack },\r\n              'Stack: {{stack}}'))\r\n        } else {\r\n          if (moreInfo.filename) {\r\n            moreInfoText.push(\r\n              l10n.get('error_file', { file: moreInfo.filename },\r\n                'File: {{file}}'))\r\n          }\r\n          if (moreInfo.lineNumber) {\r\n            moreInfoText.push(\r\n              l10n.get('error_line', { line: moreInfo.lineNumber },\r\n                'Line: {{line}}'))\r\n          }\r\n        }\r\n      }\r\n\r\n      let errorWrapper = document.getElementById('errorWrapper')\r\n      let errorMessage = document.getElementById('errorMessage')\r\n      let closeButton = document.getElementById('errorClose')\r\n      errorWrapper.removeAttribute('hidden')\r\n      errorMessage.textContent = message\r\n      closeButton.onclick = function() {\r\n        errorWrapper.setAttribute('hidden', 'true')\r\n      }\r\n\r\n      let errorMoreInfo = document.getElementById('errorMoreInfo')\r\n      let moreInfoButton = document.getElementById('errorShowMore')\r\n      let lessInfoButton = document.getElementById('errorShowLess')\r\n      moreInfoButton.onclick = function() {\r\n        errorMoreInfo.removeAttribute('hidden')\r\n        moreInfoButton.setAttribute('hidden', 'true')\r\n        lessInfoButton.removeAttribute('hidden')\r\n        errorMoreInfo.style.height = errorMoreInfo.scrollHeight + 'px'\r\n      };\r\n      lessInfoButton.onclick = function() {\r\n        errorMoreInfo.setAttribute('hidden', 'true')\r\n        moreInfoButton.removeAttribute('hidden')\r\n        lessInfoButton.setAttribute('hidden', 'true')\r\n      };\r\n      moreInfoButton.removeAttribute('hidden')\r\n      lessInfoButton.setAttribute('hidden', 'true')\r\n      Promise.all(moreInfoText).then(function (parts) {\r\n        errorMoreInfo.value = parts.join('\\n')\r\n      })\r\n    },\r\n\r\n    progress (level) {\r\n      let percent = Math.round(level * 100)\r\n      // Updating the bar if value increases.\r\n      if (percent > this.loadingBar.percent || isNaN(percent)) {\r\n        this.loadingBar.percent = percent\r\n      }\r\n    },\r\n\r\n    zoomIn (ticks) {\r\n      let newScale = this.pdfViewer.currentScale\r\n      do {\r\n        newScale = (newScale * DEFAULT_SCALE_DELTA).toFixed(2)\r\n        newScale = Math.ceil(newScale * 10) / 10\r\n        newScale = Math.min(MAX_SCALE, newScale)\r\n      } while (--ticks && newScale < MAX_SCALE)\r\n      this.pdfViewer.currentScaleValue = newScale\r\n    },\r\n\r\n    zoomOut (ticks) {\r\n      let newScale = this.pdfViewer.currentScale\r\n      do {\r\n        newScale = (newScale / DEFAULT_SCALE_DELTA).toFixed(2)\r\n        newScale = Math.floor(newScale * 10) / 10\r\n        newScale = Math.max(MIN_SCALE, newScale)\r\n      } while (--ticks && newScale > MIN_SCALE)\r\n      this.pdfViewer.currentScaleValue = newScale\r\n    },\r\n\r\n    loadFile ($event) {\r\n      let file = $event.target.files[0]\r\n      if (file) {\r\n        let url = URL.createObjectURL(file)\r\n        this.open({url})\r\n      }\r\n    },\r\n\r\n    selectLocalFile () {\r\n      const elem = this.$refs.LocalPdfFile\r\n      elem.click()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.page-number-input {\r\n  width: 2.5em;\r\n  line-height: 15px;\r\n  text-align: right;\r\n  padding-right: 0.25em;\r\n  border: 1px solid #aaa;\r\n  margin-right: 0.5em;\r\n}\r\n\r\n.controls {\r\n  color: #fff;\r\n  opacity: 0.6; \r\n  background-color: #222; \r\n  text-align: center; \r\n  position: fixed;\r\n  top: 65px;\r\n  z-index: 999;\r\n}\r\n\r\n.float-buttons {\r\n  z-index: 1000;\r\n}\r\n\r\n</style>\r\n\r\n<style>\r\n.pdfViewer .page {\r\n  border-image: none;\r\n  margin: 0.5em auto;\r\n}\r\n\r\n.pdfViewer .canvasWrapper {\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.viewerContainer {\r\n  margin: auto;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PdfViewer.vue?vue&type=template&id=54676d95&scoped=true&\"\nimport script from \"./PdfViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./PdfViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PdfViewer.vue?vue&type=style&index=0&id=54676d95&scoped=true&lang=css&\"\nimport style1 from \"./PdfViewer.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54676d95\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VBtnToggle,VCard,VFlex,VIcon,VLayout,VToolbar})\n","<template>\r\n  <v-app>\r\n    <v-content>\r\n      <v-app-bar flat app clipped-left clipped-right color=\"#EEE\">\r\n        <!-- <v-btn icon @click=\"$router.go(-1)\">\r\n          <v-icon>mdi-arrow-left</v-icon>\r\n        </v-btn> -->\r\n        <v-tabs\r\n          v-if=\"highlightTexts\"\r\n          v-model=\"tab\"\r\n          centered\r\n          background-color=\"#EEE\"\r\n          icons-and-text\r\n        >\r\n          <v-tabs-slider></v-tabs-slider>\r\n          <v-tab href=\"#tab-1\">\r\n            Full Text\r\n            <v-icon>mdi-file</v-icon>\r\n          </v-tab>\r\n          <v-tab href=\"#tab-2\">\r\n            Focused\r\n            <v-icon>mdi-format-list-bulleted-square</v-icon>\r\n          </v-tab>\r\n        </v-tabs>\r\n        <!-- <v-flex class=\"mr-3\">\r\n          <v-btn icon>\r\n            <v-icon>mdi-robot</v-icon>\r\n          </v-btn>\r\n        </v-flex> -->\r\n        <!-- <UserMenu></UserMenu> -->\r\n      </v-app-bar>\r\n      <v-container fluid>\r\n        <PdfViewer\r\n          ref=\"PdfViewer\"\r\n          :class=\"{hidden: tab != 'tab-1'}\" \r\n          :pdfUrl=\"paperUrl\"\r\n          :allowLocalFile=\"allowLocalFile\"\r\n          :highlightTexts=\"highlightTexts\"\r\n          @pdfLoaded=\"onPdfLoaded\"\r\n        />\r\n        <v-card flat class=\"pa-2\" :class=\"{hidden: tab != 'tab-2'}\">\r\n        <template v-for=\"(quote, i) in quotes\">\r\n            <ul :key=i class=\"quotes\">\r\n              <h3>{{quote.title}}</h3>\r\n              <template v-for=\"(line, j) in quote.lines\">\r\n              <li :key=\"j\">\r\n                {{line}}\r\n              </li>\r\n              </template>\r\n            </ul>\r\n        </template>\r\n        </v-card>\r\n      </v-container>\r\n    </v-content>\r\n    <v-navigation-drawer\r\n      clipped\r\n      app\r\n      width=\"18%\"\r\n      class=\"pa-2\"\r\n    >\r\n      <PaperOutline :outline=\"outline\" />\r\n    </v-navigation-drawer>\r\n    <v-navigation-drawer\r\n      clipped\r\n      app\r\n      right\r\n      width=\"18%\"\r\n      v-model=\"navRight\"\r\n    >\r\n      <KeywordList \r\n        :terms=\"keywords\"\r\n        :colors=\"hightlightColors\"\r\n        @highlight=\"highlightByKeywords\"\r\n        @unhighlight=\"removeHighlights\"\r\n        @updateHighlight=\"removeHighlights\"\r\n      />\r\n    </v-navigation-drawer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\n// import UserMenu from '@/components/UserMenu'\r\nimport { getPdfFileUrl } from '@/Firebase/storage'\r\nimport PaperOutline from '@/components/PaperOutline'\r\nimport KeywordList from '@/components/KeywordList'\r\nimport { calcSentenceMetrics, calcWordMetrics, normalize } from '@/utils/Sentences'\r\nimport PdfViewer from '@/components/PdfViewer'\r\n\r\nexport default {\r\n  name: 'PaperReader',\r\n  components: {\r\n    // UserMenu,\r\n    PdfViewer,\r\n    PaperOutline,\r\n    KeywordList\r\n  },\r\n  data: () => ({\r\n    user: null,\r\n    collectionId: null,\r\n    pdfDocument: null,\r\n    paperId: null,\r\n    paperUrl: null,\r\n    outline: null,\r\n    pdfTexts: null,\r\n    navRight: true,\r\n    tab: 'tab-1',\r\n    quotes: null,\r\n    keywords: [],\r\n    highlightTexts: null,\r\n    allowLocalFile: false,\r\n    hightlightColors: [\r\n      'purple',\r\n      'teal',\r\n      'orange',\r\n      'blue',\r\n      'green',\r\n      'pink',\r\n      'brown'\r\n    ]\r\n  }),\r\n  computed: {\r\n    pageTotal () {\r\n      return this.pdfDocument ? this.pdfDocument.numPages : 1;\r\n    }\r\n  },\r\n  created () {\r\n    this.collectionId = this.$route.params.collectionId\r\n    this.paperId = this.$route.params.paperId\r\n  },\r\n  async mounted () {\r\n    if (this.collectionId && this.paperId) {\r\n      let url = await getPdfFileUrl(this.collectionId, this.paperId)\r\n      try {\r\n        this.paperUrl = url\r\n      } catch(error) {\r\n        console.log(error)\r\n      }\r\n    } else {\r\n      this.allowLocalFile = true\r\n    }\r\n  },\r\n  methods: {\r\n    async onPdfLoaded (pdfDoc) {\r\n      this.pdfDocument = pdfDoc\r\n      this.outline = await pdfDoc.getOutline()\r\n      this.pdfTexts = await this.getPaperTexts()\r\n      this.keywords = this.parseKeywords(this.pdfTexts[0])\r\n    },\r\n\r\n    async getPaperTexts () {\r\n      let texts = ''\r\n      for (let i = 1; i < this.pageTotal; i++) {\r\n        let page = await this.pdfDocument.getPage(i)\r\n        let text = await page.getTextContent()\r\n        texts = texts + '<br />' + text.items.map(t => t.str).join('<br />')\r\n      }\r\n\r\n      if (this.outline === null) {\r\n        return [texts]\r\n      } else {\r\n        let subtitles = this.outline.map(s => s.title)\r\n        return this.textBySections(texts, subtitles)\r\n      }\r\n    },\r\n\r\n    analyzeTextByKeywords (keywords) {\r\n      return this.pdfTexts.map(section => {\r\n        let sentences = section.split('.')\r\n        // let sentences = section.split('. ')\r\n        let results = new Array(sentences.length)\r\n        sentences.forEach((sentence, docIdx) => {\r\n          let stats = {}\r\n          let str = sentence.toLowerCase().replace(/<br \\/>/g, ' ')\r\n            .replace(/- /g, '')\r\n\r\n          keywords.forEach(keyword => {\r\n            if (str.includes(keyword)) {\r\n              stats[keyword] = 1\r\n            } else {\r\n              stats[keyword] = 0\r\n            }\r\n            let terms = keyword.split(' ')\r\n            terms.forEach(term => {\r\n              if (str.includes(term)) {\r\n                stats[keyword] += 1 / terms.length\r\n              }\r\n            })\r\n          })\r\n          let topic = 'other'\r\n          let scoreMax = 0\r\n          let score = 0\r\n          keywords.forEach(keyword => {\r\n            if (stats[keyword] > scoreMax) {\r\n              scoreMax = stats[keyword]\r\n              topic = keyword\r\n            }\r\n            score += stats[keyword]\r\n          })\r\n          if (str.match(/[\\s+]\\d+(.*|,*)[\\d*]/g)) {\r\n            score *= 2\r\n          }\r\n          results[docIdx] = {sentence, stats, topic, score, docIdx}\r\n        })\r\n        return results\r\n      })\r\n    },\r\n\r\n    highlightByKeywords (keywords) {\r\n      let terms = keywords.map(k=>k.term)\r\n      let selectedSentences = this.analyzeTextByKeywords(terms)\r\n      .map(section => {\r\n        let k = Math.min(Math.ceil(section.length * 0.1), terms.length * 5)\r\n        return section.sort((a, b) => b.score - a.score).slice(0, k).sort((a, b) => a.docIdx - b.docIdx)\r\n      })\r\n      let selectedSections = (this.outline) ? selectedSentences.slice(1, -1) : selectedSentences\r\n      this.highlightTexts = [].concat(...selectedSections.map(section => {\r\n        return section.map(line => {\r\n          let keywordIdx = terms.indexOf(line.topic)\r\n          return {\r\n            bgColor: (keywordIdx === -1) ? 'none': keywords[terms.indexOf(line.topic)].color,\r\n            text: line.sentence.replace(/<br \\/>/g, '').trim(),\r\n            topic: line.topic\r\n          }\r\n        }).filter(s => terms.indexOf(s.topic) !== -1 )\r\n      }))\r\n\r\n      this.createSummary(selectedSections)\r\n    },\r\n\r\n    removeHighlights (keywordToRemove) {\r\n      if (keywordToRemove === undefined) {\r\n        this.highlightTexts = []\r\n      } else {\r\n        this.highlightTexts = this.highlightTexts.filter(ht => ht.topic !== keywordToRemove)\r\n      }\r\n    },\r\n\r\n    createSummary (sentences) {\r\n      let subtitles = (this.outline) ? this.outline.map(s => s.title) : ['Summary']\r\n      this.quotes = sentences.map((sec, i) => {\r\n        return {\r\n          title: subtitles[i],\r\n          lines: sec.map(s => s.sentence.replace(/<br \\/>/g, ' ').replace(/- /g, '').trim())\r\n        }\r\n      })\r\n    },\r\n\r\n    selectSentences (texts) {\r\n      let sentences\r\n      if (this.outline === null) {\r\n        sentences = [calcSentenceMetrics({text: texts[0]})]\r\n      } else {\r\n        let paperText = texts.slice(1)\r\n        let keywords = calcWordMetrics(paperText).sort((a, b) => b.tfidf - a.tfidf).slice(0, 20)\r\n        sentences = paperText.map(text => calcSentenceMetrics({text, metrics: keywords}))\r\n      }\r\n      return sentences\r\n    },\r\n\r\n    parseKeywords (rawText) {\r\n      let texts = rawText.replace(/<br \\/>/g, ' ')\r\n      let keywordStart = (/(keywords|index terms)/ig).exec(texts)\r\n      let keywordEndIndex = texts.search(/ntroduction/ig)\r\n      let keywordStr = texts.slice(keywordStart.index + keywordStart[0].length, keywordEndIndex)\r\n      let delimiters = []\r\n      keywordStr.match(/(:|;|,)/g).forEach( c => {\r\n        let dx = delimiters.map(d => d.char).indexOf(c)\r\n        if (dx === -1) {\r\n          delimiters.push({char: c, count: 1})\r\n        } else {\r\n          delimiters[dx].count++\r\n        }\r\n      })\r\n      let delimiter = delimiters.sort((a, b) => b.count - a.count)[0].char\r\n      let keywords = keywordStr\r\n        .split(delimiter)\r\n        .map(k => k.trim().toLowerCase())\r\n        .filter(k => k.length > 2)\r\n        .map(k => normalize(k.replace(/([^\\w\\d,\\- ])/g, '').split(' ').filter(w => w.trim().length > 1).join(' ')))\r\n      return keywords\r\n    },\r\n\r\n    textBySections (texts, subtitles) {\r\n      let sectionCount = subtitles.length\r\n      let sectionTexts = []\r\n      let sectionEnd\r\n      for (let i = 0; i < sectionCount; i++) {\r\n        let subParts = subtitles[i].split(' ').map(s => s.toUpperCase())\r\n        let pattern = subParts.map(sp => {\r\n          return sp.split('').join('(<br \\\\/>)*')\r\n        }).join('(<br \\\\/>)*')\r\n        let regex = new RegExp(''+ pattern)\r\n        let match = texts.match(regex)\r\n        if (match) {\r\n          sectionEnd = match.index + match[0].length\r\n          sectionTexts.push(texts.substring(0, sectionEnd))\r\n          texts = texts.substring(sectionEnd)\r\n        } else {\r\n          sectionEnd = -1\r\n        }\r\n      }\r\n      if (sectionEnd === -1) {\r\n        sectionTexts.push(texts)\r\n      }\r\n      return sectionTexts\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.quotes {\r\n  text-align: left;\r\n  margin: 2em;\r\n}\r\n\r\n.quotes li {\r\n  text-align: left;\r\n  margin: 0.5em 2em;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reader.vue?vue&type=template&id=80556a92&scoped=true&\"\nimport script from \"./Reader.vue?vue&type=script&lang=js&\"\nexport * from \"./Reader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Reader.vue?vue&type=style&index=0&id=80556a92&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80556a92\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VApp,VAppBar,VCard,VContainer,VContent,VIcon,VNavigationDrawer,VTab,VTabs,VTabsSlider})\n","import Vue from 'vue'\nimport Router from 'vue-router'\nimport UserAuth from '@/components/UserAuth'\nimport CollectionView from '@/pages/CollectionView'\nimport { onUserSignIn } from '@/Firebase/auth'\nimport UserPage from '@/pages/User'\nimport PaperReader from '@/pages/PaperReader'\nimport Reader from '@/pages/Reader'\n\nVue.use(Router)\n\nlet router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL || '/',\n  routes: [\n    // {\n    //   path: '/auth/:action',\n    //   name: 'UserAuth',\n    //   component: UserAuth\n    // },\n    // {\n    //   path: '/collection/:collectionId',\n    //   name: 'CollectionView',\n    //   component: CollectionView,\n    //   meta: {\n    //     requireAuth: true\n    //   }\n    // },\n    // {\n    //   path: '/user',\n    //   name: 'UserPage',\n    //   component: UserPage,\n    //   meta: {\n    //     requireAuth: true\n    //   }\n    // },\n    // {\n    //   path: '/reader/:collectionId/:paperId',\n    //   name: 'OnlineReader',\n    //   component: Reader,\n    //   meta: {\n    //     requireAuth: true\n    //   }\n    // },\n    {\n      path: '/',\n      name: 'Reader',\n      component: Reader\n    },\n    // {\n    //   path: '/reader/test',\n    //   name: 'TestReader',\n    //   component: PaperReader\n    // }\n  ]\n})\n\nrouter.beforeEach((to, from, next) => {\n  const requireAuth = to.matched.some(path => path.meta.requireAuth)\n  if (requireAuth) {\n    onUserSignIn(user => {\n      if (!user) {\n        next('/auth/signin?redirect=' + to.path)\n      } else {\n        next()\n      }\n    })\n  } else {\n    next()\n  }\n})\n\nexport default router\n","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    user: null,\r\n    navigationDrawer: false\r\n  },\r\n  mutations: {\r\n    setUser (state, user) {\r\n      state.user = user\r\n    },\r\n    toggleNavigationDrawer (state) {\r\n      state.navigationDrawer = !state.navigationDrawer\r\n    }\r\n  },\r\n  getters: {\r\n    getUser: state => () => {\r\n      return state.user\r\n    }\r\n  },\r\n  actions: {\r\n    authenticated ({commit}, user) {\r\n      commit('setUser', user)\r\n    }\r\n  }\r\n})\r\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  icons: {\n    iconfont: 'mdi',\n  },\n});\n","export const firebaseConfig = {\n  apiKey: \"AIzaSyAwAqNWiOQkgVjfjHewJb2smul8_2J2BYw\",\n  authDomain: \"paperlax.firebaseapp.com\",\n  databaseURL: \"https://paperlax.firebaseio.com\",\n  projectId: \"paperlax\",\n  storageBucket: \"paperlax.appspot.com\",\n  messagingSenderId: \"307362375810\",\n  appId: \"1:307362375810:web:b6f6806ca2becf45\"\n}","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './store'\nimport vuetify from './plugins/vuetify'\n\nimport * as firebase from 'firebase/app'\nimport {firebaseConfig} from '../config/firebase.conf'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport 'firebase/storage'\n\nVue.config.productionTip = false\n\nfirebase.initializeApp(firebaseConfig)\n\nnew Vue({\n  router,\n  store,\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')","module.exports = __webpack_public_path__ + \"img/logo.63a7d78d.svg\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperReader.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperReader.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=style&index=1&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperList.vue?vue&type=style&index=0&id=82d3d59c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaperList.vue?vue&type=style&index=0&id=82d3d59c&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reader.vue?vue&type=style&index=0&id=80556a92&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reader.vue?vue&type=style&index=0&id=80556a92&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=style&index=0&id=54676d95&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PdfViewer.vue?vue&type=style&index=0&id=54676d95&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionList.vue?vue&type=style&index=0&id=17044931&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionList.vue?vue&type=style&index=0&id=17044931&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAACi1BMVEVHcEyFtTn/ZQL/gACAv4D/qgD/wQj/SgH/aQNcsUonesW/v0D/fAD/wQeq/wD/wAf/gAD/XwJ5tD7/vwD/vwf/egSdtTBrkYqguS2HtTj/RQD/cQKHtjiCtDu2tiT/aQFlj4+GtTmLtDeAmnL/gACctzB7tT08grP/UQFZipr/SACjsTL/igT/gAB4sz//cAP/bgNYsUpQh6L/RgH/dwJjsUf/SgH/dAIpfMT/eAWAonSBtTv/wQe/vyD/aQNejpGLol1Vip6VtzL/XgL/aAP/nwD/WgGltTAwfb7/dQP/ZAJ7tT08gbT/TAFfskj/hQBesEpcsEqUuDKbty7/aQP/ZgKRtTX/dgWDtTlGhapPiKKVtjGmvyb/cgKPl2hasEtZsEtqlZVnskX/gwdnsUX/ZwL/XwJplYKZuytdjJgtfMFxk4T/awOdty+JtTeLtjeInHH/XQJXipuOtjX/jgCduieAn0D/gAB2skC/vyD/eAWZtTD/cwJukYf/egWuuSOqtistfMH/lgD/aQOHlnMpesOlvCaiuS7/UAGqqiv/ZAL/XAKVuSz/wQf/wwf/cQD/SwH/bQD/wAdbsUqTtjT/oAWEtDn/vweOqjn/cQP/wAb/wQeXtTD/wgb/igf/wAn/SQFdsUr/vwn/aAKyuSf/dQL/wQn/wQf/wQj/vQeHtDj/wQf//wD/cQP/wQj/vwncvhX/PQAZdtJMr1D/wQf/QABSsE1QsE5Nr1D/QQBgl39Rr04eeM5WjpIed81ZqlhgpmD/QgBRrlFNrlEgeMsfeMxin20ad9EtfMDSvRn/iAT/XQJdsUn/vwftvw6DtDr0wAz/RgGxuSf/swb/dgP/mQX+wQdlsUb/PgApwzeYAAAAsXRSTlMAz9AEBAPt/MD8/gQj+QPUBuTmDEhDYJYzxP6QzswHv8TPwyYKX+L399T9JD8U5KC1/ub+jvv9f/1iFtCtEMXkC9d/5cUI6jD8mc/m9/z7F/39nYq/zps40uzkghSIIP39DPcn99Lj3R7U/Zy4PM+1WujcswkaCBbnCGSKfLMwFkL8Ecwz/iIL+AbW5x2TJhv8B5L8nuj1JAmceq6OeSM5/f040yGSHeSI+dDjAsuHHPoXgeFNAAAB8klEQVRIx2NgGI6AucogrcPs4FYpDeccS2aCysPtfDciAXaXOrzKk1N3bkQDW5l4cKs3Md6IBWjF4lBe0rURB/ASwKa+qXAjTiCNRb2rG2718tgsWIxbfQg29UuRw7K5Rke3XNSciR3M5cCmft4ChHJPuBdV9NlxqGdYC1cv6I8sztONXf2ylVduQNSHshKVflZs2XL1Ith84tSzLt+yZcvl0xs3TugnLoHO3wICZ09tnUlkip61BQKmTiRSgw1UwyQksU0YgKsILskP1SCCV8MmdbgkG1TDdPwaLOCSvFANwvg1HCVVwz4MJ/Xh19BKqqd94JKzoRp68WuIgkvOhag/N20Gtlhy8IBqqIULLQKrP3lm8xRsGrJhNhTAhdas3rLl2qXtmzdP7sFUH5cFVd/IghBct+XC+c0gIMSNrp7FCGaBApLo+g3XN0OANZoOlkyY+j0tyOKrNsOAUCmyeEY6PIw0UQxashCugzOoDCbaHhZ4aC8srSqjWj1nx2aEFkWnhvqY3GhZTiDn8K7jYA3i6J7L24wLHDsCVO+IEXqdFTh1HDixKTIRM7xtvXHq2G9vhS1GKyN24NDAKIcjbwcnYFMeX427NNCW2YaufDdjG94CRELJFFm5n6Q7wTKHT6xYLSlg23bDFL18Vb5h2bIAABqWPo/k9EsKAAAAAElFTkSuQmCC\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionFilter.vue?vue&type=style&index=0&id=7a5ce521&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionFilter.vue?vue&type=style&index=0&id=7a5ce521&scoped=true&lang=css&\""],"sourceRoot":""}